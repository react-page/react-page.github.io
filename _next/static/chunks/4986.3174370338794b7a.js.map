{"version":3,"file":"static/chunks/4986.3174370338794b7a.js","mappings":"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","sources":["webpack://_N_E/../packages/editor/lib-es/core/components/hooks/actions.js","webpack://_N_E/../packages/editor/lib-es/core/actions/undo.js","webpack://_N_E/../packages/editor/lib-es/core/selector/focus.js","webpack://_N_E/../packages/editor/lib-es/core/components/hooks/focus.js","webpack://_N_E/../packages/editor/lib-es/core/utils/objIsNode.js","webpack://_N_E/../packages/editor/lib-es/core/components/Editable/FallbackDropArea.js","webpack://_N_E/../packages/editor/lib-es/core/components/hooks/display.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/utils/scrollIntoViewWithOffset.js","webpack://_N_E/../packages/editor/lib-es/core/components/Editable/hooks/useKeepScrollPosition.js","webpack://_N_E/../packages/editor/lib-es/core/service/hover/computeHover.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/InsertNew.js","webpack://_N_E/../packages/editor/lib-es/core/helper/throttle/index.js","webpack://_N_E/../packages/editor/lib-es/core/service/logger/index.js","webpack://_N_E/../packages/editor/lib-es/core/service/hover/input.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/Droppable/helper/dnd.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/Droppable/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Row/Droppable/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/ErrorCell/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/Draggable/useDragHandle.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/Handle/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/Draggable/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/PluginControls/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/PluginMissing.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/PluginComponent/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/Inner/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/MoveActions/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Row/ResizableRowCell.js","webpack://_N_E/../packages/editor/lib-es/core/components/Row/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Editable/Inner/Rows.js","webpack://_N_E/../packages/editor/lib-es/core/components/hooks/value.js","webpack://_N_E/../packages/editor/lib-es/core/components/Editable/Inner/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Editable/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/HotKey/GlobalHotKeys.js","webpack://_N_E/../packages/editor/lib-es/core/Provider/DndProvider.js","webpack://_N_E/../packages/editor/lib-es/core/components/BlurGate.js","webpack://_N_E/../packages/editor/lib-es/core/components/hooks/callbacks.js","webpack://_N_E/../packages/editor/lib-es/core/Provider/CallbacksProvider.js","webpack://_N_E/../packages/editor/lib-es/core/migrations/serialzeValue.js","webpack://_N_E/../packages/editor/lib-es/core/Provider/EditorStoreProvider.js","webpack://_N_E/../packages/editor/lib-es/core/Provider/OptionsProvider.js","webpack://_N_E/../packages/editor/lib-es/core/Provider/RenderOptionsProvider.js","webpack://_N_E/../packages/editor/lib-es/core/Provider/index.js","webpack://_N_E/../packages/editor/lib-es/ui/PluginDrawer/Draggable/index.js","webpack://_N_E/../packages/editor/lib-es/ui/PluginDrawer/Item/index.js","webpack://_N_E/../packages/editor/lib-es/ui/PluginDrawer/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Trash/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/Button/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/ToggleEdit/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/ToggleInsert/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/ToggleLayout/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/TogglePreview/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/ToggleResize/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/UndoRedo/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/Zoom/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/index.js","webpack://_N_E/../packages/editor/lib-es/ui/MultiNodesBottomToolbar/DeleteAll.js","webpack://_N_E/../packages/editor/lib-es/ui/MultiNodesBottomToolbar/DuplicateAll.js","webpack://_N_E/../packages/editor/lib-es/ui/MultiNodesBottomToolbar/index.js","webpack://_N_E/../packages/editor/lib-es/ui/EditorUI/index.js","webpack://_N_E/../packages/editor/lib-es/editor/StickyWrapper.js","webpack://_N_E/../packages/editor/lib-es/editor/EditableEditor.js","webpack://_N_E/../packages/editor/lib-es/ui/AutoformControls/index.js","webpack://_N_E/../packages/editor/lib-es/ui/AutoformControls/makeUniformsSchema.js"],"sourcesContent":["import { useCallback } from 'react';\nimport { redo, undo } from '../../actions/undo';\nimport { useDispatch, useSelector } from '../../reduxConnect';\n/**\n * @returns function, that undos last change if called\n */\nexport var useUndo = function () {\n    var dispatch = useDispatch();\n    return useCallback(function () { return dispatch(undo()); }, [dispatch]);\n};\n/**\n * @returns function, that redos last change if called\n */\nexport var useRedo = function () {\n    var dispatch = useDispatch();\n    return useCallback(function () { return dispatch(redo()); }, [dispatch]);\n};\n/**\n * @returns whether user can undo\n */\nexport var useCanUndo = function () {\n    return useSelector(function (s) { return s.reactPage.values.past.length > 0; });\n};\n/**\n * @returns whether user can undo\n */\nexport var useCanRedo = function () {\n    return useSelector(function (s) { return s.reactPage.values.future.length > 0; });\n};\n//# sourceMappingURL=actions.js.map","import { ActionTypes } from 'redux-undo';\nexport var undo = function () { return ({\n    type: ActionTypes.UNDO,\n}); };\nexport var redo = function () { return ({\n    type: ActionTypes.REDO,\n}); };\n//# sourceMappingURL=undo.js.map","import { findNodeInState } from './editable';\nexport var focus = function (state) {\n    return state && state.reactPage && state.reactPage.focus;\n};\nexport var allFocusedNodeIds = function (state) {\n    var _a, _b, _c;\n    return ((_c = (_b = (_a = focus(state)) === null || _a === void 0 ? void 0 : _a.nodeIds) === null || _b === void 0 ? void 0 : _b.filter(function (n) { var _a; return (_a = findNodeInState(state, n)) === null || _a === void 0 ? void 0 : _a.node; })) !== null && _c !== void 0 ? _c : []);\n};\nexport var singleFocusedNode = function (state) {\n    var nodeIds = allFocusedNodeIds(state);\n    if ((nodeIds === null || nodeIds === void 0 ? void 0 : nodeIds.length) === 1)\n        return nodeIds[0];\n    return null;\n};\n//# sourceMappingURL=focus.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useEffect } from 'react';\nimport { useSelector } from '../../reduxConnect';\nimport { allFocusedNodeIds, focus, singleFocusedNode, } from '../../selector/focus';\n/**\n * @returns the current focused nodeId if just one or null\n */\nexport var useFocusedNodeId = function () {\n    return useSelector(singleFocusedNode);\n};\nexport var useAllFocusedNodeIds = function () {\n    return useSelector(allFocusedNodeIds);\n};\n/**\n *\n * @param id the id of the node (row/cell)\n * @returns true if the given node id is focused\n */\nexport var useIsFocused = function (id) {\n    return useSelector(function (state) { return allFocusedNodeIds(state).includes(id); });\n};\n/**\n *\n * @param id the id of the node (row/cell)\n * @returns true if ONLY the given node id is focused\n */\nexport var useIsExclusivlyFocused = function (id) {\n    return useSelector(function (state) { return singleFocusedNode(state) === id; });\n};\n/**\n *\n * @param id the id of the node\n * @param effect callback that is run when the given node is focused and the focus action demanded scrollToCell\n * @param deps effect deps array\n */\nexport var useScrollToViewEffect = function (id, effect, deps) {\n    var scrollToCell = useSelector(function (state) {\n        var f = focus(state);\n        var nodeId = singleFocusedNode(state);\n        if (!f || nodeId !== id) {\n            return null;\n        }\n        return f.scrollToCell;\n    });\n    useEffect(function () {\n        if (scrollToCell) {\n            return effect();\n        }\n    }, __spreadArray([scrollToCell], __read(deps), false));\n};\n//# sourceMappingURL=focus.js.map","// poor check\nexport var objIsNode = function (obj) {\n    if (!obj)\n        return false;\n    if (!('id' in obj)) {\n        return false;\n    }\n    return true;\n};\n//# sourceMappingURL=objIsNode.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React from 'react';\nimport { useCallback } from 'react';\nimport { useDrop } from 'react-dnd';\nimport { useCellIsAllowedHere, useInsertNew, useSetDisplayReferenceNodeId, } from '../hooks';\nvar FallbackDropArea = function (_a) {\n    var children = _a.children;\n    var insertNew = useInsertNew();\n    var isAllowed = useCellIsAllowedHere();\n    var _b = __read(useDrop({\n        accept: 'cell',\n        canDrop: function (item) { return isAllowed(item); },\n        drop: function (item, monitor) {\n            // fallback drop\n            if (!monitor.didDrop() && item.cell) {\n                insertNew(item.cell);\n            }\n        },\n    }), 2), dropRef = _b[1];\n    var setReference = useSetDisplayReferenceNodeId();\n    var clearReference = useCallback(function (e) {\n        var _a;\n        // if click was on the root, clear reference\n        if ((_a = e.target.classList) === null || _a === void 0 ? void 0 : _a.contains('react-page-editable'))\n            setReference(null);\n    }, [setReference]);\n    return (React.createElement(\"div\", { ref: dropRef, onClick: clearReference }, children));\n};\nexport default FallbackDropArea;\n//# sourceMappingURL=FallbackDropArea.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useCallback } from 'react';\nimport { useDispatch, useSelector } from '../../reduxConnect';\nimport { setZoom } from '../../actions/display';\nimport { useOption } from './options';\nexport var useSetZoom = function () {\n    var dispatch = useDispatch();\n    return useCallback(function (zoom) { return dispatch(setZoom(zoom)); }, [dispatch]);\n};\n/**\n * @returns the current zoom\n */\nexport var useZoom = function () {\n    return useSelector(function (state) { return state.reactPage.display.zoom; });\n};\nexport var useZoomOut = function () {\n    var zoom = useZoom();\n    var zoomFactors = useOption('zoomFactors');\n    var setZoom = useSetZoom();\n    return useCallback(function () {\n        var newZoom = zoomFactors === null || zoomFactors === void 0 ? void 0 : zoomFactors.find(function (z) { return z < zoom; });\n        if (newZoom)\n            setZoom(newZoom);\n    }, [zoom, setZoom, zoomFactors]);\n};\nexport var useZoomIn = function () {\n    var zoom = useZoom();\n    var setZoom = useSetZoom();\n    var zoomFactors = useOption('zoomFactors');\n    return useCallback(function () {\n        var newZoom = __spreadArray([], __read((zoomFactors !== null && zoomFactors !== void 0 ? zoomFactors : [])), false).reverse().find(function (z) { return z > zoom; });\n        if (newZoom)\n            setZoom(newZoom);\n    }, [zoom, setZoom, zoomFactors]);\n};\nexport var useCanZoomOut = function () {\n    var _a;\n    var zoom = useZoom();\n    var zoomFactors = useOption('zoomFactors');\n    return (_a = zoomFactors === null || zoomFactors === void 0 ? void 0 : zoomFactors.some(function (z) { return z < zoom; })) !== null && _a !== void 0 ? _a : false;\n};\nexport var useCanZoomIn = function () {\n    var _a;\n    var zoom = useZoom();\n    var zoomFactors = useOption('zoomFactors');\n    return (_a = zoomFactors === null || zoomFactors === void 0 ? void 0 : zoomFactors.some(function (z) { return z > zoom; })) !== null && _a !== void 0 ? _a : false;\n};\n//# sourceMappingURL=display.js.map","export default (function (element, offset, behavior) {\n    if (offset === void 0) { offset = 0; }\n    if (behavior === void 0) { behavior = 'smooth'; }\n    if (!element) {\n        return;\n    }\n    var bodyRect = document.body.getBoundingClientRect().top;\n    var elementRect = element.getBoundingClientRect().top;\n    var elementPosition = elementRect - bodyRect;\n    var offsetPosition = elementPosition - offset;\n    window.scrollTo({\n        top: offsetPosition,\n        behavior: behavior,\n    });\n});\n//# sourceMappingURL=scrollIntoViewWithOffset.js.map","import throttle from 'lodash.throttle';\nimport React, { useEffect } from 'react';\nimport scrollIntoViewWithOffset from '../../Cell/utils/scrollIntoViewWithOffset';\nimport { useDisplayMode } from '../../hooks';\nfunction isElementInViewport(el) {\n    var rect = el.getBoundingClientRect();\n    return (rect.top >= 0 &&\n        rect.left >= 0 &&\n        rect.bottom <=\n            (window.innerHeight ||\n                document.documentElement.clientHeight) /*or $(window).height() */ &&\n        rect.right <=\n            (window.innerWidth ||\n                document.documentElement.clientWidth) /*or $(window).width() */);\n}\nexport var useKeepScrollPosition = function (ref) {\n    var mode = useDisplayMode();\n    var firstElementInViewPortref = React.useRef();\n    useEffect(function () {\n        var onScroll = throttle(function () {\n            if (ref.current) {\n                var firstInViewport = Array.prototype.find.call(ref.current.getElementsByClassName('react-page-cell'), function (cell) { return isElementInViewport(cell); });\n                if (firstInViewport) {\n                    firstElementInViewPortref.current = {\n                        el: firstInViewport,\n                        topOffset: firstInViewport.getBoundingClientRect().top,\n                    };\n                }\n                else {\n                    firstElementInViewPortref.current = undefined;\n                }\n            }\n        }, 600);\n        window.addEventListener('scroll', onScroll);\n        return function () {\n            window.removeEventListener('scroll', onScroll);\n        };\n    }, []);\n    useEffect(function () {\n        if (firstElementInViewPortref.current) {\n            var _a = firstElementInViewPortref.current, el_1 = _a.el, topOffset_1 = _a.topOffset;\n            setTimeout(function () {\n                scrollIntoViewWithOffset(el_1, topOffset_1, 'auto');\n            }, 0);\n        }\n    }, [mode]);\n};\n//# sourceMappingURL=useKeepScrollPosition.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar _a;\nimport { isRow } from '../../types';\nimport deepEquals from '../../utils/deepEquals';\nimport logger from '../logger';\n/**\n * NO (None): No drop zone.\n *\n * Corners are counted clockwise, beginning top left\n * C1 (Corner top left): Position decided by top left corner function\n * C2 (Corner top right): Position decided by top right corner function\n * C3 (Corner bottom right): Position decided by bottom right corner function\n * C4 (Corner bottom left): Position decided by bottom left corner function\n *\n * Above:\n * AH (Above here): above, same level\n * AA (Above of self or some ancestor): Above, compute active level using classification functions, e.g. log, sin, mx + t\n *\n * Below:\n * BH (Below here)\n * BA (Below of self or some ancestor)\n *\n * Left of:\n * LH (Left of here)\n * LA (Left of self or some ancestor)\n *\n * Right of:\n * RH (Right of here)\n * RA (Right of self or some ancestor)\n *\n * Inside / inline\n * IL (Inline left)\n * IR (Inline right)\n */\nexport var classes = {\n    NO: 0,\n    C1: 10,\n    C2: 11,\n    C3: 12,\n    C4: 13,\n    AH: 200,\n    AA: 201,\n    BH: 210,\n    BA: 211,\n    LH: 220,\n    LA: 221,\n    RH: 230,\n    RA: 231,\n    IL: 300,\n    IR: 301,\n};\nvar c = classes;\n/**\n * A list of matrices that are used to define the callback function.\n *\n * @type {{10x10: *[], 10x10-no-inline: *[]}}\n */\nvar MATRIX_LIST = {\n    '10x10': [\n        [c.C1, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.C2],\n        [c.LA, c.IL, c.IL, c.IL, c.AH, c.AH, c.IR, c.IR, c.IR, c.RA],\n        [c.LA, c.IL, c.IL, c.IL, c.AH, c.AH, c.IR, c.IR, c.IR, c.RA],\n        [c.LA, c.IL, c.IL, c.IL, c.AH, c.AH, c.IR, c.IR, c.IR, c.RA],\n        [c.LA, c.LH, c.LH, c.LH, c.C1, c.C2, c.RH, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.LH, c.C4, c.C3, c.RH, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.C4, c.BH, c.BH, c.C3, c.IR, c.RH, c.RA],\n        [c.LA, c.LH, c.C4, c.BH, c.BH, c.BH, c.BH, c.C3, c.RH, c.RA],\n        [c.LA, c.C4, c.BH, c.BH, c.BH, c.BH, c.BH, c.BH, c.C3, c.RA],\n        [c.C4, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.C3],\n    ],\n    '10x10-no-inline': [\n        [c.C1, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.C2],\n        [c.LA, c.C1, c.AH, c.AH, c.AH, c.AH, c.AH, c.AH, c.C2, c.RA],\n        [c.LA, c.LH, c.C1, c.AH, c.AH, c.AH, c.AH, c.C2, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.C1, c.AH, c.AH, c.C2, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.LH, c.C1, c.C2, c.RH, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.LH, c.C4, c.C3, c.RH, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.C4, c.BH, c.BH, c.C3, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.C4, c.BH, c.BH, c.BH, c.BH, c.C3, c.RH, c.RA],\n        [c.LA, c.C4, c.BH, c.BH, c.BH, c.BH, c.BH, c.BH, c.C3, c.RA],\n        [c.C4, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.C3],\n    ],\n};\n/**\n * Computes the average width and height for cells in a room.\n *\n * @param room\n * @param matrix\n * @returns {{x: number, y: number}}\n */\nvar getRoomScale = function (_a) {\n    var room = _a.room, matrix = _a.matrix;\n    var rows = matrix.length;\n    var cells = matrix[0].length;\n    var scalingX = room.width / cells;\n    var scalingY = room.height / rows;\n    return {\n        x: scalingX,\n        y: scalingY,\n    };\n};\n/**\n * Returns the index of the hover cell.\n *\n * @param mouse\n * @param scale\n */\nvar getMouseHoverCell = function (_a) {\n    var mouse = _a.mouse, scale = _a.scale;\n    return ({\n        cell: Math.floor(mouse.x / scale.x),\n        row: Math.floor(mouse.y / scale.y),\n    });\n};\n/**\n * Used for caching.\n */\nvar last = { '10x10': null, '10x10-no-inline': null };\nexport var computeHover = function (drag, hover, actions, _a) {\n    var _b, _c;\n    var room = _a.room, mouse = _a.mouse, cellPlugins = _a.cellPlugins;\n    var allowInlineNeighbours = (_c = (_b = cellPlugins.find(function (p) { return p.id === hover.pluginId; })) === null || _b === void 0 ? void 0 : _b.allowInlineNeighbours) !== null && _c !== void 0 ? _c : false;\n    var matrixName = allowInlineNeighbours ? '10x10' : '10x10-no-inline';\n    var matrix = MATRIX_LIST[matrixName];\n    var scale = getRoomScale({ room: room, matrix: matrix });\n    var hoverCell = getMouseHoverCell({ mouse: mouse, scale: scale });\n    var rows = matrix.length;\n    var cells = matrix[0].length;\n    if (hoverCell.row >= rows) {\n        hoverCell.row = rows - 1;\n    }\n    else if (hoverCell.row < 0) {\n        hoverCell.row = 0;\n    }\n    if (hoverCell.cell >= cells) {\n        hoverCell.cell = cells - 1;\n    }\n    else if (hoverCell.cell < 0) {\n        hoverCell.cell = 0;\n    }\n    var cell = matrix[hoverCell.row][hoverCell.cell];\n    if (!CALLBACK_LIST[cell]) {\n        logger.error('Matrix callback not found.', {\n            room: room,\n            mouse: mouse,\n            matrix: matrix,\n            scale: scale,\n            hoverCell: hoverCell,\n            rows: rows,\n            cells: cells,\n        });\n        return;\n    }\n    var all = {\n        item: drag.id,\n        hover: hover.id,\n        actions: actions,\n        ctx: {\n            room: room,\n            mouse: mouse,\n            position: hoverCell,\n            size: { rows: rows, cells: cells },\n            scale: scale,\n        },\n    };\n    if (deepEquals(all, last[matrixName])) {\n        return;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    last[matrixName] = all;\n    return CALLBACK_LIST[cell](drag, hover, actions, {\n        room: room,\n        mouse: mouse,\n        position: hoverCell,\n        size: { rows: rows, cells: cells },\n        cellPlugins: cellPlugins,\n        scale: scale,\n    });\n};\n/**\n * Return the mouse position relative to the cell.\n */\nvar relativeMousePosition = function (_a) {\n    var mouse = _a.mouse, position = _a.position, scale = _a.scale;\n    return ({\n        x: Math.round(mouse.x - position.cell * scale.x),\n        y: Math.round(mouse.y - position.row * scale.y),\n    });\n};\n/**\n * Computes the drop level based on the mouse position and the cell width.\n */\nexport var computeLevel = function (_a) {\n    var size = _a.size, _b = _a.level, level = _b === void 0 ? 0 : _b, position = _a.position;\n    if (size <= (level + 1) * 2) {\n        return Math.round(position / (size / level));\n    }\n    var spare = size - (level + 1) * 2;\n    var steps = [0];\n    var current = spare;\n    for (var i = 0; i <= level; i++) {\n        steps.push(steps[i] + current / 2);\n        current /= 2;\n        if (position >= steps[i] + i * 2 && position < steps[i + 1] + (i + 1) * 2) {\n            return i;\n        }\n    }\n    return level;\n};\n/**\n * Computes the horizontal drop level based on the mouse position.\n *\n * @param mouse\n * @param position\n * @param hover\n * @param scale\n * @param level\n * @param inv returns the inverse drop level. Usually true for left and above drop level computation.\n * @returns number\n */\nvar computeHorizontal = function (_a, inv) {\n    var mouse = _a.mouse, position = _a.position, hover = _a.hover, scale = _a.scale, _b = _a.level, level = _b === void 0 ? 0 : _b;\n    if (inv === void 0) { inv = false; }\n    var x = relativeMousePosition({ mouse: mouse, position: position, scale: scale }).x;\n    var at = computeLevel({ size: scale.x, position: x, level: level });\n    if (isRow(hover)) {\n        // Is row, always opt for lowest level\n        return level;\n    }\n    // If the hovered element is an inline element, level 0 would be directly besides it which doesn't work.\n    // Set it to 1 instead.\n    if (hover.inline && at === 0) {\n        at = 1;\n    }\n    return inv ? level - at : at;\n};\n/**\n * Computes the vertical drop level based on the mouse position.\n *\n * @returns number\n */\nvar computeVertical = function (_a, inv) {\n    var _b = _a.level, level = _b === void 0 ? 0 : _b, mouse = _a.mouse, hover = _a.hover, position = _a.position, scale = _a.scale;\n    if (inv === void 0) { inv = false; }\n    var y = relativeMousePosition({ mouse: mouse, position: position, scale: scale }).y;\n    var at = computeLevel({ size: scale.y, position: y, level: level });\n    if (isRow(hover)) {\n        // Is row, always opt for lowest level\n        return level;\n    }\n    // If the hovered element is an inline element, level 0 would be directly besides it which doesn't work.\n    // Set it to 1 instead.\n    if (hover.inline && at === 0) {\n        at = 1;\n    }\n    return inv ? level - at : at;\n};\nvar getDropLevel = function (hover) {\n    return !isRow(hover) && hover.inline ? 1 : 0;\n};\n/**\n * A list of callbacks.\n */\nexport var CALLBACK_LIST = (_a = {},\n    _a[c.NO] = function (item, hover, _a) {\n        var clear = _a.clear;\n        return clear();\n    },\n    /* corners */\n    _a[c.C1] = function (item, hover, _a, ctx) {\n        var leftOf = _a.leftOf, above = _a.above;\n        var mouse = relativeMousePosition(ctx);\n        var level = getDropLevel(hover);\n        if (mouse.x < mouse.y) {\n            return leftOf(item, hover, { level: level });\n        }\n        above(item, hover, { level: level });\n    },\n    _a[c.C2] = function (item, hover, _a, ctx) {\n        var rightOf = _a.rightOf, above = _a.above;\n        var mouse = relativeMousePosition(ctx);\n        var level = getDropLevel(hover);\n        if (mouse.x > mouse.y) {\n            return rightOf(item, hover, { level: level });\n        }\n        above(item, hover, { level: level });\n    },\n    _a[c.C3] = function (item, hover, _a, ctx) {\n        var rightOf = _a.rightOf, below = _a.below;\n        var mouse = relativeMousePosition(ctx);\n        var level = getDropLevel(hover);\n        if (mouse.x > mouse.y) {\n            return rightOf(item, hover, { level: level });\n        }\n        below(item, hover, { level: level });\n    },\n    _a[c.C4] = function (item, hover, _a, ctx) {\n        var leftOf = _a.leftOf, below = _a.below;\n        var mouse = relativeMousePosition(ctx);\n        var level = getDropLevel(hover);\n        if (mouse.x < mouse.y) {\n            return leftOf(item, hover, { level: level });\n        }\n        below(item, hover, { level: level });\n    },\n    /* heres */\n    _a[c.AH] = function (item, hover, _a) {\n        var above = _a.above;\n        var level = getDropLevel(hover);\n        above(item, hover, { level: level });\n    },\n    _a[c.BH] = function (item, hover, _a) {\n        var below = _a.below;\n        var level = getDropLevel(hover);\n        below(item, hover, { level: level });\n    },\n    _a[c.LH] = function (item, hover, _a) {\n        var leftOf = _a.leftOf;\n        var level = getDropLevel(hover);\n        leftOf(item, hover, { level: level });\n    },\n    _a[c.RH] = function (item, hover, _a) {\n        var rightOf = _a.rightOf;\n        var level = getDropLevel(hover);\n        rightOf(item, hover, { level: level });\n    },\n    /* ancestors */\n    _a[c.AA] = function (item, hover, _a, ctx) {\n        var _b;\n        var above = _a.above;\n        return above(item, hover, {\n            level: computeVertical(__assign(__assign({}, ctx), { hover: hover, level: (_b = hover.levels) === null || _b === void 0 ? void 0 : _b.above }), true),\n        });\n    },\n    _a[c.BA] = function (item, hover, _a, ctx) {\n        var _b;\n        var below = _a.below;\n        return below(item, hover, {\n            level: computeVertical(__assign(__assign({}, ctx), { hover: hover, level: (_b = hover.levels) === null || _b === void 0 ? void 0 : _b.below })),\n        });\n    },\n    _a[c.LA] = function (item, hover, _a, ctx) {\n        var _b;\n        var leftOf = _a.leftOf;\n        return leftOf(item, hover, {\n            level: computeHorizontal(__assign(__assign({}, ctx), { hover: hover, level: (_b = hover.levels) === null || _b === void 0 ? void 0 : _b.left }), true),\n        });\n    },\n    _a[c.RA] = function (item, hover, _a, ctx) {\n        var _b;\n        var rightOf = _a.rightOf;\n        return rightOf(item, hover, {\n            level: computeHorizontal(__assign(__assign({}, ctx), { hover: hover, level: (_b = hover.levels) === null || _b === void 0 ? void 0 : _b.right })),\n        });\n    },\n    /* inline */\n    _a[c.IL] = function (item, hover, _a, _b) {\n        var _c;\n        var inlineLeft = _a.inlineLeft, leftOf = _a.leftOf;\n        var cellPlugins = _b.cellPlugins;\n        if (isRow(item) || isRow(hover)) {\n            return;\n        }\n        var inline = hover.inline, hasInlineNeighbour = hover.hasInlineNeighbour;\n        var plugin = cellPlugins.find(function (p) {\n            var _a;\n            return p.id ===\n                (typeof item.plugin === 'string' ? item.plugin : (_a = item.plugin) === null || _a === void 0 ? void 0 : _a.id);\n        });\n        var isInlineable = (_c = plugin === null || plugin === void 0 ? void 0 : plugin.isInlineable) !== null && _c !== void 0 ? _c : false;\n        if (inline || !isInlineable) {\n            return leftOf(item, hover, { level: 2 });\n        }\n        if (hasInlineNeighbour && hasInlineNeighbour !== item.id) {\n            return leftOf(item, hover, { level: 2 });\n        }\n        if (hasInlineNeighbour &&\n            hasInlineNeighbour === item.id &&\n            item.inline === 'left') {\n            return leftOf(item, hover, { level: 2 });\n        }\n        inlineLeft(item, hover);\n    },\n    _a[c.IR] = function (item, hover, _a, _b) {\n        var _c;\n        var inlineRight = _a.inlineRight, rightOf = _a.rightOf;\n        var cellPlugins = _b.cellPlugins;\n        if (isRow(item) || isRow(hover)) {\n            return;\n        }\n        var inline = hover.inline, hasInlineNeighbour = hover.hasInlineNeighbour;\n        var plugin = cellPlugins.find(function (p) {\n            var _a;\n            return p.id ===\n                (typeof item.plugin === 'string' ? item.plugin : (_a = item.plugin) === null || _a === void 0 ? void 0 : _a.id);\n        });\n        var isInlineable = (_c = plugin === null || plugin === void 0 ? void 0 : plugin.isInlineable) !== null && _c !== void 0 ? _c : false;\n        if (inline || !isInlineable) {\n            return rightOf(item, hover, { level: 2 });\n        }\n        if (hasInlineNeighbour && hasInlineNeighbour !== item.id) {\n            return rightOf(item, hover, { level: 2 });\n        }\n        if (hasInlineNeighbour &&\n            hasInlineNeighbour === item.id &&\n            item.inline === 'right') {\n            return rightOf(item, hover, { level: 2 });\n        }\n        inlineRight(item, hover);\n    },\n    _a);\n//# sourceMappingURL=computeHover.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React from 'react';\nimport { useDrop } from 'react-dnd';\nimport { useCellIsAllowedHere, useInsertNew, useIsLayoutMode, useIsPreviewMode, useSetDisplayReferenceNodeId, useSetInsertMode, } from '../hooks';\nvar InsertNew = function (_a) {\n    var parentCellId = _a.parentCellId;\n    var setInsertMode = useSetInsertMode();\n    var insertNew = useInsertNew(parentCellId);\n    var isPreviewMode = useIsPreviewMode();\n    var isLayoutMode = useIsLayoutMode();\n    var setReferenceNodeId = useSetDisplayReferenceNodeId();\n    var checkIfAllowed = useCellIsAllowedHere(parentCellId);\n    var _b = __read(useDrop({\n        accept: 'cell',\n        canDrop: function (item) {\n            return checkIfAllowed(item);\n        },\n        collect: function (monitor) { return ({\n            isOver: monitor.isOver(),\n            isAllowed: checkIfAllowed(monitor.getItem()),\n        }); },\n        drop: function (item, monitor) {\n            // fallback drop\n            if (!monitor.didDrop() && item.cell) {\n                insertNew(item.cell);\n            }\n        },\n    }), 2), _c = _b[0], isOver = _c.isOver, isAllowed = _c.isAllowed, dropRef = _b[1];\n    if (isPreviewMode)\n        return null;\n    return (React.createElement(\"div\", { ref: dropRef, className: 'react-page-cell-insert-new' + (isOver && isAllowed ? ' hover' : ''), style: {\n            pointerEvents: 'all',\n            zIndex: isLayoutMode ? 10 : 1,\n            overflow: 'hidden',\n            width: '50%',\n            minWidth: 120,\n            margin: 'auto',\n            cursor: isOver && !isAllowed ? 'not-allowed' : 'pointer',\n        }, onClick: function (e) {\n            e.stopPropagation();\n            setReferenceNodeId(parentCellId);\n            setInsertMode();\n        } }));\n};\nexport default React.memo(InsertNew);\n//# sourceMappingURL=InsertNew.js.map","import { isProduction } from '../../const';\nexport var delay = isProduction ? 40 : 60;\n//# sourceMappingURL=index.js.map","// tslint:disable:no-console\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar trace = function () {\n    var _a, _b;\n    var e = new Error('dummy');\n    return ((_b = (_a = e.stack) === null || _a === void 0 ? void 0 : _a.replace(/^[^(]+?[\\n$]/gm, '').replace(/^\\s+at\\s+/gm, '').replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@').split('\\n')) !== null && _b !== void 0 ? _b : []);\n};\nvar Logger = /** @class */ (function () {\n    function Logger() {\n    }\n    /**\n     * Logs a warning. Warnings are things that are exceptional, but easily to recover from.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.warn.apply(console, __spreadArray(['Warning:'], __read(args), false));\n    };\n    /**\n     * Logs a debug message. Debug messages are things that help developers debugging things.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.debug = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.log.apply(console, __spreadArray(['Debug:'], __read(args), false));\n    };\n    /**\n     * Logs an info. Infos are things that might be interesting for someone who needs to take a closer look.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.info = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.log.apply(console, __spreadArray(['Info:'], __read(args), false));\n    };\n    /**\n     * Logs an error. Error are things that are exceptional, but can be recovered from.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.error = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.error.apply(console, __spreadArray(['Error:'], __read(args), false));\n        console.error('Trace:', trace());\n    };\n    /**\n     * Logs a fatal error. Fatal errors are things that are exceptional and can not be recovered from.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.fatal = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.error.apply(console, __spreadArray(['Fatal:'], __read(args), false));\n        console.error('Trace:', trace());\n        throw new Error(args.join(' '));\n    };\n    /**\n     * Logs a message.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.log = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.log.apply(console, __spreadArray(['Fatal:'], __read(args), false));\n        console.log('Trace:', trace());\n    };\n    return Logger;\n}());\nexport { Logger };\nvar instance = new Logger();\nexport default instance;\n//# sourceMappingURL=index.js.map","import { computeHover } from './computeHover';\nvar computeCurrentDropPosition = function (actions, hover, drag, monitor, element, cellPlugins) {\n    var mousePosition = monitor.getClientOffset();\n    var componentPosition = element.getBoundingClientRect();\n    var room = {\n        height: componentPosition.bottom - componentPosition.top,\n        width: componentPosition.right - componentPosition.left,\n    };\n    if (!mousePosition) {\n        return;\n    }\n    var mouse = {\n        y: mousePosition.y - componentPosition.top,\n        x: mousePosition.x - componentPosition.left,\n    };\n    computeHover(drag, hover, actions, {\n        room: room,\n        mouse: mouse,\n        cellPlugins: cellPlugins,\n    });\n};\nexport var computeAndDispatchInsert = function (hover, drag, monitor, element, actions, cellPlugins) {\n    return computeCurrentDropPosition(actions, hover, drag, monitor, element, cellPlugins);\n};\nexport var computeAndDispatchHover = function (hover, drag, monitor, element, actions, cellPlugins) {\n    return computeCurrentDropPosition(actions, hover, drag, monitor, element, cellPlugins);\n};\n//# sourceMappingURL=input.js.map","import throttle from 'lodash.throttle';\nimport { delay } from '../../../../helper/throttle';\nimport { computeAndDispatchHover, computeAndDispatchInsert, } from '../../../../service/hover/input';\nimport logger from '../../../../service/logger';\nvar last = { hoverId: '', dragId: '' };\nvar shouldClear = function (hoverId, dragId) {\n    if (hoverId === last.hoverId && dragId === last.dragId) {\n        return false;\n    }\n    last = { hoverId: hoverId, dragId: dragId };\n    return true;\n};\nexport var onHover = throttle(function (target, monitor, element, actions, cellPlugins) {\n    var _a;\n    var drag = monitor.getItem();\n    if (!(drag === null || drag === void 0 ? void 0 : drag.cell) || !target) {\n        // item undefined, happens when throttle triggers after drop\n        return;\n    }\n    if (drag.cell.id === target.id) {\n        // If hovering over itself, do nothing\n        if (shouldClear(target.id, drag.cell.id)) {\n            actions.clear();\n        }\n        return;\n    }\n    else if (!monitor.isOver({ shallow: true })) {\n        // If hovering over ancestor cell, do nothing (we are going to propagate later in the tree anyways)\n        return;\n    }\n    else if (drag.cell.id && ((_a = target.ancestorIds) === null || _a === void 0 ? void 0 : _a.includes(drag.cell.id))) {\n        if (shouldClear(target.id, drag.cell.id)) {\n            actions.clear();\n        }\n        return;\n    }\n    else if (!target.id) {\n        // If hovering over something that isn't a cell or hasn't an id, do nothing. Should be an edge case\n        logger.warn('Canceled cell drop, no id given.', target, drag);\n        return;\n    }\n    last = { hoverId: target.id, dragId: drag.cell.id };\n    computeAndDispatchHover(target, drag.cell, monitor, element, actions, cellPlugins);\n}, delay, { leading: false });\nexport var onDrop = function (target, monitor, element, actions, cellPlugins) {\n    var _a;\n    var drag = monitor.getItem();\n    if (!drag.cell)\n        return;\n    if (monitor.didDrop() || !monitor.isOver({ shallow: true }) || !target) {\n        // If the item drop occurred deeper down the tree, don't do anything\n        return;\n    }\n    else if (drag.cell.id === target.id) {\n        // If the item being dropped on itself do nothing\n        actions.cancelCellDrag();\n        return;\n    }\n    else if (target &&\n        drag.cell.id &&\n        ((_a = target.ancestorIds) === null || _a === void 0 ? void 0 : _a.includes(drag.cell.id))) {\n        // If hovering over a child of itself, don't propagate further\n        actions.cancelCellDrag();\n        return;\n    }\n    last = { hoverId: target.id, dragId: drag.cell.id };\n    computeAndDispatchInsert(target, drag.cell, monitor, element, actions, cellPlugins);\n};\n//# sourceMappingURL=dnd.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport classNames from 'classnames';\nimport React, { useCallback, useEffect } from 'react';\nimport { useDrop } from 'react-dnd';\nimport { useSelector } from '../../../reduxConnect';\nimport { useNodeAsHoverTarget, useCellHasPlugin, useCellIsAllowedHere, useCellSpacing, useDropActions, useHoverActions, useIsInsertMode, useIsLayoutMode, useNodeHoverPosition, usePluginOfCell, useOption, useAllCellPluginsForNode, } from '../../hooks';\nimport { onDrop, onHover } from './helper/dnd';\nexport var useCellDrop = function (nodeId) {\n    var _a;\n    var ref = React.useRef();\n    var hoverTarget = useNodeAsHoverTarget(nodeId);\n    var targetParentNodeId = (_a = hoverTarget === null || hoverTarget === void 0 ? void 0 : hoverTarget.ancestorIds) === null || _a === void 0 ? void 0 : _a[0];\n    var checkIfAllowed = useCellIsAllowedHere(targetParentNodeId);\n    var plugin = usePluginOfCell(nodeId);\n    var cellPlugins = useAllCellPluginsForNode(targetParentNodeId);\n    var hoverActions = useHoverActions();\n    var dropActions = useDropActions(targetParentNodeId);\n    var isHoveringOverThis = useSelector(function (state) { var _a; return ((_a = state.reactPage.hover) === null || _a === void 0 ? void 0 : _a.nodeId) === nodeId; });\n    var _b = __read(useDrop({\n        accept: 'cell',\n        canDrop: function (item) {\n            var _a;\n            if (!item.cell) {\n                return false;\n            }\n            // check if plugin is allowed here\n            if (!checkIfAllowed(item)) {\n                return false;\n            }\n            if (plugin === null || plugin === void 0 ? void 0 : plugin.allowNeighbour) {\n                if (!plugin.allowNeighbour(item.cell)) {\n                    return false;\n                }\n            }\n            return (item.cell.id !== nodeId &&\n                !(item.cell.id && ((_a = hoverTarget === null || hoverTarget === void 0 ? void 0 : hoverTarget.ancestorIds) === null || _a === void 0 ? void 0 : _a.includes(item.cell.id))));\n        },\n        collect: function (monitor) { return ({\n            isOver: monitor.isOver(),\n            isAllowed: checkIfAllowed(monitor.getItem()),\n        }); },\n        hover: function (item, monitor) {\n            if (!item.cell || !hoverTarget || !ref.current) {\n                return false;\n            }\n            if (plugin === null || plugin === void 0 ? void 0 : plugin.allowNeighbour) {\n                if (!plugin.allowNeighbour(item.cell)) {\n                    return false;\n                }\n            }\n            onHover(hoverTarget, monitor, ref.current, hoverActions, cellPlugins);\n        },\n        drop: function (item, monitor) {\n            if (!hoverTarget || !ref.current) {\n                return;\n            }\n            onDrop(hoverTarget, monitor, ref.current, dropActions, cellPlugins);\n        },\n    }), 2), _c = _b[0], isOver = _c.isOver, isAllowed = _c.isAllowed, dropRef = _b[1];\n    useEffect(function () {\n        if (!isOver && isHoveringOverThis) {\n            hoverActions.clear();\n        }\n    }, [isOver, isHoveringOverThis, hoverActions.clear]);\n    // see https://github.com/react-dnd/react-dnd/issues/1955\n    var attach = useCallback(function (domElement) {\n        dropRef(domElement);\n        ref.current = domElement;\n        // use dom element here for measuring\n    }, [dropRef]);\n    return [attach, isAllowed];\n};\nvar Droppable = function (props) {\n    var _a;\n    var _b;\n    var isLayoutMode = useIsLayoutMode();\n    var isInsertMode = useIsInsertMode();\n    var _c = __read(useCellDrop(props.nodeId), 2), attach = _c[0], isAllowed = _c[1];\n    var hoverPosition = useNodeHoverPosition(props.nodeId);\n    var allowMoveInEditMode = useOption('allowMoveInEditMode');\n    var hasPlugin = useCellHasPlugin(props.nodeId);\n    var cellSpacingY = ((_b = useCellSpacing()) !== null && _b !== void 0 ? _b : { y: 0 }).y;\n    var needVerticalMargin = !props.isLeaf && !hasPlugin;\n    if (!(isLayoutMode || isInsertMode) && !allowMoveInEditMode) {\n        return (React.createElement(\"div\", { className: 'react-page-cell-droppable-container' }, props.children));\n    }\n    return (React.createElement(\"div\", { ref: attach, style: {\n            height: '100%',\n        }, className: \"react-page-cell-droppable\" },\n        React.createElement(\"div\", { style: {\n                position: 'absolute',\n                pointerEvents: 'none',\n                top: needVerticalMargin ? \"\".concat(cellSpacingY / 2, \"px\") : 0,\n                left: 0,\n                bottom: needVerticalMargin ? \"\".concat(cellSpacingY / 2, \"px\") : 0,\n                right: 0,\n            }, className: classNames((_a = {\n                    'react-page-cell-droppable-not-allowed': !isAllowed,\n                    'react-page-cell-droppable-is-over-current': isAllowed && hoverPosition\n                },\n                _a[\"react-page-cell-droppable-is-over-\".concat(hoverPosition)] = isAllowed && hoverPosition,\n                _a['react-page-cell-droppable-leaf'] = props.isLeaf,\n                _a)) }),\n        props.children));\n};\nexport default Droppable;\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React from 'react';\nimport { useCellDrop } from '../../Cell/Droppable';\nimport { useIsInsertMode, useIsLayoutMode } from '../../hooks';\nvar Droppable = function (_a) {\n    var children = _a.children, nodeId = _a.nodeId;\n    var isLayoutMode = useIsLayoutMode();\n    var isInsertMode = useIsInsertMode();\n    var _b = __read(useCellDrop(nodeId), 2), ref = _b[0], isAllowed = _b[1];\n    if (!(isLayoutMode || isInsertMode)) {\n        return React.createElement(\"div\", { className: \"react-page-row-droppable-container\" }, children);\n    }\n    return (React.createElement(\"div\", { ref: ref, className: \"react-page-row-droppable\" }, children));\n};\nexport default Droppable;\n//# sourceMappingURL=index.js.map","import React from 'react';\nimport { useIsEditMode, useRemoveCell, useUiTranslator } from '../../hooks';\nvar ErrorCell = function (_a) {\n    var nodeId = _a.nodeId, error = _a.error;\n    var isEditMode = useIsEditMode();\n    var removeCell = useRemoveCell(nodeId);\n    var t = useUiTranslator().t;\n    return (React.createElement(\"div\", { className: \"react-page-cell-error\" },\n        React.createElement(\"strong\", null, t('An error occurred!')),\n        React.createElement(\"small\", null,\n            React.createElement(\"dl\", null,\n                React.createElement(\"dt\", null, t('Cause:')),\n                React.createElement(\"dd\", null, error.message),\n                React.createElement(\"dt\", null, t('Cell:')),\n                React.createElement(\"dd\", null, nodeId))),\n        isEditMode ? (React.createElement(\"button\", { onClick: function () { return removeCell(); } }, t('Remove'))) : null));\n};\nexport default ErrorCell;\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { useDrag, DragPreviewImage } from 'react-dnd';\nimport { useCell, useHoverActions } from '../../hooks';\nimport React from 'react';\nexport var dragIcon = \n// tslint:disable-next-line:max-line-length\n'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAhCAYAAACbffiEAAAA6UlEQVRYhe2ZQQ6CMBBFX0njHg7ESXTp1p3uvIBewc3Em3AfdelSFwRDCAm01JRO+pa0lP8zzc9kMCKyAa7AFqhIixdwB44WuACHuHq8KWm1vwtgF1lMCPaWkevUNE3Qr9R17XTu1P5uvUdV+IpbG2qMGBH5xBYRAjUVUWPEjj10SS3XRFry3kha/VBTETVGcmqtDTVGFqdWn7k9ku96f88QNRVRYySn1tpQY8QptXz7qinmnpt7rZTIqbU21BgJ2mv1+XfCDVFTETVGjIg8SG8KP+RZ0I7lU+dmgRNgaKfyZVw9znT/R85fOHJJE77U6UcAAAAASUVORK5CYII=';\nexport var useDragHandle = function (nodeId, enabled) {\n    if (enabled === void 0) { enabled = true; }\n    var actions = useHoverActions();\n    var cell = useCell(nodeId);\n    var _a = __read(useDrag({\n        canDrag: enabled,\n        item: function () {\n            actions.dragCell(nodeId);\n            return { cell: cell };\n        },\n        type: 'cell',\n        collect: function (monitor) { return ({\n            isDragging: monitor.isDragging(),\n        }); },\n        end: function (item, monitor) {\n            if (monitor.didDrop()) {\n                // If the item drop occurred deeper down the tree, don't do anything\n                return;\n            }\n            // If drag ended but drop did not occur, cancel dragging\n            actions.cancelCellDrag();\n        },\n    }), 3), isDragging = _a[0].isDragging, dragRef = _a[1], preview = _a[2];\n    var previewElement = React.createElement(DragPreviewImage, { connect: preview, src: dragIcon });\n    return [isDragging, dragRef, previewElement];\n};\n//# sourceMappingURL=useDragHandle.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useFocusCell, useIsLayoutMode, useOption, usePluginOfCell, useUiTranslator, } from '../../hooks';\nimport { useDragHandle } from '../Draggable/useDragHandle';\nvar Handle = function (_a) {\n    var nodeId = _a.nodeId;\n    var allowMoveInEditMode = useOption('allowMoveInEditMode');\n    var isLayoutMode = useIsLayoutMode();\n    var dragEnabled = allowMoveInEditMode || isLayoutMode;\n    var _b = __read(useDragHandle(nodeId, dragEnabled), 3), isDragging = _b[0], dragRef = _b[1], previewElement = _b[2];\n    var focus = useFocusCell(nodeId);\n    var plugin = usePluginOfCell(nodeId);\n    var t = useUiTranslator().t;\n    if (!plugin) {\n        return null;\n    }\n    return (React.createElement(React.Fragment, null,\n        previewElement,\n        React.createElement(\"div\", { className: classNames('react-page-cell-handle', {\n                'react-page-cell-handle-drag-enabled': dragEnabled,\n                'react-page-cell-handle-is-dragging': isDragging,\n            }), ref: dragRef, onClick: function (e) {\n                var mode = e.metaKey || e.ctrlKey ? 'add' : 'replace';\n                focus(false, mode);\n            } }, t((plugin === null || plugin === void 0 ? void 0 : plugin.title) || (plugin === null || plugin === void 0 ? void 0 : plugin.text)))));\n};\nexport default React.memo(Handle);\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useCell, useFocusCell, useIsLayoutMode, useOption } from '../../hooks';\nimport { useDragHandle } from './useDragHandle';\nvar DefaultSmallHandle = function (_a) {\n    var onClick = _a.onClick;\n    return (React.createElement(\"div\", { className: \"react-page-cell-draggable-overlay-handle\", onClick: onClick },\n        React.createElement(\"div\", { className: \"react-page-cell-draggable-overlay-handle-icon\" })));\n};\nvar Draggable = function (_a) {\n    var _b;\n    var _c;\n    var isLeaf = _a.isLeaf, children = _a.children, nodeId = _a.nodeId;\n    var cell = useCell(nodeId);\n    var _d = __read(useDragHandle(nodeId), 3), isDragging = _d[0], dragRef = _d[1], previewElement = _d[2];\n    var focus = useFocusCell(nodeId);\n    var isLayoutMode = useIsLayoutMode();\n    var allowMoveInEditMode = useOption('allowMoveInEditMode');\n    var components = useOption('components');\n    var ResizeHandle = (_c = components === null || components === void 0 ? void 0 : components.EditModeResizeHandle) !== null && _c !== void 0 ? _c : DefaultSmallHandle;\n    return (React.createElement(React.Fragment, null,\n        previewElement,\n        React.createElement(\"div\", { ref: isLayoutMode ? dragRef : undefined, style: {\n                height: '100%',\n            }, className: classNames({\n                'react-page-cell-draggable-in-edit': !isLayoutMode && allowMoveInEditMode,\n                'react-page-cell-draggable': isLayoutMode,\n                'react-page-cell-draggable-is-dragging': isDragging,\n            }) },\n            isLayoutMode ? (React.createElement(\"div\", { onClick: function (e) {\n                    var mode = e.metaKey || e.ctrlKey ? 'add' : 'replace';\n                    focus(false, mode);\n                }, className: classNames((_b = {\n                        'react-page-cell-draggable-overlay': isLayoutMode\n                    },\n                    _b[\"react-page-cell-draggable-inline-\".concat(cell === null || cell === void 0 ? void 0 : cell.inline)] = cell === null || cell === void 0 ? void 0 : cell.inline,\n                    _b['react-page-cell-draggable-leaf'] = isLeaf,\n                    _b)) })) : allowMoveInEditMode ? (React.createElement(\"div\", { ref: dragRef },\n                React.createElement(ResizeHandle, { onClick: focus }))) : null,\n            children)));\n};\nexport default Draggable;\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { Tab, Tabs } from '@mui/material';\nimport React, { useState } from 'react';\nimport { AutoformControls } from '../../../../ui';\nvar ControlsList = React.memo(function (_a) {\n    var _b;\n    var controls = _a.controls, componentProps = _a.componentProps;\n    var _c = __read(useState(0), 2), tab = _c[0], setTab = _c[1];\n    var activeControls = (_b = controls[tab]) === null || _b === void 0 ? void 0 : _b.controls;\n    return (React.createElement(\"div\", { style: {\n            display: 'flex',\n            flexDirection: 'row',\n        } },\n        React.createElement(Tabs, { sx: {\n                marginTop: '-12px',\n                marginBottom: '-12px',\n                marginLeft: '-24px',\n                alignItems: 'flex-start',\n                backgroundColor: function (theme) { return theme.palette.background.default; },\n            }, value: tab, onChange: function (e, v) { return setTab(v); }, orientation: \"vertical\", variant: \"scrollable\" }, controls.map(function (t, index) { return (React.createElement(Tab, { sx: {\n                alignItems: 'flex-start',\n            }, label: t.title, key: index })); })),\n        activeControls ? (React.createElement(\"div\", { style: {\n                flex: 1,\n                marginLeft: 24,\n                display: 'flex',\n            } },\n            React.createElement(Controls, { controls: activeControls, componentProps: componentProps }))) : null));\n});\nvar Controls = React.memo(function (_a) {\n    var controls = _a.controls, componentProps = _a.componentProps;\n    var pluginControls = null;\n    if (Array.isArray(controls)) {\n        return React.createElement(ControlsList, { componentProps: componentProps, controls: controls });\n    }\n    if ((controls === null || controls === void 0 ? void 0 : controls.type) === 'custom') {\n        var Component = controls.Component;\n        pluginControls = React.createElement(Component, __assign({}, componentProps, controls));\n    }\n    else if ((controls === null || controls === void 0 ? void 0 : controls.type) === 'autoform') {\n        pluginControls = React.createElement(AutoformControls, __assign({}, componentProps, controls));\n    }\n    return React.createElement(\"div\", { style: { overflow: 'auto', flex: 1 } }, pluginControls);\n});\nvar PluginControls = function (_a) {\n    var controls = _a.controls, componentProps = _a.componentProps;\n    return (React.createElement(\"div\", { style: {\n            maxHeight: '50vh',\n            // if it has tabs, stretch to avoid jumping tabs\n            width: Array.isArray(controls) ? '100vw' : undefined,\n            maxWidth: '100%',\n            display: 'flex',\n        } },\n        React.createElement(Controls, { controls: controls, componentProps: componentProps })));\n};\nexport default React.memo(PluginControls);\n//# sourceMappingURL=index.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nvar PluginMissing = function (_a) {\n    var children = _a.children, props = __rest(_a, [\"children\"]);\n    return (React.createElement(\"div\", null,\n        React.createElement(\"div\", { style: {\n                backgroundColor: 'red',\n                padding: '8px',\n                border: '1px solid black',\n                margin: '2px',\n                overflowX: 'scroll',\n            } },\n            \"The requested plugin `\",\n            props.pluginId,\n            \"` could not be found.\",\n            React.createElement(\"button\", { onClick: props.remove }, \"Delete Plugin\"),\n            React.createElement(\"pre\", null, JSON.stringify(props, null, 2))),\n        children));\n};\nexport default PluginMissing;\n//# sourceMappingURL=PluginMissing.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React, { useMemo } from 'react';\nimport { BottomToolbar } from '../../../../ui';\nimport { usePluginOfCell, useDebouncedCellData, useIsEditMode, useIsPreviewMode, useLang, useRemoveCell, useCellProps, useOption, useIsExclusivlyFocused, } from '../../hooks';\nimport PluginControls from '../PluginControls';\nimport PluginMissing from '../PluginMissing';\nimport NoopProvider from '../NoopProvider';\nvar PluginComponent = function (_a) {\n    var _b, _c;\n    var nodeId = _a.nodeId, children = _a.children, hasChildren = _a.hasChildren;\n    var lang = useLang();\n    var components = useOption('components');\n    var CustomPluginMissing = components === null || components === void 0 ? void 0 : components.CellPluginMissing;\n    var isPreviewMode = useIsPreviewMode();\n    var isEditMode = useIsEditMode();\n    var _d = __read(useDebouncedCellData(nodeId), 2), data = _d[0], onChange = _d[1];\n    var pluginId = useCellProps(nodeId, function (c) { var _a; return (_a = c === null || c === void 0 ? void 0 : c.plugin) === null || _a === void 0 ? void 0 : _a.id; });\n    var plugin = usePluginOfCell(nodeId);\n    var focused = useIsExclusivlyFocused(nodeId);\n    var hasInlineNeighbour = useCellProps(nodeId, function (c) { return c === null || c === void 0 ? void 0 : c.hasInlineNeighbour; });\n    var Renderer = plugin === null || plugin === void 0 ? void 0 : plugin.Renderer;\n    var Missing = CustomPluginMissing !== null && CustomPluginMissing !== void 0 ? CustomPluginMissing : PluginMissing;\n    var Provider = (_b = plugin === null || plugin === void 0 ? void 0 : plugin.Provider) !== null && _b !== void 0 ? _b : NoopProvider;\n    var remove = useRemoveCell(nodeId);\n    var Toolbar = (_c = components === null || components === void 0 ? void 0 : components.BottomToolbar) !== null && _c !== void 0 ? _c : BottomToolbar;\n    var componentProps = useMemo(function () { return ({\n        nodeId: nodeId,\n        lang: lang,\n        data: data,\n        pluginConfig: plugin,\n        focused: isEditMode && focused,\n        readOnly: !isEditMode,\n        onChange: onChange,\n        isEditMode: isEditMode,\n        isPreviewMode: isPreviewMode,\n        remove: remove,\n    }); }, [\n        nodeId,\n        lang,\n        data,\n        plugin,\n        isEditMode,\n        focused,\n        onChange,\n        isEditMode,\n        isPreviewMode,\n        remove,\n    ]);\n    // In case of non-zero cell spacing, nested layouts (layout plugins with children) should have their\n    // margin collapsing functionality off. The simplest solution is to use display:flex for the below wrapping <div>.\n    // This however is not compatible with inline elements flotation, so if a cell has inline neighbors, we are going\n    // to have to keep display:block style. Layout plugins with inline cell support will have to take care of\n    // margin collapsing internally on their own.\n    var display = hasInlineNeighbour\n        ? {}\n        : {\n            display: 'flex',\n            flexDirection: 'column',\n        };\n    return (React.createElement(Provider, __assign({}, componentProps),\n        React.createElement(React.Fragment, null,\n            React.createElement(\"div\", { style: __assign(__assign({}, display), { height: '100%', pointerEvents: !isPreviewMode &&\n                        plugin &&\n                        !(plugin === null || plugin === void 0 ? void 0 : plugin.allowClickInside) &&\n                        !hasChildren\n                        ? 'none'\n                        : undefined }) }, Renderer ? (React.createElement(Renderer, __assign({}, componentProps), children)) : pluginId ? (React.createElement(Missing, __assign({}, componentProps, { pluginId: pluginId }))) : (children)),\n            React.createElement(Toolbar, { nodeId: nodeId, open: focused, pluginControls: isEditMode && (plugin === null || plugin === void 0 ? void 0 : plugin.controls) ? (React.createElement(PluginControls, { componentProps: componentProps, controls: plugin === null || plugin === void 0 ? void 0 : plugin.controls })) : null }))));\n};\nexport default PluginComponent;\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React from 'react';\nimport { getPluginCellSpacing, normalizeCellSpacing, } from '../../../utils/getCellSpacing';\nimport { useCellData, useCellHasPlugin, useCellInnerDivStylingProps, useCellSpacing, useCellSpacingProvider, useFocusCell, useIsEditMode, useIsFocused, useIsPreviewMode, useNodeChildrenIds, useOption, usePluginOfCell, useSetEditMode, } from '../../hooks';\nimport Row from '../../Row';\nimport Draggable from '../Draggable';\nimport Droppable from '../Droppable';\nimport InsertNew from '../InsertNew';\nimport PluginComponent from '../PluginComponent';\nvar Inner = function (_a) {\n    var _b, _c, _d, _e, _f, _g;\n    var nodeId = _a.nodeId;\n    var isPreviewMode = useIsPreviewMode();\n    var isEditMode = useIsEditMode();\n    var cellShouldHavePlugin = useCellHasPlugin(nodeId);\n    var plugin = usePluginOfCell(nodeId);\n    var setEditMode = useSetEditMode();\n    var focus = useFocusCell(nodeId);\n    var focused = useIsFocused(nodeId);\n    var childrenIds = useNodeChildrenIds(nodeId);\n    var cellSpacing = useCellSpacing();\n    var ref = React.useRef(null);\n    var hasChildren = childrenIds.length > 0;\n    var data = useCellData(nodeId);\n    var pluginCellSpacing = getPluginCellSpacing(plugin, data);\n    var _h = __read(useCellSpacingProvider(pluginCellSpacing), 2), Provider = _h[0], providerValue = _h[1];\n    var cellSpacingY = 0;\n    if (typeof pluginCellSpacing !== 'undefined' && pluginCellSpacing != null) {\n        cellSpacingY = (_c = (_b = normalizeCellSpacing(pluginCellSpacing)) === null || _b === void 0 ? void 0 : _b.y) !== null && _c !== void 0 ? _c : 0;\n    }\n    else {\n        cellSpacingY = (_d = cellSpacing === null || cellSpacing === void 0 ? void 0 : cellSpacing.y) !== null && _d !== void 0 ? _d : 0;\n    }\n    var onClick = React.useCallback(function (e) {\n        var _a, _b;\n        var target = e.target;\n        // check whether the click was inside cell-inner, but not inside a nested cell\n        if (!focused &&\n            isEditMode &&\n            // this arrives when they stop resizing\n            !((_a = target.classList) === null || _a === void 0 ? void 0 : _a.contains('react-page-row')) &&\n            (target === null || target === void 0 ? void 0 : target.closest) &&\n            target.closest('.react-page-cell-inner') === ref.current &&\n            target.closest('.react-page-cell.react-page-cell-has-plugin') ===\n                ((_b = ref.current) === null || _b === void 0 ? void 0 : _b.closest('.react-page-cell'))) {\n            var mode = e.metaKey || e.ctrlKey ? 'add' : 'replace';\n            focus(false, mode);\n            setEditMode();\n        }\n    }, [focus, focused, isEditMode, setEditMode]);\n    var insertAllowed = ((_e = plugin === null || plugin === void 0 ? void 0 : plugin.childConstraints) === null || _e === void 0 ? void 0 : _e.maxChildren)\n        ? ((_f = plugin === null || plugin === void 0 ? void 0 : plugin.childConstraints) === null || _f === void 0 ? void 0 : _f.maxChildren) > childrenIds.length\n        : true;\n    var innerDivProps = useCellInnerDivStylingProps(nodeId);\n    var children = childrenIds.map(function (id) { return React.createElement(Row, { nodeId: id, key: id }); });\n    var components = useOption('components');\n    var InsertNewWithDefault = (_g = components === null || components === void 0 ? void 0 : components.InsertNew) !== null && _g !== void 0 ? _g : InsertNew;\n    if (!cellShouldHavePlugin) {\n        return React.createElement(Droppable, { nodeId: nodeId }, children);\n    }\n    return (React.createElement(Droppable, { nodeId: nodeId, isLeaf: !hasChildren },\n        React.createElement(Draggable, { nodeId: nodeId, isLeaf: !hasChildren },\n            React.createElement(\"div\", __assign({ onClick: !isPreviewMode ? onClick : undefined, tabIndex: -1, ref: ref }, innerDivProps),\n                React.createElement(PluginComponent, { nodeId: nodeId, hasChildren: hasChildren },\n                    hasChildren ? (React.createElement(Provider, { value: providerValue },\n                        React.createElement(\"div\", { style: cellSpacingY !== 0\n                                ? { margin: \"\".concat(-cellSpacingY / 2, \"px 0\") }\n                                : undefined }, children))) : (children),\n                    insertAllowed ? (React.createElement(InsertNewWithDefault, { parentCellId: nodeId, childrenIds: childrenIds })) : null)))));\n};\nexport default React.memo(Inner);\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React from 'react';\nimport { MoveDown, MoveLeft, MoveRight, MoveUp, } from '../../../../ui/moveButtons';\nvar baseStyle = {\n    position: 'absolute',\n    margin: 0,\n};\nvar MARGIN = 10;\nvar MoveActions = function (_a) {\n    var nodeId = _a.nodeId;\n    return (React.createElement(\"div\", { className: \"react-page-cell-move-actions\", style: __assign({ left: 0, right: 0, bottom: 0, top: 0, zIndex: 100, pointerEvents: 'none' }, baseStyle) },\n        React.createElement(MoveUp, { nodeId: nodeId, style: __assign(__assign({}, baseStyle), { top: MARGIN, left: '50%', transform: 'translateX(-50%)' }) }),\n        React.createElement(MoveLeft, { nodeId: nodeId, style: __assign(__assign({}, baseStyle), { left: MARGIN, top: '50%', transform: 'translateY(-50%)' }) }),\n        React.createElement(MoveRight, { nodeId: nodeId, style: __assign(__assign({}, baseStyle), { right: MARGIN, top: '50%', transform: 'translateY(-50%)' }) }),\n        React.createElement(MoveDown, { nodeId: nodeId, style: __assign(__assign({}, baseStyle), { bottom: MARGIN, left: '50%', transform: 'translateX(-50%)' }) })));\n};\nexport default MoveActions;\n//# sourceMappingURL=index.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport classNames from 'classnames';\nimport React, { useCallback } from 'react';\nimport { getCellOuterDivClassName } from '../../utils/getCellStylingProps';\nimport { useAllFocusedNodeIds, useCellHasPlugin, useCellProps, useCellSpacing, useIsFocused, useIsInsertMode, useIsLayoutMode, useIsPreviewMode, useIsResizeMode, useLang, useNodeHasChildren, useOption, useScrollToViewEffect, useSetDisplayReferenceNodeId, } from '../hooks';\nimport ErrorCell from './ErrorCell';\nimport Handle from './Handle';\nimport Inner from './Inner';\nimport MoveActions from './MoveActions';\nimport scrollIntoViewWithOffset from './utils/scrollIntoViewWithOffset';\nvar CellErrorGate = /** @class */ (function (_super) {\n    __extends(class_1, _super);\n    function class_1() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            error: null,\n        };\n        return _this;\n    }\n    class_1.prototype.componentDidCatch = function (error) {\n        this.setState({ error: error });\n    };\n    class_1.prototype.render = function () {\n        if (this.state.error) {\n            return React.createElement(ErrorCell, { nodeId: this.props.nodeId, error: this.state.error });\n        }\n        return this.props.children;\n    };\n    return class_1;\n}(React.Component));\nvar Cell = function (_a) {\n    var _b;\n    var nodeId = _a.nodeId, measureRef = _a.measureRef;\n    var focused = useIsFocused(nodeId);\n    var _c = useCellProps(nodeId, function (node) {\n        var _a;\n        return {\n            inline: node === null || node === void 0 ? void 0 : node.inline,\n            hasInlineNeighbour: node === null || node === void 0 ? void 0 : node.hasInlineNeighbour,\n            isDraft: node === null || node === void 0 ? void 0 : node.isDraft,\n            isDraftI18n: node === null || node === void 0 ? void 0 : node.isDraftI18n,\n            size: (_a = node === null || node === void 0 ? void 0 : node.size) !== null && _a !== void 0 ? _a : 12,\n        };\n    }), inline = _c.inline, hasInlineNeighbour = _c.hasInlineNeighbour, isDraft = _c.isDraft, isDraftI18n = _c.isDraftI18n, size = _c.size;\n    var lang = useLang();\n    var isPreviewMode = useIsPreviewMode();\n    var isResizeMode = useIsResizeMode();\n    var isLayoutMode = useIsLayoutMode();\n    var isInsertMode = useIsInsertMode();\n    var multiNodesSelected = useAllFocusedNodeIds().length > 1;\n    var hasChildren = useNodeHasChildren(nodeId);\n    var showMoveButtons = useOption('showMoveButtonsInLayoutMode');\n    var hasPlugin = useCellHasPlugin(nodeId);\n    var cellSpacing = useCellSpacing();\n    var needVerticalPadding = !hasChildren || hasPlugin;\n    var isDraftInLang = (_b = isDraftI18n === null || isDraftI18n === void 0 ? void 0 : isDraftI18n[lang]) !== null && _b !== void 0 ? _b : isDraft;\n    var ref = React.useRef(null);\n    var setReferenceNodeId = useSetDisplayReferenceNodeId();\n    var onClick = useCallback(function (e) {\n        if (isInsertMode) {\n            e.stopPropagation();\n            setReferenceNodeId(nodeId);\n        }\n    }, [nodeId, isInsertMode, setReferenceNodeId]);\n    useScrollToViewEffect(nodeId, function () {\n        if (ref.current)\n            scrollIntoViewWithOffset(ref.current, 120); // 120 is just a sane default, we might make int configurable in the future\n    }, [ref.current]);\n    if (isDraftInLang && isPreviewMode) {\n        return null;\n    }\n    var cellOuterStlye = cellSpacing && (cellSpacing.y !== 0 || cellSpacing.x !== 0)\n        ? {\n            padding: \"\".concat(needVerticalPadding ? cellSpacing.y / 2 : 0, \"px \").concat(cellSpacing.x / 2, \"px\"),\n        }\n        : undefined;\n    return (React.createElement(\"div\", { style: cellOuterStlye, ref: ref, className: getCellOuterDivClassName({\n            hasChildren: hasChildren,\n            hasInlineNeighbour: hasInlineNeighbour,\n            size: size,\n            inline: inline,\n        }) +\n            ' ' +\n            classNames({\n                'react-page-cell-has-plugin': hasPlugin,\n                'react-page-cell-focused': focused,\n                'react-page-cell-is-draft': isDraftInLang,\n                'react-page-cell-bring-to-front': !isResizeMode && !isLayoutMode && inline, // inline must not be active for resize/layout\n            }), onClick: onClick },\n        React.createElement(Handle, { nodeId: nodeId }),\n        showMoveButtons &&\n            isLayoutMode &&\n            !hasChildren &&\n            !multiNodesSelected ? (React.createElement(MoveActions, { nodeId: nodeId })) : null,\n        React.createElement(\"div\", { \n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            ref: measureRef, style: {\n                height: '100%',\n                boxSizing: 'border-box',\n            } },\n            React.createElement(CellErrorGate, { nodeId: nodeId },\n                React.createElement(Inner, { nodeId: nodeId })))));\n};\nexport default React.memo(Cell);\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React from 'react';\nimport Draggable from 'react-draggable';\nimport { useMeasure } from 'react-use';\nimport Cell from '../Cell';\nimport { useIsEditMode, useIsPreviewMode, useIsResizeMode, useResizeCell, useCellSpacing, useOption, } from '../hooks';\nvar ResizableRowCell = function (_a) {\n    var _b;\n    var nodeId = _a.nodeId, rowWidth = _a.rowWidth, rowHasInlineChildrenPosition = _a.rowHasInlineChildrenPosition, isLast = _a.isLast, offset = _a.offset, size = _a.size, maxSize = _a.maxSize;\n    var stepWidth = rowWidth / 12; // we're going to keep it a real number to preserve some precision\n    var allowResizeInEditMode = useOption('allowResizeInEditMode');\n    var isResizeMode = useIsResizeMode();\n    var isEditMode = useIsEditMode();\n    var isPreviewMode = useIsPreviewMode();\n    var resize = useResizeCell(nodeId);\n    var _c = __read(useMeasure(), 2), ref = _c[0], cellHeight = _c[1].height;\n    var cellSpacingY = ((_b = useCellSpacing()) !== null && _b !== void 0 ? _b : { y: 0 }).y;\n    var showResizeHandle = !isPreviewMode &&\n        !isLast &&\n        (isResizeMode || (allowResizeInEditMode && isEditMode));\n    return (React.createElement(React.Fragment, null,\n        React.createElement(Cell, { nodeId: nodeId, measureRef: ref }),\n        showResizeHandle ? (React.createElement(Draggable, { bounds: {\n                top: 0,\n                bottom: 0,\n                left: Math.round(stepWidth),\n                right: Math.round(rowWidth - stepWidth),\n            }, position: {\n                x: rowHasInlineChildrenPosition === 'right'\n                    ? Math.round(stepWidth * (12 - offset))\n                    : Math.round(stepWidth * offset),\n                y: 0,\n            }, axis: \"x\", onDrag: function (e, data) {\n                var diff = Math.round(data.deltaX / stepWidth);\n                var newSize = rowHasInlineChildrenPosition === 'right'\n                    ? size - diff\n                    : size + diff;\n                if (newSize > 0 && newSize <= maxSize)\n                    resize(newSize);\n            }, grid: [Math.round(stepWidth), 0] },\n            React.createElement(\"div\", { className: \"resize-handle\", style: {\n                    // fix floating style\n                    height: rowHasInlineChildrenPosition ? cellHeight : 'auto',\n                    margin: cellSpacingY !== 0 ? \"\".concat(cellSpacingY / 2, \"px 0\") : undefined,\n                }, onClick: function (e) { return e.stopPropagation(); } }))) : null));\n};\nexport default React.memo(ResizableRowCell);\n//# sourceMappingURL=ResizableRowCell.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useMeasure } from 'react-use';\nimport { isRow } from '../../types/node';\nimport { useCellSpacing, useNodeHoverPosition, useNodeProps } from '../hooks';\nimport Droppable from './Droppable';\nimport ResizableRowCell from './ResizableRowCell';\nvar reduceToIdAndSizeArray = function (acc, node, index, array) {\n    var _a, _b, _c, _d;\n    var nextNode = array[index + 1];\n    var size = isRow(node) ? 12 : (_a = node.size) !== null && _a !== void 0 ? _a : 12;\n    var nextSize = !nextNode || isRow(nextNode) ? 0 : (_b = nextNode.size) !== null && _b !== void 0 ? _b : 12;\n    var offset = size + ((_d = (_c = acc[index - 1]) === null || _c === void 0 ? void 0 : _c.offset) !== null && _d !== void 0 ? _d : 0);\n    return __spreadArray(__spreadArray([], __read(acc), false), [\n        {\n            id: node.id,\n            size: size,\n            maxSize: size + nextSize - 1,\n            offset: offset,\n        },\n    ], false);\n};\nvar Row = function (_a) {\n    var _b;\n    var nodeId = _a.nodeId;\n    var _c = __read(useMeasure(), 2), ref = _c[0], rowWidth = _c[1].width;\n    var hoverPosition = useNodeHoverPosition(nodeId);\n    var childrenWithOffsets = useNodeProps(nodeId, function (node) {\n        var _a, _b, _c, _d;\n        return isRow(node)\n            ? (_b = (_a = node.cells) === null || _a === void 0 ? void 0 : _a.reduce(reduceToIdAndSizeArray, [])) !== null && _b !== void 0 ? _b : []\n            : (_d = (_c = node === null || node === void 0 ? void 0 : node.rows) === null || _c === void 0 ? void 0 : _c.reduce(reduceToIdAndSizeArray, [])) !== null && _d !== void 0 ? _d : [];\n    });\n    var rowHasInlineChildrenPosition = useNodeProps(nodeId, function (node) { var _a; return (isRow(node) && node.cells.length === 2 && ((_a = node.cells[0]) === null || _a === void 0 ? void 0 : _a.inline)) || null; });\n    var cellSpacing = useCellSpacing();\n    return (React.createElement(Droppable, { nodeId: nodeId },\n        React.createElement(\"div\", { \n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            ref: ref, className: classNames('react-page-row', {\n                'react-page-row-has-floating-children': Boolean(rowHasInlineChildrenPosition),\n            }), style: {\n                position: 'relative',\n                margin: cellSpacing && cellSpacing.x !== 0\n                    ? \"0 \".concat(-cellSpacing.x / 2, \"px\")\n                    : undefined,\n            } },\n            React.createElement(\"div\", { style: __assign({ position: 'absolute', pointerEvents: 'none' }, (cellSpacing\n                    ? {\n                        top: \"\".concat(cellSpacing.y / 2, \"px\"),\n                        left: \"\".concat(cellSpacing.x / 2, \"px\"),\n                        bottom: \"\".concat(cellSpacing.y / 2, \"px\"),\n                        right: \"\".concat(cellSpacing.x / 2, \"px\"),\n                    }\n                    : {})), className: classNames((_b = {\n                        'react-page-row-is-hovering-this': Boolean(hoverPosition)\n                    },\n                    _b[\"react-page-row-is-hovering-\".concat(hoverPosition || '')] = Boolean(hoverPosition),\n                    _b)) }),\n            childrenWithOffsets.map(function (_a, index) {\n                var offset = _a.offset, id = _a.id, size = _a.size, maxSize = _a.maxSize;\n                return (React.createElement(ResizableRowCell, { key: id, isLast: index === childrenWithOffsets.length - 1, rowWidth: rowWidth, nodeId: id, rowHasInlineChildrenPosition: rowHasInlineChildrenPosition, offset: offset, size: size, maxSize: maxSize }));\n            }))));\n};\nexport default React.memo(Row);\n//# sourceMappingURL=index.js.map","import React from 'react';\nimport InsertNew from '../../Cell/InsertNew';\nimport { useCellSpacing, useOption, useValueNode } from '../../hooks';\nimport Row from '../../Row';\nvar Rows = function () {\n    var _a;\n    var rowIds = useValueNode(function (editable) {\n        var _a, _b;\n        return ({\n            rowIds: (_b = (_a = editable === null || editable === void 0 ? void 0 : editable.rows) === null || _a === void 0 ? void 0 : _a.map(function (c) { return c.id; })) !== null && _b !== void 0 ? _b : [],\n        });\n    }).rowIds;\n    var childConstraints = useOption('childConstraints');\n    var components = useOption('components');\n    var cellSpacingY = useCellSpacing().y;\n    var insertAllowed = (childConstraints === null || childConstraints === void 0 ? void 0 : childConstraints.maxChildren)\n        ? (childConstraints === null || childConstraints === void 0 ? void 0 : childConstraints.maxChildren) > rowIds.length\n        : true;\n    var InsertNewWithDefault = (_a = components === null || components === void 0 ? void 0 : components.InsertNew) !== null && _a !== void 0 ? _a : InsertNew;\n    return (React.createElement(React.Fragment, null,\n        rowIds.length > 0 ? (React.createElement(\"div\", { style: cellSpacingY !== 0\n                ? { margin: \"\".concat(-cellSpacingY / 2, \"px 0\") }\n                : undefined }, rowIds.map(function (id) { return (React.createElement(Row, { nodeId: id, key: id })); }))) : null,\n        insertAllowed ? React.createElement(InsertNewWithDefault, { childrenIds: rowIds }) : null));\n};\nexport default React.memo(Rows);\n//# sourceMappingURL=Rows.js.map","import { useSelector } from '../../reduxConnect';\nimport { currentValue } from '../../selector/editable';\nimport deepEquals from '../../utils/deepEquals';\n/**\n *\n * @param selector receives the current value node object and returns T\n * @returns the selection T\n */\nexport var useValueNode = function (selector) {\n    return useSelector(function (state) { return selector(currentValue(state)); }, deepEquals);\n};\n//# sourceMappingURL=value.js.map","import React, { useRef } from 'react';\nimport { useDisplayMode, useZoom } from '../../hooks';\nimport { useKeepScrollPosition } from '../hooks/useKeepScrollPosition';\nimport Rows from './Rows';\nvar Inner = function () {\n    var _a, _b, _c;\n    var mode = useDisplayMode();\n    var ref = useRef(null);\n    var zoom = useZoom();\n    useKeepScrollPosition(ref);\n    var rect = (_a = ref.current) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect();\n    var zoomTransformOriginY = window.innerHeight / 2 - ((_b = rect === null || rect === void 0 ? void 0 : rect.top) !== null && _b !== void 0 ? _b : 0);\n    var offsetPercent = zoomTransformOriginY / ((_c = rect === null || rect === void 0 ? void 0 : rect.height) !== null && _c !== void 0 ? _c : 0);\n    var backdropPercent = 50 * (1 - zoom);\n    var left = backdropPercent + '%';\n    var right = 100 - backdropPercent + '%';\n    var top = backdropPercent * offsetPercent * 2 + '%';\n    var bottom = 100 - backdropPercent * (1 - offsetPercent) * 2 + '%';\n    return (React.createElement(\"div\", { ref: ref, style: {\n            position: 'relative',\n        } },\n        React.createElement(\"div\", { style: {\n                opacity: zoom < 1 ? 1 : 0,\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                right: 0,\n                bottom: 0,\n                transition: '0.6s',\n                clipPath: \"polygon(0% 0%, 0% 100%, \".concat(left, \" 100%, \").concat(left, \" \").concat(top, \", \").concat(right, \" \").concat(top, \", \").concat(right, \" \").concat(bottom, \", \").concat(left, \" \").concat(bottom, \", \").concat(left, \" 100%, 100% 100%, 100% 0%)\"),\n                background: \"url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16  ' viewBox='0 0 8 8'%3E%3Cg fill='%23c5c5c5' fill-opacity='0.4'%3E%3Cpath fill-rule='evenodd' d='M0 0h4v4H0V0zm4 4h4v4H4V4z'/%3E%3C/g%3E%3C/svg%3E\\\")\",\n            } }),\n        React.createElement(\"div\", { style: {\n                transformOrigin: \"center \".concat(zoomTransformOriginY, \"px\"),\n                transform: \"scale(\".concat(zoom, \")\"),\n                transition: '0.6s',\n            }, className: 'react-page-editable react-page-editable-mode-' + mode },\n            React.createElement(Rows, null))));\n};\nexport default React.memo(Inner);\n//# sourceMappingURL=index.js.map","import React from 'react';\nimport FallbackDropArea from './FallbackDropArea';\nimport Inner from './Inner';\nvar Editable = function () {\n    return (React.createElement(FallbackDropArea, null,\n        React.createElement(Inner, null)));\n};\nexport default React.memo(Editable);\n//# sourceMappingURL=index.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport isHotkey from 'is-hotkey';\nimport { useCallback, useEffect, useMemo } from 'react';\nimport { objIsNode } from '../../../core/utils/objIsNode';\nimport { isRow } from '../../types/node';\nimport { getCommonAncestorTree } from '../../utils/ancestorTree';\nimport { cloneAsCell } from '../../utils/cloneWithNewIds';\nimport { useAllCellPluginsForNode, useAllFocusedNodeIds, useBlurAllCells, useEditorStore, useFocusCellById, useFocusedNodeId, useInsertAfter, useIsEditMode, useIsInsertMode, useParentCellId, useRedo, useRemoveMultipleNodeIds, useSetEditMode, useSetInsertMode, useUndo, } from '../hooks';\nvar lastFocused = null;\nvar GlobalHotKeys = function (_a) {\n    var focusRef = _a.focusRef;\n    var editor = useEditorStore();\n    var undo = useUndo();\n    var redo = useRedo();\n    var setInsertMode = useSetInsertMode();\n    var isEditMode = useIsEditMode();\n    var blurAllCells = useBlurAllCells();\n    var focusedNodeIds = useAllFocusedNodeIds();\n    var someCellIsFocused = focusedNodeIds.length > 0;\n    var focusedNodeId = useFocusedNodeId();\n    var focusParentId = useParentCellId(focusedNodeId);\n    var plugins = useAllCellPluginsForNode(focusParentId);\n    var focusCell = useFocusCellById();\n    var removeCells = useRemoveMultipleNodeIds();\n    var insertAfter = useInsertAfter();\n    var isInsertMode = useIsInsertMode();\n    var setEditMode = useSetEditMode();\n    var delegateToFoundPlugin = useCallback(function (event, nodeId, handlerName, defaultHandler) { return __awaiter(void 0, void 0, void 0, function () {\n        var node, plugin, e_1;\n        var _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    node = nodeId ? editor === null || editor === void 0 ? void 0 : editor.getNode(nodeId) : null;\n                    plugin = plugins.find(function (p) { var _a; return p.id === ((_a = node === null || node === void 0 ? void 0 : node.plugin) === null || _a === void 0 ? void 0 : _a.id); });\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, 5, , 6]);\n                    if (!(isEditMode && node && (plugin === null || plugin === void 0 ? void 0 : plugin[handlerName]))) return [3 /*break*/, 3];\n                    return [4 /*yield*/, ((_a = plugin[handlerName]) === null || _a === void 0 ? void 0 : _a.call(plugin, event, node))];\n                case 2:\n                    _b.sent();\n                    _b.label = 3;\n                case 3: \n                // if the plugin handler resolve or there is no, they do not handle it, so do the default\n                return [4 /*yield*/, defaultHandler(event, node)];\n                case 4:\n                    // if the plugin handler resolve or there is no, they do not handle it, so do the default\n                    _b.sent();\n                    return [3 /*break*/, 6];\n                case 5:\n                    e_1 = _b.sent();\n                    if (e_1) {\n                        // tslint:disable-next-line:no-console\n                        console.error(e_1);\n                    }\n                    return [3 /*break*/, 6];\n                case 6: return [2 /*return*/];\n            }\n        });\n    }); }, [editor, isEditMode]);\n    var handlers = useMemo(function () {\n        var handleCopy = function (deleteAfter) {\n            var _a;\n            var _b;\n            if (deleteAfter === void 0) { deleteAfter = false; }\n            // copy cell, unless text is selected\n            if (((_b = window.getSelection()) === null || _b === void 0 ? void 0 : _b.type) !== 'Range' &&\n                (focusedNodeIds === null || focusedNodeIds === void 0 ? void 0 : focusedNodeIds.length) > 0) {\n                if (!editor) {\n                    return;\n                }\n                var node = getCommonAncestorTree(editor, focusedNodeIds);\n                if (!node) {\n                    return;\n                }\n                var cell = cloneAsCell(node);\n                var type = 'text/plain'; // json is not supported\n                var blob = new Blob([JSON.stringify(cell)], { type: type });\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var data = [new ClipboardItem((_a = {}, _a[type] = blob, _a))];\n                navigator.clipboard.write(data);\n                if (deleteAfter) {\n                    removeCells(focusedNodeIds);\n                }\n            }\n        };\n        return [\n            {\n                hotkeys: ['Escape'],\n                handler: function () {\n                    if (someCellIsFocused) {\n                        blurAllCells();\n                    }\n                    if (isInsertMode) {\n                        setEditMode();\n                    }\n                },\n            },\n            {\n                hotkeys: ['mod+z'],\n                handler: function () {\n                    undo();\n                },\n            },\n            {\n                hotkeys: ['mod+c'],\n                handler: function () {\n                    handleCopy(false);\n                },\n            },\n            {\n                hotkeys: ['mod+x'],\n                handler: function () {\n                    handleCopy(true);\n                },\n            },\n            {\n                hotkeys: ['mod+v'],\n                handler: function () { return __awaiter(void 0, void 0, void 0, function () {\n                    var node, _a, _b, commonAncestorNode, insertAfterNodeId, e_2;\n                    var _c;\n                    return __generator(this, function (_d) {\n                        switch (_d.label) {\n                            case 0:\n                                _d.trys.push([0, 2, , 3]);\n                                _b = (_a = JSON).parse;\n                                return [4 /*yield*/, navigator.clipboard.readText()];\n                            case 1:\n                                node = _b.apply(_a, [_d.sent()]);\n                                if (!editor) {\n                                    return [2 /*return*/];\n                                }\n                                if (objIsNode(node)) {\n                                    commonAncestorNode = focusedNodeIds.length > 0\n                                        ? getCommonAncestorTree(editor, focusedNodeIds)\n                                        : null;\n                                    insertAfterNodeId = commonAncestorNode\n                                        ? isRow(commonAncestorNode)\n                                            ? commonAncestorNode.cells.length === 1 // if it has just one cell, add below this cell. if it has multiple, add below this row\n                                                ? commonAncestorNode.cells[0].id\n                                                : commonAncestorNode.id\n                                            : (_c = commonAncestorNode.rows) === null || _c === void 0 ? void 0 : _c[commonAncestorNode.rows.length - 1].id // if common ancestor is a cell (usually the root cell, add below last row)\n                                        : null;\n                                    insertAfter(node, insertAfterNodeId);\n                                }\n                                return [3 /*break*/, 3];\n                            case 2:\n                                e_2 = _d.sent();\n                                return [3 /*break*/, 3];\n                            case 3: return [2 /*return*/];\n                        }\n                    });\n                }); },\n            },\n            {\n                hotkeys: ['ctrl+shift+z', 'ctrl+y', 'command+shift+z', 'command+y'],\n                handler: function () {\n                    redo();\n                },\n            },\n            {\n                hotkeys: ['alt+del', 'alt+backspace'],\n                handler: function (event) {\n                    delegateToFoundPlugin(event, focusedNodeId, 'handleRemoveHotKey', function () {\n                        removeCells(focusedNodeIds);\n                    });\n                },\n            },\n        ];\n    }, [\n        editor,\n        focusedNodeId,\n        focusedNodeIds,\n        someCellIsFocused,\n        blurAllCells,\n        focusCell,\n        removeCells,\n        setEditMode,\n        setInsertMode,\n    ]);\n    useEffect(function () {\n        // when we have multiple instances, we try to send the event only to the right one\n        // we do a little trick with a global variable (instead of requiring a wrapping context)\n        var _a, _b;\n        lastFocused = focusRef.current;\n        var keyHandler = function (event) {\n            if (lastFocused !== focusRef.current)\n                return;\n            var matchingHandler = handlers.find(function (handler) {\n                return handler.hotkeys.some(function (hotkey) { return isHotkey(hotkey, event); });\n            });\n            matchingHandler === null || matchingHandler === void 0 ? void 0 : matchingHandler.handler(event);\n        };\n        document.addEventListener('keydown', keyHandler);\n        var focusHandler = function () {\n            lastFocused = focusRef.current;\n        };\n        (_a = focusRef.current) === null || _a === void 0 ? void 0 : _a.addEventListener('click', focusHandler);\n        (_b = focusRef.current) === null || _b === void 0 ? void 0 : _b.addEventListener('mouseenter', focusHandler);\n        return function () {\n            var _a, _b;\n            document.removeEventListener('keydown', keyHandler);\n            (_a = focusRef.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('mouseenter', focusHandler);\n            (_b = focusRef.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('click', focusHandler);\n            if (lastFocused === focusRef.current) {\n                lastFocused = null;\n            }\n        };\n    }, [handlers, someCellIsFocused, isEditMode, focusRef]);\n    return null;\n};\nexport default GlobalHotKeys;\n//# sourceMappingURL=GlobalHotKeys.js.map","import React from 'react';\nimport { DndProvider as DndProviderOrg } from 'react-dnd';\nimport { useOption } from '../components/hooks';\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvar DndProvider = function (_a) {\n    var children = _a.children;\n    var dndBackend = useOption('dndBackend');\n    return dndBackend ? (React.createElement(DndProviderOrg, { backend: dndBackend }, children)) : (React.createElement(React.Fragment, null, children));\n};\nexport default DndProvider;\n//# sourceMappingURL=DndProvider.js.map","import React, { useEffect } from 'react';\nimport { DISPLAY_MODE_EDIT } from '../actions/display';\nimport { useBlurAllCells, useIsInsertMode, useOption, useSetMode, } from './hooks';\n// this might break in future, but its better than nothing\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction findReactElement(node) {\n    for (var key in node) {\n        if (key.startsWith('__reactInternalInstance$') ||\n            key.startsWith('__reactFiber$') // react 17\n        ) {\n            return node[key];\n        }\n    }\n    return null;\n}\n// we go up the reac-tree. This works even through portals, which would not be possible with traversing the dom tree!\nvar isInSameTree = function (parent, child) {\n    if (!parent) {\n        return false;\n    }\n    var element = findReactElement(child);\n    while (element) {\n        if (element.stateNode === parent) {\n            return true;\n        }\n        element = element.return;\n    }\n    return false;\n};\nvar useBlurAll = function (_a) {\n    var _b = _a.defaultMode, defaultMode = _b === void 0 ? DISPLAY_MODE_EDIT : _b, disabled = _a.disabled;\n    var ref = React.useRef();\n    var blurAllCells = useBlurAllCells();\n    var setMode = useSetMode();\n    var isInsertMode = useIsInsertMode();\n    useEffect(function () {\n        if (disabled) {\n            return;\n        }\n        if (!ref.current) {\n            return;\n        }\n        if (!document && !document.body) {\n            return;\n        }\n        var onMouseDown = function (e) {\n            if (!isInSameTree(ref.current, e.target)) {\n                blurAllCells();\n                // set us in default mode if current mode is \"insert\"\n                if (isInsertMode) {\n                    setMode(defaultMode);\n                }\n            }\n        };\n        document.body.addEventListener('mousedown', onMouseDown);\n        return function () {\n            document.body.removeEventListener('mousedown', onMouseDown);\n        };\n    }, [ref.current, disabled, isInsertMode, setMode, blurAllCells]);\n    return ref;\n};\nvar BlurGate = function (_a) {\n    var children = _a.children;\n    var defaultMode = useOption('blurGateDefaultMode');\n    var disabled = useOption('blurGateDisabled');\n    var ref = useBlurAll({ defaultMode: defaultMode, disabled: disabled });\n    return React.createElement(\"div\", { ref: ref }, children);\n};\nexport default BlurGate;\n//# sourceMappingURL=BlurGate.js.map","import { createContext, useContext, useRef } from 'react';\nexport var CallbacksContext = createContext({});\n/**\n * @returns the callbacks object of the current Editor.\n *\n * this object is memoized, alltough its better to use `usecallback` instead if you want to use a single callback\n */\nexport var useCallbackOptions = function () { return useContext(CallbacksContext); };\n/**\n * get a single (memoized) callback\n * @param key the callback key\n * @returns the callback value\n */\nexport var useCallbackOption = function (key) {\n    var callbacks = useCallbackOptions();\n    var callback = callbacks[key];\n    var lastcallback = useRef(callback);\n    if (lastcallback.current !== callback) {\n        lastcallback.current = callback;\n    }\n    return lastcallback.current;\n};\n//# sourceMappingURL=callbacks.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useRef } from 'react';\nimport deepEquals from '../utils/deepEquals';\nimport { CallbacksContext } from '../components/hooks';\nvar CallbacksProvider = function (_a) {\n    var children = _a.children, callbacks = __rest(_a, [\"children\"]);\n    var lastCallbacks = useRef();\n    var isEqual = lastCallbacks.current\n        ? deepEquals(lastCallbacks.current, callbacks)\n        : false;\n    if (!isEqual) {\n        lastCallbacks.current = callbacks;\n    }\n    return lastCallbacks.current ? (React.createElement(CallbacksContext.Provider, { value: lastCallbacks.current }, children)) : null;\n};\nexport default CallbacksProvider;\n//# sourceMappingURL=CallbacksProvider.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar serializeRow = function (r, cellPlugins) {\n    return __assign(__assign({}, r), { cells: r.cells.map(function (c) { return serializeCell(c, cellPlugins); }) });\n};\nvar serializeCell = function (c, cellPlugins) {\n    var _a;\n    var pluginDef = c.plugin;\n    var pluginFound = pluginDef\n        ? cellPlugins.find(function (p) { return p.id === pluginDef.id; })\n        : null;\n    var transformData = function (dataIn) {\n        return (pluginFound === null || pluginFound === void 0 ? void 0 : pluginFound.serialize) ? pluginFound.serialize(dataIn) : dataIn;\n    };\n    var dataI18n = c.dataI18n\n        ? Object.keys(c.dataI18n).reduce(function (acc, lang) {\n            var _a;\n            var _b;\n            return (__assign(__assign({}, acc), (_a = {}, _a[lang] = transformData((_b = c.dataI18n) === null || _b === void 0 ? void 0 : _b[lang]), _a)));\n        }, {})\n        : null;\n    return __assign(__assign({}, c), { rows: (_a = c.rows) === null || _a === void 0 ? void 0 : _a.map(function (r) { return serializeRow(r, cellPlugins); }), dataI18n: dataI18n !== null && dataI18n !== void 0 ? dataI18n : {} });\n};\nexport var serialzeValue = function (_a, plugins) {\n    var rows = _a.rows, rest = __rest(_a, [\"rows\"]);\n    return __assign(__assign({}, rest), { rows: rows.map(function (c) { return serializeRow(c, plugins); }) });\n};\n//# sourceMappingURL=serialzeValue.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport React, { useEffect, useMemo, useRef } from 'react';\nimport { updateValue } from '../actions/value';\nimport { useCallbackOption, useOption, useRenderOption, } from '../components/hooks';\nimport EditorStore, { EditorContext } from '../EditorStore';\nimport { migrateValue } from '../migrations/migrate';\nimport { serialzeValue } from '../migrations/serialzeValue';\nimport { initialState } from '../reducer';\nimport { ReduxProvider } from '../reduxConnect';\nimport deepEquals from '../utils/deepEquals';\nvar EditorStoreProvider = function (_a) {\n    var _b;\n    var children = _a.children, lang = _a.lang, value = _a.value;\n    var cellPlugins = useRenderOption('cellPlugins');\n    var middleware = (_b = useOption('middleware')) !== null && _b !== void 0 ? _b : [];\n    var onChangeLang = useCallbackOption('onChangeLang');\n    var onChange = useCallbackOption('onChange');\n    var storeFromOptions = useOption('store');\n    var editorStore = useMemo(function () {\n        var store = new EditorStore({\n            initialState: initialState(migrateValue(value, {\n                cellPlugins: cellPlugins,\n                lang: lang,\n            }), lang),\n            store: storeFromOptions,\n            middleware: middleware,\n        });\n        return store;\n    }, __spreadArray([storeFromOptions], __read(middleware), false));\n    var lastValueRef = useRef(value);\n    useEffect(function () {\n        var oldLang = lang;\n        var handleChanges = function () {\n            // notify outsiders to new language, when chagned in ui\n            var newLang = editorStore.store.getState().reactPage.settings.lang;\n            if (newLang && (newLang !== oldLang || newLang !== lang)) {\n                oldLang = newLang;\n                onChangeLang === null || onChangeLang === void 0 ? void 0 : onChangeLang(newLang);\n            }\n            if (!onChange) {\n                return;\n            }\n            //console.time('calculate notifiy on change');\n            var currentValue = editorStore.store.getState().reactPage.values.present;\n            if (!currentValue) {\n                // console.timeEnd('calculate notifiy on change');\n                return;\n            }\n            var serializedValue = serialzeValue(currentValue, cellPlugins);\n            var serializedEqual = deepEquals(lastValueRef.current, serializedValue);\n            if (serializedEqual) {\n                //    console.timeEnd('calculate notifiy on change');\n                return;\n            }\n            lastValueRef.current = serializedValue;\n            //   console.timeEnd('calculate notifiy on change');\n            onChange(serializedValue);\n        };\n        var unsubscribe = editorStore.store.subscribe(handleChanges);\n        return function () {\n            unsubscribe();\n        };\n    }, [editorStore, onChange, cellPlugins]);\n    useEffect(function () {\n        var equal = deepEquals(value, lastValueRef.current);\n        // value changed from outside\n        if (!equal) {\n            lastValueRef.current = value;\n            var migratedValue = migrateValue(value, {\n                cellPlugins: cellPlugins,\n                lang: lang,\n            });\n            editorStore.store.dispatch(updateValue(migratedValue));\n        }\n    }, [value, cellPlugins, lang]);\n    useEffect(function () {\n        // if changed from outside\n        editorStore.setLang(lang);\n    }, [editorStore, lang]);\n    return (React.createElement(ReduxProvider, { store: editorStore.store },\n        React.createElement(EditorContext.Provider, { value: editorStore }, children)));\n};\nexport default EditorStoreProvider;\n//# sourceMappingURL=EditorStoreProvider.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useRef } from 'react';\nimport deepEquals from '../utils/deepEquals';\nimport { OptionsContext } from '../components/hooks';\nimport { DEFAULT_OPTIONS } from '../defaultOptions';\n/*\nwe memoize the options, so that if you access them, you won't get a fresh object every time.\n*/\nvar OptionsProvider = function (_a) {\n    var children = _a.children, options = __rest(_a, [\"children\"]);\n    var lastOptions = useRef();\n    var fullOptions = __assign(__assign({}, DEFAULT_OPTIONS), options);\n    var isEqual = lastOptions.current\n        ? deepEquals(lastOptions.current, fullOptions)\n        : false;\n    if (!isEqual) {\n        lastOptions.current = fullOptions;\n    }\n    return lastOptions.current ? (React.createElement(OptionsContext.Provider, { value: lastOptions.current }, children)) : null;\n};\nexport default OptionsProvider;\n//# sourceMappingURL=OptionsProvider.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useRef } from 'react';\nimport deepEquals from '../utils/deepEquals';\nimport { RenderOptionsContext } from '../components/hooks';\nimport { DEFAULT_RENDER_OPTIONS } from '../defaultOptions';\n/*\nwe memoize the RenderOptions, so that if you access them, you won't get a fresh object every time.\n\n*/\nvar RenderOptionsProvider = function (_a) {\n    var children = _a.children, renderOptions = __rest(_a, [\"children\"]);\n    var lastRenderOptions = useRef();\n    var fullRenderOptions = __assign(__assign({}, DEFAULT_RENDER_OPTIONS), renderOptions);\n    var isEqual = lastRenderOptions.current\n        ? deepEquals(lastRenderOptions.current, fullRenderOptions)\n        : false;\n    if (!isEqual) {\n        lastRenderOptions.current = fullRenderOptions;\n    }\n    return lastRenderOptions.current ? (React.createElement(RenderOptionsContext.Provider, { value: lastRenderOptions.current }, children)) : null;\n};\nexport default RenderOptionsProvider;\n//# sourceMappingURL=RenderOptionsProvider.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React from 'react';\nimport DndProvider from './DndProvider';\nimport BlurGate from '../components/BlurGate';\nimport CallbacksProvider from './CallbacksProvider';\nimport EditorStoreProvider from './EditorStoreProvider';\nimport OptionsProvider from './OptionsProvider';\nimport RenderOptionsProvider from './RenderOptionsProvider';\nimport { ThemeProvider } from '@mui/material';\nimport { DEFAULT_OPTIONS } from '../defaultOptions';\nvar Provider = function (_a) {\n    var _b = _a.lang, lang = _b === void 0 ? 'default' : _b, value = _a.value, _c = _a.children, children = _c === void 0 ? [] : _c, renderOptions = _a.renderOptions, callbacks = _a.callbacks, options = _a.options;\n    return (React.createElement(OptionsProvider, __assign({}, options),\n        React.createElement(RenderOptionsProvider, __assign({}, renderOptions),\n            React.createElement(CallbacksProvider, __assign({}, callbacks),\n                React.createElement(DndProvider, null,\n                    React.createElement(EditorStoreProvider, { lang: lang, value: value },\n                        React.createElement(ThemeProvider, { theme: options.uiTheme || DEFAULT_OPTIONS.uiTheme },\n                            React.createElement(BlurGate, null, children))))))));\n};\nexport default Provider;\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport classNames from 'classnames';\nimport React from 'react';\nimport { DragPreviewImage, useDrag } from 'react-dnd';\nimport { dragIcon } from '../../../core/components/Cell/Draggable/useDragHandle';\nimport { useSetLayoutMode } from '../../../core/components/hooks/displayMode';\nvar Draggable = function (_a) {\n    var insert = _a.insert, children = _a.children;\n    var setLayoutMode = useSetLayoutMode();\n    var _b = __read(useDrag({\n        type: 'cell',\n        item: function () {\n            setLayoutMode();\n            return {\n                cell: insert,\n            };\n        },\n        collect: function (monitor) { return ({\n            isDragging: monitor.isDragging(),\n        }); },\n    }), 3), isDragging = _b[0].isDragging, dragRef = _b[1], preview = _b[2];\n    var classes = classNames({ 'react-page-toolbar-draggable-is-dragged': isDragging }, 'react-page-toolbar-draggable');\n    return (React.createElement(\"div\", { className: classes, ref: dragRef },\n        React.createElement(DragPreviewImage, { connect: preview, src: dragIcon }),\n        children));\n};\nexport default Draggable;\n//# sourceMappingURL=index.js.map","import Avatar from '@mui/material/Avatar';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemText from '@mui/material/ListItemText';\nimport React from 'react';\nimport { useDisplayModeReferenceNodeId, useInsertNew, useUiTranslator, } from '../../../core/components/hooks';\nimport Draggable from '../Draggable/index';\nvar Item = function (_a) {\n    var _b, _c;\n    var plugin = _a.plugin, insert = _a.insert;\n    var title = (_b = plugin.title) !== null && _b !== void 0 ? _b : plugin.text;\n    var t = useUiTranslator().t;\n    if (!plugin.icon && !title) {\n        return null;\n    }\n    var referenceNodeId = useDisplayModeReferenceNodeId();\n    var insertNew = useInsertNew(referenceNodeId);\n    var insertIt = React.useCallback(function () { return insertNew(insert); }, [insertNew, referenceNodeId, insert]);\n    return (React.createElement(Draggable, { insert: insert },\n        React.createElement(ListItem, { title: (_c = t('Click to add or drag and drop it somewhere on your page!')) !== null && _c !== void 0 ? _c : '', className: \"react-page-plugin-drawer-item\", onClick: insertIt },\n            React.createElement(Avatar, { children: plugin.icon || (title === null || title === void 0 ? void 0 : title[0]), style: {\n                    marginRight: 16,\n                } }),\n            React.createElement(ListItemText, { primary: t(title), secondary: t(plugin.description) }))));\n};\nexport default Item;\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport Drawer from '@mui/material/Drawer';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListSubheader from '@mui/material/ListSubheader';\nimport TextField from '@mui/material/TextField';\nimport React from 'react';\nimport { Portal } from 'react-portal';\nimport { useIsInsertMode, useUiTranslator, useDisplayModeReferenceNodeId, useAllCellPluginsForNode, } from '../../core/components/hooks';\nimport Item from './Item/index';\nvar getPluginTitle = function (plugin) { var _a; return (_a = (plugin.title || plugin.text)) !== null && _a !== void 0 ? _a : ''; };\nexport var PluginDrawer = React.memo(function () {\n    var _a;\n    var defaultLabels = {\n        noPluginFoundContent: 'No blocks found',\n        searchPlaceholder: 'Search for blocks',\n        insertPlugin: 'Add blocks to page',\n        dragMe: 'Drag me!',\n    };\n    var nodeId = useDisplayModeReferenceNodeId();\n    var plugins = useAllCellPluginsForNode(nodeId);\n    var t = useUiTranslator().t;\n    var _b = __read(React.useState(''), 2), searchText = _b[0], setSearchText = _b[1];\n    var searchFilter = React.useCallback(function (plugin) {\n        var id = plugin.id;\n        var title = getPluginTitle(plugin);\n        return (plugin &&\n            id &&\n            !plugin.hideInMenu &&\n            (id.toLowerCase().startsWith(searchText === null || searchText === void 0 ? void 0 : searchText.toLowerCase()) ||\n                (plugin.description &&\n                    plugin.description\n                        .toLowerCase()\n                        .startsWith(searchText === null || searchText === void 0 ? void 0 : searchText.toLowerCase())) ||\n                (title && title.toLowerCase().startsWith(searchText === null || searchText === void 0 ? void 0 : searchText.toLowerCase()))));\n    }, [searchText]);\n    var onSearch = React.useCallback(function (e) {\n        var target = e.target;\n        if (target instanceof HTMLInputElement) {\n            setSearchText(target.value);\n        }\n    }, [setSearchText]);\n    var isInsertMode = useIsInsertMode();\n    var inputRef = React.useRef();\n    React.useEffect(function () {\n        var handle;\n        if (inputRef.current && isInsertMode) {\n            handle = setTimeout(function () {\n                var _a;\n                var e = (_a = inputRef === null || inputRef === void 0 ? void 0 : inputRef.current) === null || _a === void 0 ? void 0 : _a.querySelector('input');\n                if (e) {\n                    e.focus();\n                }\n            }, 100);\n        }\n        return function () {\n            clearTimeout(handle);\n        };\n    }, [inputRef.current, isInsertMode]);\n    var filteredPlugins = plugins.filter(searchFilter);\n    return (React.createElement(Portal, null,\n        React.createElement(Drawer, { variant: \"persistent\", className: \"react-page-plugin-drawer\", open: isInsertMode, PaperProps: {\n                style: {\n                    width: 320,\n                },\n            } },\n            React.createElement(List, { subheader: React.createElement(ListSubheader, null, t(defaultLabels.insertPlugin)) },\n                React.createElement(ListItem, null,\n                    React.createElement(TextField, { inputRef: inputRef, placeholder: (_a = t(defaultLabels.searchPlaceholder)) !== null && _a !== void 0 ? _a : '', fullWidth: true, onChange: onSearch })),\n                filteredPlugins.length === 0 && (React.createElement(ListSubheader, null, t(defaultLabels.noPluginFoundContent)))),\n            filteredPlugins.length > 0 && (React.createElement(List, null, filteredPlugins.map(function (plugin, k) {\n                return (React.createElement(Item, { translations: defaultLabels, plugin: plugin, key: k.toString(), insert: {\n                        plugin: plugin.id,\n                    } }));\n            }))))));\n});\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport Fab from '@mui/material/Fab';\nimport Delete from '@mui/icons-material/Delete';\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useIsLayoutMode, useTrashDrop } from '../../core/components/hooks';\nexport var Trash = React.memo(function () {\n    var isLayoutMode = useIsLayoutMode();\n    var _a = __read(useTrashDrop(), 2), isHovering = _a[0].isHovering, ref = _a[1];\n    return (React.createElement(\"div\", { ref: ref, className: classNames('react-page-controls-trash', {\n            'react-page-controls-trash-active': isLayoutMode,\n        }) },\n        React.createElement(Fab, { color: \"secondary\", disabled: !isHovering },\n            React.createElement(Delete, null))));\n});\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport Fab from '@mui/material/Fab';\nimport { useIsSmallScreen } from '../../../core/components/hooks';\nvar DisplayModeToggle = function (_a) {\n    var description = _a.description, icon = _a.icon, onClick = _a.onClick, active = _a.active, disabled = _a.disabled, _b = _a.activeColor, activeColor = _b === void 0 ? 'secondary' : _b, style = _a.style, rest = __rest(_a, [\"description\", \"icon\", \"onClick\", \"active\", \"disabled\", \"activeColor\", \"style\"]);\n    var isSmall = useIsSmallScreen();\n    return (React.createElement(\"div\", { className: \"react-page-controls-mode-toggle-button\", style: style },\n        React.createElement(\"div\", { className: \"react-page-controls-mode-toggle-button-inner\" },\n            React.createElement(Fab, __assign({ color: active ? activeColor : 'default', size: isSmall ? 'small' : 'large', onClick: onClick, disabled: disabled }, rest), icon)),\n        React.createElement(\"div\", { className: \"react-page-controls-mode-toggle-button-description\" }, description)));\n};\nexport default DisplayModeToggle;\n//# sourceMappingURL=index.js.map","import Create from '@mui/icons-material/Create';\nimport React from 'react';\nimport { useIsEditMode, useSetEditMode } from '../../../core/components/hooks';\nimport Button from '../Button/index';\nvar ToggleEdit = function (_a) {\n    var label = _a.label;\n    var isEditMode = useIsEditMode();\n    var setEditMode = useSetEditMode();\n    return (React.createElement(Button, { icon: React.createElement(Create, null), description: label, active: isEditMode, onClick: setEditMode }));\n};\nexport default React.memo(ToggleEdit);\n//# sourceMappingURL=index.js.map","import ContentAdd from '@mui/icons-material/Add';\nimport React from 'react';\nimport { useIsInsertMode, useSetInsertMode, } from '../../../core/components/hooks';\nimport Button from '../Button/index';\nvar ToggleInsert = function (_a) {\n    var label = _a.label;\n    var isInsertMode = useIsInsertMode();\n    var setInsertMode = useSetInsertMode();\n    return (React.createElement(Button, { icon: React.createElement(ContentAdd, null), description: label, active: isInsertMode, onClick: setInsertMode }));\n};\nexport default React.memo(ToggleInsert);\n//# sourceMappingURL=index.js.map","import ViewQuilt from '@mui/icons-material/ViewQuilt';\nimport React from 'react';\nimport { useIsLayoutMode, useSetLayoutMode, } from '../../../core/components/hooks';\nimport Button from '../Button';\nvar ToggleLayout = function (_a) {\n    var label = _a.label;\n    var isLayoutMode = useIsLayoutMode();\n    var setLayoutMode = useSetLayoutMode();\n    return (React.createElement(Button, { icon: React.createElement(ViewQuilt, null), description: label, active: isLayoutMode, onClick: setLayoutMode }));\n};\nexport default React.memo(ToggleLayout);\n//# sourceMappingURL=index.js.map","import Devices from '@mui/icons-material/Devices';\nimport React from 'react';\nimport { useIsPreviewMode, useSetPreviewMode, } from '../../../core/components/hooks';\nimport Button from '../Button/index';\nvar TogglePreview = function (_a) {\n    var label = _a.label;\n    var isPreviewMode = useIsPreviewMode();\n    var setIsPreviewMode = useSetPreviewMode();\n    return (React.createElement(Button, { icon: React.createElement(Devices, null), description: label, active: isPreviewMode, onClick: setIsPreviewMode }));\n};\nexport default React.memo(TogglePreview);\n//# sourceMappingURL=index.js.map","import Resize from '@mui/icons-material/SettingsOverscan';\nimport React from 'react';\nimport { useIsResizeMode, useSetResizeMode, } from '../../../core/components/hooks';\nimport Button from '../Button/index';\nvar ToggleResize = function (props) {\n    var isResizeMode = useIsResizeMode();\n    var setResizeMode = useSetResizeMode();\n    return (React.createElement(Button, { icon: React.createElement(Resize, null), description: props.label, active: isResizeMode, onClick: setResizeMode }));\n};\nexport default React.memo(ToggleResize);\n//# sourceMappingURL=index.js.map","import IconRedo from '@mui/icons-material/Redo';\nimport IconUndo from '@mui/icons-material/Undo';\nimport React from 'react';\nimport { useCanRedo, useCanUndo, useIsSmallScreen, useRedo, useUndo, } from '../../../core/components/hooks';\nimport Button from '../Button/index';\nvar UndoRedo = function (_a) {\n    var labelUndo = _a.labelUndo, labelRedo = _a.labelRedo;\n    var undo = useUndo();\n    var canUndo = useCanUndo();\n    var canRedo = useCanRedo();\n    var redo = useRedo();\n    var isSmall = useIsSmallScreen();\n    return (React.createElement(\"div\", { style: {\n            height: isSmall ? 56 : 80,\n            float: 'right',\n            display: 'flex',\n            direction: 'ltr',\n            transform: 'scale(1.2)',\n        } },\n        React.createElement(\"div\", { style: {\n                width: isSmall ? 29 : 36,\n                overflow: 'hidden',\n                marginRight: isSmall ? 1 : 2,\n            } },\n            React.createElement(Button, { active: true, disabled: !canUndo, style: {\n                    transform: \"translateX(\".concat(isSmall ? 27 : 35, \"px)\"),\n                }, icon: React.createElement(IconUndo, { style: { transform: \"translateX(-\".concat(isSmall ? 6 : 12, \"px)\") } }), description: labelUndo, onClick: undo, activeColor: \"primary\" })),\n        React.createElement(\"div\", { style: {\n                width: isSmall ? 28 : 36,\n                overflow: 'hidden',\n                marginLeft: 1,\n            } },\n            React.createElement(Button, { style: {\n                    position: 'relative',\n                    transform: 'translateX(1px)',\n                }, active: true, disabled: !canRedo, icon: React.createElement(IconRedo, { style: { transform: \"translateX(\".concat(isSmall ? 6 : 12, \"px)\") } }), description: labelRedo, onClick: redo, activeColor: \"primary\" }))));\n};\nexport default React.memo(UndoRedo);\n//# sourceMappingURL=index.js.map","import IconZoomOut from '@mui/icons-material/ZoomOut';\nimport IconZoomIn from '@mui/icons-material/ZoomIn';\nimport React from 'react';\nimport { useCanZoomIn, useCanZoomOut, useIsSmallScreen, useZoomIn, useZoomOut, } from '../../../core/components/hooks';\nimport Button from '../Button/index';\nvar Zoom = function (_a) {\n    var labelZoomIn = _a.labelZoomIn, labelZoomOut = _a.labelZoomOut;\n    var canZoomIn = useCanZoomIn();\n    var canZoomOut = useCanZoomOut();\n    var zoomOut = useZoomOut();\n    var zoomIn = useZoomIn();\n    var isSmall = useIsSmallScreen();\n    return (React.createElement(\"div\", { style: {\n            height: isSmall ? 56 : 80,\n            float: 'right',\n            display: 'flex',\n            direction: 'ltr',\n            transform: 'scale(1.2)',\n        } },\n        React.createElement(\"div\", { style: {\n                width: isSmall ? 29 : 36,\n                overflow: 'hidden',\n                marginRight: isSmall ? 1 : 2,\n            } },\n            React.createElement(Button, { active: true, disabled: !canZoomIn, style: {\n                    transform: \"translateX(\".concat(isSmall ? 27 : 35, \"px)\"),\n                }, icon: React.createElement(IconZoomIn, { style: { transform: \"translateX(-\".concat(isSmall ? 6 : 12, \"px)\") } }), description: labelZoomIn, onClick: zoomIn, activeColor: \"default\" })),\n        React.createElement(\"div\", { style: {\n                width: isSmall ? 28 : 36,\n                overflow: 'hidden',\n                marginLeft: 1,\n            } },\n            React.createElement(Button, { style: {\n                    position: 'relative',\n                    transform: 'translateX(1px)',\n                }, active: true, disabled: !canZoomOut, icon: React.createElement(IconZoomOut, { style: { transform: \"translateX(\".concat(isSmall ? 6 : 12, \"px)\") } }), description: labelZoomOut, onClick: zoomOut, activeColor: \"default\" }))));\n};\nexport default React.memo(Zoom);\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport React from 'react';\nimport { useOption, useUiTranslator } from '../../core/components/hooks';\nimport ToggleEdit from './ToggleEdit/index';\nimport ToggleInsert from './ToggleInsert/index';\nimport ToggleLayout from './ToggleLayout/index';\nimport TogglePreview from './TogglePreview/index';\nimport ToggleResize from './ToggleResize/index';\nimport UndoRedo from './UndoRedo';\nimport Zoom from './Zoom';\nvar getStickyNessstyle = function (stickyness) {\n    if (!stickyness ||\n        (!stickyness.shouldStickToBottom && !stickyness.shouldStickToTop)) {\n        return {\n            position: 'fixed',\n            right: (stickyness === null || stickyness === void 0 ? void 0 : stickyness.rightOffsetFixed) || 0,\n        };\n    }\n    return {\n        position: 'absolute',\n        bottom: stickyness.shouldStickToBottom ? 0 : 'auto',\n        top: stickyness.shouldStickToTop ? 0 : 'auto',\n        right: -stickyness.rightOffset || 0,\n    };\n};\nfunction notEmpty(value) {\n    return value !== null && value !== undefined;\n}\nexport var Sidebar = function (_a) {\n    var _b, _c, _d, _e, _f, _g;\n    var stickyNess = _a.stickyNess;\n    var t = useUiTranslator().t;\n    var zoomEnabled = useOption('zoomEnabled');\n    var undoRedoEnabled = useOption('undoRedoEnabled');\n    var editEnabled = useOption('editEnabled');\n    var insertEnabled = useOption('insertEnabled');\n    var layoutEnabled = useOption('layoutEnabled');\n    var resizeEnabled = useOption('resizeEnabled');\n    var previewEnabled = useOption('previewEnabled');\n    var defaultLabels = {\n        edit: 'Edit blocks',\n        insert: 'Add blocks',\n        layout: 'Move blocks',\n        resize: 'Resize blocks',\n        preview: 'Preview page',\n    };\n    var customOptions = useOption('customOptions');\n    var actions = __spreadArray([\n        // eslint-disable-next-line react/jsx-key\n        undoRedoEnabled\n            ? { action: React.createElement(UndoRedo, { labelRedo: \"redo\", labelUndo: \"undo\" }) }\n            : null,\n        zoomEnabled\n            ? { action: React.createElement(Zoom, { labelZoomIn: \"zoom in\", labelZoomOut: \"zoom out\" }) }\n            : null,\n        editEnabled\n            ? { action: React.createElement(ToggleEdit, { label: (_b = t(defaultLabels.edit)) !== null && _b !== void 0 ? _b : '' }) }\n            : null,\n        insertEnabled\n            ? { action: React.createElement(ToggleInsert, { label: (_c = t(defaultLabels.insert)) !== null && _c !== void 0 ? _c : '' }) }\n            : null,\n        layoutEnabled\n            ? { action: React.createElement(ToggleLayout, { label: (_d = t(defaultLabels.layout)) !== null && _d !== void 0 ? _d : '' }) }\n            : null,\n        resizeEnabled\n            ? { action: React.createElement(ToggleResize, { label: (_e = t(defaultLabels.resize)) !== null && _e !== void 0 ? _e : '' }) }\n            : null,\n        previewEnabled\n            ? { action: React.createElement(TogglePreview, { label: (_f = t(defaultLabels.preview)) !== null && _f !== void 0 ? _f : '' }) }\n            : null\n    ], __read(((_g = customOptions === null || customOptions === void 0 ? void 0 : customOptions.map(function (customOption) { return ({ action: customOption }); })) !== null && _g !== void 0 ? _g : [])), false).filter(notEmpty);\n    return (React.createElement(\"div\", { className: \"react-page-controls-mode-toggle-control-group\", style: __assign({ position: 'fixed', zIndex: 10001, bottom: 0, right: 0, display: 'flex', maxHeight: '100%' }, getStickyNessstyle(stickyNess)) },\n        React.createElement(\"div\", { ref: stickyNess === null || stickyNess === void 0 ? void 0 : stickyNess.stickyElRef, style: {\n                padding: 16,\n                position: 'relative',\n                flexFlow: 'column wrap',\n                direction: 'rtl',\n                display: 'flex',\n            } }, actions.map(function (_a, index) {\n            var action = _a.action;\n            return (React.createElement(\"div\", { key: index, className: \"react-page-controls-mode-toggle-control\", style: {\n                    animationDelay: (actions.length - index) * 150 + 'ms',\n                } },\n                React.createElement(React.Fragment, null,\n                    action,\n                    React.createElement(\"div\", { className: \"react-page-controls-mode-toggle-clearfix\" }))));\n        }))));\n};\n//# sourceMappingURL=index.js.map","import React from 'react';\nimport { IconButton, Tooltip } from '@mui/material';\nimport Delete from '@mui/icons-material/Delete';\nimport { useAllFocusedNodeIds, useRemoveMultipleNodeIds, useUiTranslator, } from '../../core/components/hooks';\nvar DeleteAll = function () {\n    var _a;\n    var remove = useRemoveMultipleNodeIds();\n    var focused = useAllFocusedNodeIds();\n    var t = useUiTranslator().t;\n    return (React.createElement(Tooltip, { title: (_a = t('Remove all selected')) !== null && _a !== void 0 ? _a : '' },\n        React.createElement(IconButton, { onClick: function () { return remove(focused); }, \"aria-label\": \"delete\", color: \"secondary\" },\n            React.createElement(Delete, null))));\n};\nexport default DeleteAll;\n//# sourceMappingURL=DeleteAll.js.map","import { IconButton, Tooltip } from '@mui/material';\nimport React from 'react';\nimport { useAllFocusedNodeIds, useDuplicateMultipleCells, useUiTranslator, } from '../../core/components/hooks';\nimport Icon from '@mui/icons-material/FileCopy';\nvar DuplicateAll = function () {\n    var _a;\n    var duplicate = useDuplicateMultipleCells();\n    var t = useUiTranslator().t;\n    var nodeIds = useAllFocusedNodeIds();\n    return (React.createElement(Tooltip, { title: (_a = t('Duplicate al')) !== null && _a !== void 0 ? _a : '' },\n        React.createElement(IconButton, { onClick: function () { return duplicate(nodeIds); }, \"aria-label\": \"delete\", color: \"default\" },\n            React.createElement(Icon, null))));\n};\nexport default DuplicateAll;\n//# sourceMappingURL=DuplicateAll.js.map","import { Avatar, Grid, Typography } from '@mui/material';\nimport React from 'react';\nimport { useAllFocusedNodeIds, useUiTranslator, } from '../../core/components/hooks';\nimport { BottomToolbarDrawer } from '../BottomToolbar';\nimport DeleteAll from './DeleteAll';\nimport DuplicateAll from './DuplicateAll';\nexport var MultiNodesBottomToolbar = React.memo(function () {\n    var t = useUiTranslator().t;\n    var focusedNodeIds = useAllFocusedNodeIds();\n    return (React.createElement(BottomToolbarDrawer, { open: focusedNodeIds.length > 1, anchor: 'bottom' },\n        React.createElement(Grid, { container: true, direction: \"row\", alignItems: \"center\" },\n            React.createElement(Grid, { item: true },\n                React.createElement(Avatar, { children: focusedNodeIds.length, style: {\n                        marginRight: 16,\n                    } })),\n            React.createElement(Grid, { item: true },\n                React.createElement(Typography, { variant: \"subtitle1\" }, t('(multiple selected)'))),\n            React.createElement(Grid, { item: true, style: { marginLeft: 'auto' } },\n                React.createElement(DuplicateAll, null)),\n            React.createElement(Grid, { item: true },\n                React.createElement(DeleteAll, null)))));\n});\n//# sourceMappingURL=index.js.map","import React from 'react';\nimport { PluginDrawer } from '../PluginDrawer';\nimport { Trash } from '../Trash';\nimport { Sidebar } from '../Sidebar';\nimport { useOption } from '../../core/components/hooks';\nimport { MultiNodesBottomToolbar } from '../MultiNodesBottomToolbar';\nexport default React.memo(function (_a) {\n    var _b = _a.stickyNess, stickyNess = _b === void 0 ? {\n        shouldStickToTop: false,\n        shouldStickToBottom: false,\n        rightOffset: 0,\n        rightOffsetFixed: 0,\n    } : _b;\n    var hideEditorSidebar = useOption('hideEditorSidebar');\n    return (React.createElement(React.Fragment, null,\n        React.createElement(Trash, null),\n        !hideEditorSidebar && React.createElement(Sidebar, { stickyNess: stickyNess }),\n        React.createElement(PluginDrawer, null),\n        React.createElement(MultiNodesBottomToolbar, null)));\n});\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React, { useState } from 'react';\nimport { useOption } from '..';\nvar StickyWrapper = function (_a) {\n    var children = _a.children;\n    var ref = React.createRef();\n    var sidebarPosition = useOption('sidebarPosition');\n    var stickyElRef = React.createRef();\n    var _b = __read(useState(false), 2), shouldStickToTop = _b[0], setShouldStickToTop = _b[1];\n    var _c = __read(useState(true), 2), shouldStickToBottom = _c[0], setShouldStickToBottom = _c[1];\n    var _d = __read(useState(0), 2), rightOffset = _d[0], setRightOffset = _d[1];\n    var _e = __read(useState(0), 2), rightOffsetFixed = _e[0], setRightOffsetFixed = _e[1];\n    React.useEffect(function () {\n        var calc = function () {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n            if (ref.current) {\n                /**\n                 * TODO: works, but needs refactor, could calculate style for sidebar directly\n                 */\n                var _q = ref.current.getBoundingClientRect(), top_1 = _q.top, left = _q.left, right = _q.right;\n                var bottom = top_1 + ref.current.clientHeight;\n                // document.documentElement.clientWidth is without scrollbars, so better for us\n                if (sidebarPosition === 'rightAbsolute') {\n                    var rightOffsetAbsolute = document.documentElement.clientWidth -\n                        left -\n                        ref.current.clientWidth;\n                    setRightOffset(rightOffsetAbsolute);\n                    setRightOffsetFixed(0);\n                }\n                else if (sidebarPosition === 'rightRelative') {\n                    var rightOffsetAbsolute = document.documentElement.clientWidth -\n                        left -\n                        ref.current.clientWidth;\n                    var rightOffsetRelative = (_b = (_a = stickyElRef.current) === null || _a === void 0 ? void 0 : _a.clientWidth) !== null && _b !== void 0 ? _b : 0;\n                    var overlapsScreenRight = right + ((_d = (_c = stickyElRef.current) === null || _c === void 0 ? void 0 : _c.clientWidth) !== null && _d !== void 0 ? _d : 0) >\n                        document.documentElement.clientWidth;\n                    setRightOffset(overlapsScreenRight ? rightOffsetAbsolute : rightOffsetRelative);\n                    setRightOffsetFixed(overlapsScreenRight\n                        ? 0\n                        : document.documentElement.clientWidth -\n                            right -\n                            ((_f = (_e = stickyElRef.current) === null || _e === void 0 ? void 0 : _e.clientWidth) !== null && _f !== void 0 ? _f : 0));\n                }\n                else if (sidebarPosition === 'leftRelative') {\n                    var rightOffsetForRelativeLeft = -ref.current.clientWidth;\n                    var rightOffsetForAbsoluteLeft = -ref.current.clientWidth -\n                        left +\n                        ((_h = (_g = stickyElRef.current) === null || _g === void 0 ? void 0 : _g.clientWidth) !== null && _h !== void 0 ? _h : 100);\n                    var overlapsScreenLeft = right + rightOffsetForRelativeLeft <\n                        ((_k = (_j = stickyElRef.current) === null || _j === void 0 ? void 0 : _j.clientWidth) !== null && _k !== void 0 ? _k : 0);\n                    setRightOffset(overlapsScreenLeft\n                        ? rightOffsetForAbsoluteLeft\n                        : rightOffsetForRelativeLeft);\n                    setRightOffsetFixed(document.documentElement.clientWidth - left);\n                }\n                else if (sidebarPosition === 'leftAbsolute') {\n                    console.warn('sidebarPosition leftAbsolute is currently buggy');\n                    var rightOffsetForAbsoluteLeft = -ref.current.clientWidth -\n                        left +\n                        ((_m = (_l = stickyElRef.current) === null || _l === void 0 ? void 0 : _l.clientWidth) !== null && _m !== void 0 ? _m : 100);\n                    setRightOffset(rightOffsetForAbsoluteLeft);\n                    setRightOffsetFixed(document.documentElement.clientWidth -\n                        ((_p = (_o = stickyElRef.current) === null || _o === void 0 ? void 0 : _o.clientWidth) !== null && _p !== void 0 ? _p : 0));\n                }\n                var uiHeight = stickyElRef.current\n                    ? stickyElRef.current.clientHeight\n                    : 400;\n                setShouldStickToTop(top_1 > window.innerHeight - uiHeight);\n                setShouldStickToBottom(bottom < window.innerHeight);\n            }\n        };\n        document.addEventListener('scroll', calc);\n        window.addEventListener('resize', calc);\n        var observer = null;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (global.IntersectionObserver) {\n            observer = new IntersectionObserver(calc);\n            if (ref.current) {\n                observer.observe(ref.current);\n            }\n        }\n        // do it once\n        calc();\n        return function () {\n            document.removeEventListener('scroll', calc);\n            window.removeEventListener('resize', calc);\n            observer === null || observer === void 0 ? void 0 : observer.disconnect();\n        };\n    }, [ref, stickyElRef]);\n    return (React.createElement(\"div\", { style: { position: 'relative' }, ref: ref }, children({\n        rightOffset: rightOffset,\n        stickyElRef: stickyElRef,\n        focusRef: ref,\n        shouldStickToTop: shouldStickToTop,\n        shouldStickToBottom: shouldStickToBottom,\n        rightOffsetFixed: rightOffsetFixed,\n    })));\n};\nexport default StickyWrapper;\n//# sourceMappingURL=StickyWrapper.js.map","import React from 'react';\nimport Editable from '../core/components/Editable';\nimport GlobalHotKeys from '../core/components/HotKey/GlobalHotKeys';\nimport { createEmptyState } from '../core/EditorStore';\nimport Provider from '../core/Provider';\nimport EditorUI from '../ui/EditorUI';\nimport StickyWrapper from './StickyWrapper';\nvar EditableEditor = function (_a) {\n    var value = _a.value, lang = _a.lang, children = _a.children, options = _a.options, renderOptions = _a.renderOptions, callbacks = _a.callbacks;\n    var theValue = value || createEmptyState();\n    return (React.createElement(Provider, { lang: lang, callbacks: callbacks, value: theValue, renderOptions: renderOptions, options: options },\n        children,\n        React.createElement(StickyWrapper, null, function (stickyNess) { return (React.createElement(React.Fragment, null,\n            React.createElement(GlobalHotKeys, { focusRef: stickyNess.focusRef }),\n            React.createElement(Editable, null),\n            React.createElement(EditorUI, { stickyNess: stickyNess }))); })));\n};\nexport default EditableEditor;\n//# sourceMappingURL=EditableEditor.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React, { Fragment, useEffect, useMemo } from 'react';\nimport { useIsSmallScreen } from '../../core/components/hooks';\nimport lazyLoad from '../../core/helper/lazyLoad';\nimport makeUniformsSchema from './makeUniformsSchema';\nexport var AutoForm = lazyLoad(function () { return import('./AutoForm'); });\nexport var AutoField = lazyLoad(function () { return import('./AutoField'); });\nexport var AutoFields = lazyLoad(function () { return import('./AutoFields'); });\nvar getDefaultValue = function (bridge) {\n    return bridge.getSubfields().reduce(function (acc, fieldName) {\n        var _a;\n        return (__assign(__assign({}, acc), (_a = {}, _a[fieldName] = bridge.getInitialValue(fieldName), _a)));\n    }, {});\n};\nexport function AutoformControls(_a) {\n    var onChange = _a.onChange, data = _a.data, schema = _a.schema, _b = _a.columnCount, columnCount = _b === void 0 ? 2 : _b, Content = _a.Content;\n    var bridge = useMemo(function () { return makeUniformsSchema(schema); }, [schema]);\n    useEffect(function () {\n        var newDefaultData = __assign(__assign({}, getDefaultValue(bridge)), (data !== null && data !== void 0 ? data : {}));\n        onChange(newDefaultData);\n    }, [bridge]);\n    var isSmall = useIsSmallScreen();\n    return (React.createElement(AutoForm\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    , { \n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        model: data, autosave: true, schema: bridge, onSubmit: onChange }, Content ? (React.createElement(Content, { data: data, columnCount: columnCount })) : (React.createElement(\"div\", { style: {\n            columnCount: isSmall ? 1 : columnCount,\n            columnRule: '1px solid #E0E0E0',\n            columnGap: 48,\n        } },\n        React.createElement(AutoFields, { element: Fragment })))));\n}\n//# sourceMappingURL=index.js.map","/* eslint-disable @typescript-eslint/ban-types */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport Ajv from 'ajv';\nimport { JSONSchemaBridge } from 'uniforms-bridge-json-schema';\nvar ajv = new Ajv({ allErrors: true, useDefaults: true });\najv.addKeyword('uniforms');\nfunction createValidator(schema) {\n    var validator = ajv.compile(schema);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return function (model) {\n        var _a;\n        validator(model);\n        if (validator.errors && validator.errors.length) {\n            return ((_a = validator.errors) === null || _a === void 0 ? void 0 : _a.length) ? { details: validator.errors } : null;\n        }\n    };\n}\nfunction makeUniformsSchema(jsonSchema) {\n    var fullSchema = __assign({ type: 'object' }, jsonSchema);\n    var bridge = new JSONSchemaBridge(fullSchema, createValidator(fullSchema));\n    // see https://github.com/react-page/react-page/issues/1187\n    // we remap props.component to props._customComponent to avoid the underlying issue in uniforms\n    //\n    var getPropsOrg = bridge.getProps;\n    bridge.getProps = function (name) {\n        var _a = getPropsOrg.call(this, name), component = _a.component, props = __rest(_a, [\"component\"]);\n        return __assign({ _customComponent: component }, props);\n    };\n    return bridge;\n}\nexport default makeUniformsSchema;\n//# sourceMappingURL=makeUniformsSchema.js.map"],"names":["useUndo","dispatch","useCallback","type","useRedo","useCanUndo","s","reactPage","values","past","length","useCanRedo","future","state","focus","allFocusedNodeIds","_a","_b","_c","nodeIds","filter","n","node","singleFocusedNode","__read","o","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","__spreadArray","to","from","pack","arguments","l","Array","prototype","slice","concat","useFocusedNodeId","useAllFocusedNodeIds","useIsFocused","id","includes","useIsExclusivlyFocused","useScrollToViewEffect","effect","deps","scrollToCell","f","nodeId","useEffect","objIsNode","obj","children","insertNew","isAllowed","dropRef","useDrop","accept","canDrop","item","drop","monitor","didDrop","cell","setReference","clearReference","target","classList","contains","ref","onClick","useSetZoom","zoom","useZoom","display","element","offset","behavior","bodyRect","document","body","getBoundingClientRect","top","offsetPosition","window","scrollTo","useKeepScrollPosition","mode","firstElementInViewPortref","onScroll","current","firstInViewport","find","getElementsByClassName","el","rect","left","bottom","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth","isElementInViewport","topOffset","undefined","addEventListener","removeEventListener","el_1","topOffset_1","setTimeout","scrollIntoViewWithOffset","parentCellId","setInsertMode","isPreviewMode","isLayoutMode","setReferenceNodeId","checkIfAllowed","collect","isOver","getItem","className","style","pointerEvents","zIndex","overflow","width","minWidth","margin","cursor","stopPropagation","delay","trace","Error","stack","replace","split","Logger","warn","args","_i","console","apply","debug","log","info","fatal","join","__assign","Object","assign","t","p","hasOwnProperty","this","c","NO","C1","C2","C3","C4","AH","AA","BH","BA","LH","LA","RH","RA","IL","IR","MATRIX_LIST","last","computeHover","drag","hover","actions","room","mouse","cellPlugins","matrixName","pluginId","allowInlineNeighbours","matrix","scale","rows","cells","x","y","height","getRoomScale","hoverCell","Math","floor","row","getMouseHoverCell","CALLBACK_LIST","all","ctx","position","size","deepEquals","logger","relativeMousePosition","round","computeLevel","level","steps","computeHorizontal","inv","at","inline","computeVertical","getDropLevel","clear","leftOf","above","rightOf","below","levels","inlineLeft","hasInlineNeighbour","plugin","isInlineable","inlineRight","computeCurrentDropPosition","mousePosition","getClientOffset","componentPosition","hoverId","dragId","shouldClear","onHover","shallow","ancestorIds","computeAndDispatchHover","leading","onDrop","cancelCellDrag","computeAndDispatchInsert","useCellDrop","hoverTarget","targetParentNodeId","hoverActions","dropActions","isHoveringOverThis","allowNeighbour","domElement","props","isInsertMode","attach","hoverPosition","allowMoveInEditMode","hasPlugin","cellSpacingY","needVerticalMargin","isLeaf","isEditMode","removeCell","message","dragIcon","useDragHandle","enabled","useDrag","canDrag","dragCell","isDragging","end","dragRef","preview","DragPreviewImage","connect","src","dragEnabled","previewElement","metaKey","ctrlKey","title","text","DefaultSmallHandle","_d","components","ResizeHandle","EditModeResizeHandle","ControlsList","controls","componentProps","useState","tab","setTab","activeControls","flexDirection","Tabs","sx","marginTop","marginBottom","marginLeft","alignItems","backgroundColor","theme","palette","background","default","onChange","v","orientation","variant","map","index","Tab","label","key","flex","Controls","pluginControls","isArray","Component","AutoformControls","maxHeight","maxWidth","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","padding","border","overflowX","remove","JSON","stringify","hasChildren","lang","CustomPluginMissing","CellPluginMissing","data","focused","Renderer","Missing","Provider","NoopProvider","Toolbar","BottomToolbar","useMemo","pluginConfig","readOnly","allowClickInside","open","_e","_f","_g","cellShouldHavePlugin","setEditMode","childrenIds","cellSpacing","pluginCellSpacing","_h","providerValue","closest","insertAllowed","childConstraints","maxChildren","innerDivProps","InsertNewWithDefault","InsertNew","tabIndex","baseStyle","transform","__extends","extendStatics","d","b","setPrototypeOf","__proto__","TypeError","String","__","constructor","create","CellErrorGate","_super","class_1","_this","componentDidCatch","setState","render","measureRef","isDraft","isDraftI18n","isResizeMode","multiNodesSelected","showMoveButtons","needVerticalPadding","isDraftInLang","cellOuterStlye","boxSizing","rowWidth","rowHasInlineChildrenPosition","isLast","maxSize","stepWidth","allowResizeInEditMode","resize","useMeasure","cellHeight","showResizeHandle","bounds","axis","onDrag","diff","deltaX","newSize","grid","reduceToIdAndSizeArray","acc","array","nextNode","nextSize","childrenWithOffsets","reduce","Boolean","selector","rowIds","editable","useRef","zoomTransformOriginY","offsetPercent","backdropPercent","opacity","transition","clipPath","transformOrigin","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","result","then","__generator","g","_","sent","trys","ops","verb","op","pop","lastFocused","focusRef","editor","undo","redo","blurAllCells","focusedNodeIds","someCellIsFocused","focusedNodeId","focusParentId","plugins","focusCell","removeCells","insertAfter","delegateToFoundPlugin","event","handlerName","defaultHandler","e_1","getNode","handlers","handleCopy","deleteAfter","getSelection","blob","Blob","ClipboardItem","navigator","clipboard","write","hotkeys","handler","commonAncestorNode","insertAfterNodeId","parse","readText","keyHandler","matchingHandler","some","hotkey","focusHandler","dndBackend","DndProvider","backend","defaultMode","disabled","setMode","onMouseDown","parent","child","startsWith","findReactElement","stateNode","return","isInSameTree","useBlurAll","CallbacksContext","createContext","useCallbackOption","callback","useContext","lastcallback","callbacks","lastCallbacks","serializeRow","serializeCell","pluginDef","pluginFound","dataI18n","keys","dataIn","serialize","middleware","onChangeLang","storeFromOptions","editorStore","EditorStore","initialState","migrate","store","lastValueRef","oldLang","unsubscribe","subscribe","newLang","getState","settings","currentValue","present","serializedValue","rest","serialzeValue","migratedValue","setLang","options","lastOptions","fullOptions","renderOptions","lastRenderOptions","fullRenderOptions","ThemeProvider","uiTheme","insert","setLayoutMode","classes","icon","referenceNodeId","insertIt","ListItem","Avatar","marginRight","ListItemText","primary","secondary","description","PluginDrawer","defaultLabels","noPluginFoundContent","searchPlaceholder","insertPlugin","dragMe","searchText","setSearchText","searchFilter","getPluginTitle","hideInMenu","toLowerCase","onSearch","HTMLInputElement","inputRef","handle","querySelector","clearTimeout","filteredPlugins","Drawer","PaperProps","List","subheader","ListSubheader","TextField","placeholder","fullWidth","k","translations","toString","Trash","isHovering","Fab","color","Delete","active","activeColor","isSmall","Button","Create","ViewQuilt","setIsPreviewMode","Devices","setResizeMode","labelUndo","labelRedo","canUndo","canRedo","float","direction","labelZoomIn","labelZoomOut","canZoomIn","zoomFactors","z","useCanZoomIn","canZoomOut","useCanZoomOut","zoomOut","setZoom","newZoom","useZoomOut","zoomIn","reverse","useZoomIn","notEmpty","Sidebar","stickyness","stickyNess","zoomEnabled","undoRedoEnabled","editEnabled","insertEnabled","layoutEnabled","resizeEnabled","previewEnabled","customOptions","action","customOption","shouldStickToBottom","shouldStickToTop","rightOffset","rightOffsetFixed","stickyElRef","flexFlow","animationDelay","Tooltip","IconButton","duplicate","MultiNodesBottomToolbar","anchor","Grid","container","Typography","hideEditorSidebar","sidebarPosition","setShouldStickToTop","setShouldStickToBottom","setRightOffset","setRightOffsetFixed","calc","_j","_k","_l","_m","_o","_p","_q","top_1","rightOffsetAbsolute","rightOffsetRelative","overlapsScreenRight","rightOffsetForRelativeLeft","rightOffsetForAbsoluteLeft","overlapsScreenLeft","uiHeight","observer","IntersectionObserver","observe","disconnect","theValue","EditorUI","AutoForm","AutoFields","schema","columnCount","Content","bridge","newDefaultData","getSubfields","fieldName","getInitialValue","getDefaultValue","model","autosave","onSubmit","columnRule","columnGap","Fragment","ajv","allErrors","useDefaults","addKeyword","jsonSchema","fullSchema","validator","compile","errors","details","createValidator","getPropsOrg","getProps","name","component","_customComponent"],"sourceRoot":""}