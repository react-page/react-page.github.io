{"version":3,"file":"static/chunks/5788.b41d6157ac8057c0.js","mappings":"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","sources":["webpack://_N_E/../packages/editor/lib-es/core/utils/deepEquals.js","webpack://_N_E/../packages/editor/lib-es/core/utils/objIsNode.js","webpack://_N_E/../packages/plugins/content/slate/lib-es/components/DialogVisibleProvider.js","webpack://_N_E/../packages/plugins/content/slate/lib-es/slateEnhancer/withInline.js","webpack://_N_E/../packages/plugins/content/slate/lib-es/slateEnhancer/withPaste.js","webpack://_N_E/../packages/plugins/content/slate/lib-es/components/SlateProvider.js"],"sourcesContent":["import equals from 'fast-deep-equal';\nexport default equals;\n//# sourceMappingURL=deepEquals.js.map","// poor check\nexport var objIsNode = function (obj) {\n    if (!obj)\n        return false;\n    if (!('id' in obj)) {\n        return false;\n    }\n    return true;\n};\n//# sourceMappingURL=objIsNode.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React, { useContext, useMemo, useState } from 'react';\nvar DialogContext = React.createContext({});\nvar DialogVisibleProvider = function (_a) {\n    var children = _a.children;\n    var _b = __read(useState(false), 2), visible = _b[0], setVisible = _b[1];\n    var value = useMemo(function () { return ({ visible: visible, setVisible: setVisible }); }, [visible, setVisible]);\n    return (React.createElement(DialogContext.Provider, { value: value }, children));\n};\nexport var useDialogIsVisible = function () {\n    var _a;\n    return (_a = useContext(DialogContext)) === null || _a === void 0 ? void 0 : _a.visible;\n};\nexport var useSetDialogIsVisible = function () {\n    var _a;\n    return (_a = useContext(DialogContext)) === null || _a === void 0 ? void 0 : _a.setVisible;\n};\nexport default DialogVisibleProvider;\n//# sourceMappingURL=DialogVisibleProvider.js.map","var withInline = function (plugins) { return function (editor) {\n    var isInline = editor.isInline, isVoid = editor.isVoid;\n    editor.isInline = function (element) {\n        return plugins.some(function (plugin) {\n            return plugin.pluginType === 'component' &&\n                plugin.object === 'inline' &&\n                plugin.type === element.type;\n        })\n            ? true\n            : isInline(element);\n    };\n    editor.isVoid = function (element) {\n        return plugins.some(function (plugin) {\n            return plugin.pluginType === 'component' &&\n                (plugin.object === 'block' || plugin.object === 'inline') &&\n                plugin.type === element.type &&\n                plugin.isVoid;\n        })\n            ? true\n            : isVoid(element);\n    };\n    return editor;\n}; };\nexport default withInline;\n//# sourceMappingURL=withInline.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { objIsNode } from '@react-page/editor';\nimport { Transforms } from 'slate';\nimport { HtmlToSlate } from '../htmlToSlate';\nvar withPaste = function (plugins, defaultPluginType) { return function (editor) {\n    var insertData = editor.insertData;\n    var htmlToSlate = HtmlToSlate({ plugins: plugins });\n    editor.insertData = function (data) { return __awaiter(void 0, void 0, void 0, function () {\n        var slateData, html, slate, text, node, lines, nextWillbeParagraph, i, thisLine, nextLine, nextIsEmpty, thisLineText;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    slateData = data.getData('application/x-slate-fragment');\n                    if (slateData) {\n                        insertData(data);\n                        return [2 /*return*/];\n                    }\n                    html = data.getData('text/html');\n                    if (!html) return [3 /*break*/, 2];\n                    return [4 /*yield*/, htmlToSlate(html)];\n                case 1:\n                    slate = (_a.sent()).slate;\n                    Transforms.insertFragment(editor, slate);\n                    return [2 /*return*/];\n                case 2:\n                    text = data.getData('text/plain');\n                    if (text) {\n                        // check if its a react-page data\n                        try {\n                            node = JSON.parse(text);\n                            if (objIsNode(node)) {\n                                return [2 /*return*/];\n                            }\n                        }\n                        catch (e) {\n                            //ignore\n                        }\n                        lines = text.split('\\n');\n                        nextWillbeParagraph = false;\n                        for (i = 0; i < lines.length; i++) {\n                            thisLine = lines[i];\n                            nextLine = lines[i + 1];\n                            nextIsEmpty = !nextLine || !nextLine.trim();\n                            thisLineText = thisLine + (nextIsEmpty ? '' : '\\n');\n                            if (!thisLine.trim()) {\n                                // this line is empty,\n                                nextWillbeParagraph = true;\n                            }\n                            else if (nextWillbeParagraph) {\n                                Transforms.insertNodes(editor, {\n                                    type: defaultPluginType,\n                                    children: [{ text: thisLineText }],\n                                });\n                                nextWillbeParagraph = false;\n                            }\n                            else {\n                                Transforms.insertText(editor, thisLineText);\n                                nextWillbeParagraph = false;\n                            }\n                        }\n                        return [2 /*return*/];\n                    }\n                    insertData(data);\n                    return [2 /*return*/];\n            }\n        });\n    }); };\n    return editor;\n}; };\nexport default withPaste;\n//# sourceMappingURL=withPaste.js.map","import { deepEquals } from '@react-page/editor';\nimport React, { useCallback, useEffect, useMemo } from 'react';\nimport { createEditor, Transforms } from 'slate';\nimport { ReactEditor, Slate, withReact } from 'slate-react';\nimport withInline from '../slateEnhancer/withInline';\nimport withPaste from '../slateEnhancer/withPaste';\nimport DialogVisibleProvider from './DialogVisibleProvider';\nvar SlateProvider = function (props) {\n    var data = props.data, plugins = props.plugins, children = props.children, defaultPluginType = props.defaultPluginType;\n    var editor = useMemo(function () {\n        return withPaste(plugins, defaultPluginType)(withReact(withInline(plugins)(createEditor())));\n    }, []);\n    useEffect(function () {\n        // unfortunatly, slate broke the controlled input pattern. So we have to hack our way around it, see https://github.com/ianstormtaylor/slate/issues/4992\n        editor.children = data === null || data === void 0 ? void 0 : data.slate;\n        if (data.selection) {\n            try {\n                ReactEditor.focus(editor);\n            }\n            catch (e) {\n                // ignore, can happen\n            }\n            // update seleciton, if changed from outside (e.g. through undo)\n            Transforms.select(editor, data.selection);\n        }\n        else {\n            // deselect, otherwise slate might throw an eerror if cursor is now on a non existing dom node\n            Transforms.deselect(editor);\n        }\n    }, [data === null || data === void 0 ? void 0 : data.slate, data === null || data === void 0 ? void 0 : data.selection]);\n    var onChange = useCallback(function (v) {\n        if (!deepEquals(editor.children, data === null || data === void 0 ? void 0 : data.slate) ||\n            !deepEquals(editor.selection, data === null || data === void 0 ? void 0 : data.selection))\n            props.onChange({\n                slate: editor.children,\n                selection: editor.selection,\n            }, {\n                // mark as not undoable when state is same\n                // that happens if only selection was changed\n                notUndoable: deepEquals(editor.children, data === null || data === void 0 ? void 0 : data.slate),\n            });\n    }, [data === null || data === void 0 ? void 0 : data.slate]);\n    var initialValue = data === null || data === void 0 ? void 0 : data.slate;\n    return (React.createElement(DialogVisibleProvider, null,\n        React.createElement(Slate, { editor: editor, value: initialValue /*\n        this is confusingly only for the initial value since slate 0.70something, see https://github.com/ianstormtaylor/slate/issues/4992\n      */, onChange: onChange }, children)));\n};\nexport default SlateProvider;\n//# sourceMappingURL=SlateProvider.js.map"],"names":["objIsNode","obj","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","DialogContext","useDialogIsVisible","_a","useContext","visible","useSetDialogIsVisible","setVisible","children","_b","useState","useMemo","Provider","plugins","editor","isInline","isVoid","element","some","plugin","pluginType","object","type","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","result","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","this","v","op","TypeError","pop","length","defaultPluginType","insertData","htmlToSlate","data","html","slate","text","node","lines","nextWillbeParagraph","thisLine","nextLine","nextIsEmpty","thisLineText","getData","Transforms","JSON","parse","split","trim","props","createEditor","useEffect","selection","onChange","useCallback","deepEquals","notUndoable","initialValue","DialogVisibleProvider"],"sourceRoot":""}