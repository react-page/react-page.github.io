{"version":3,"file":"static/chunks/4986.e7e5340c85dd2b1e.js","mappings":"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","sources":["webpack://_N_E/../packages/editor/lib-es/core/components/hooks/actions.js","webpack://_N_E/../packages/editor/lib-es/core/actions/undo.js","webpack://_N_E/../packages/editor/lib-es/core/selector/focus.js","webpack://_N_E/../packages/editor/lib-es/core/components/hooks/focus.js","webpack://_N_E/../packages/editor/lib-es/core/utils/objIsNode.js","webpack://_N_E/../packages/editor/lib-es/core/components/Editable/FallbackDropArea.js","webpack://_N_E/../packages/editor/lib-es/core/components/hooks/display.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/utils/scrollIntoViewWithOffset.js","webpack://_N_E/../packages/editor/lib-es/core/components/Editable/hooks/useKeepScrollPosition.js","webpack://_N_E/../packages/editor/lib-es/core/service/hover/computeHover.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/InsertNew.js","webpack://_N_E/../packages/editor/lib-es/core/helper/throttle/index.js","webpack://_N_E/../packages/editor/lib-es/core/service/logger/index.js","webpack://_N_E/../packages/editor/lib-es/core/service/hover/input.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/Droppable/helper/dnd.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/Droppable/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Row/Droppable/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/ErrorCell/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/Draggable/useDragHandle.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/Handle/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/Draggable/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/PluginControls/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/PluginMissing.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/PluginComponent/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/Inner/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/MoveActions/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Cell/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Row/ResizableRowCell.js","webpack://_N_E/../packages/editor/lib-es/core/components/Row/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Editable/Inner/Rows.js","webpack://_N_E/../packages/editor/lib-es/core/components/hooks/value.js","webpack://_N_E/../packages/editor/lib-es/core/components/Editable/Inner/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/Editable/index.js","webpack://_N_E/../packages/editor/lib-es/core/components/HotKey/GlobalHotKeys.js","webpack://_N_E/../packages/editor/lib-es/core/Provider/DndProvider.js","webpack://_N_E/../packages/editor/lib-es/core/components/BlurGate.js","webpack://_N_E/../packages/editor/lib-es/core/components/hooks/callbacks.js","webpack://_N_E/../packages/editor/lib-es/core/Provider/CallbacksProvider.js","webpack://_N_E/../packages/editor/lib-es/core/migrations/serialzeValue.js","webpack://_N_E/../packages/editor/lib-es/core/Provider/EditorStoreProvider.js","webpack://_N_E/../packages/editor/lib-es/core/Provider/OptionsProvider.js","webpack://_N_E/../packages/editor/lib-es/core/Provider/RenderOptionsProvider.js","webpack://_N_E/../packages/editor/lib-es/core/Provider/index.js","webpack://_N_E/../packages/editor/lib-es/ui/PluginDrawer/Draggable/index.js","webpack://_N_E/../packages/editor/lib-es/ui/PluginDrawer/Item/index.js","webpack://_N_E/../packages/editor/lib-es/ui/PluginDrawer/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Trash/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/Button/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/ToggleEdit/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/ToggleInsert/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/ToggleLayout/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/TogglePreview/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/ToggleResize/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/UndoRedo/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/Zoom/index.js","webpack://_N_E/../packages/editor/lib-es/ui/Sidebar/index.js","webpack://_N_E/../packages/editor/lib-es/ui/MultiNodesBottomToolbar/DeleteAll.js","webpack://_N_E/../packages/editor/lib-es/ui/MultiNodesBottomToolbar/DuplicateAll.js","webpack://_N_E/../packages/editor/lib-es/ui/MultiNodesBottomToolbar/index.js","webpack://_N_E/../packages/editor/lib-es/ui/EditorUI/index.js","webpack://_N_E/../packages/editor/lib-es/editor/StickyWrapper.js","webpack://_N_E/../packages/editor/lib-es/editor/EditableEditor.js","webpack://_N_E/../packages/editor/lib-es/ui/AutoformControls/index.js","webpack://_N_E/../packages/editor/lib-es/ui/AutoformControls/makeUniformsSchema.js"],"sourcesContent":["import { useCallback } from 'react';\nimport { redo, undo } from '../../actions/undo';\nimport { useDispatch, useSelector } from '../../reduxConnect';\n/**\n * @returns function, that undos last change if called\n */\nexport var useUndo = function () {\n    var dispatch = useDispatch();\n    return useCallback(function () { return dispatch(undo()); }, [dispatch]);\n};\n/**\n * @returns function, that redos last change if called\n */\nexport var useRedo = function () {\n    var dispatch = useDispatch();\n    return useCallback(function () { return dispatch(redo()); }, [dispatch]);\n};\n/**\n * @returns whether user can undo\n */\nexport var useCanUndo = function () {\n    return useSelector(function (s) { return s.reactPage.values.past.length > 0; });\n};\n/**\n * @returns whether user can undo\n */\nexport var useCanRedo = function () {\n    return useSelector(function (s) { return s.reactPage.values.future.length > 0; });\n};\n//# sourceMappingURL=actions.js.map","import { ActionTypes } from 'redux-undo';\nexport var undo = function () { return ({\n    type: ActionTypes.UNDO,\n}); };\nexport var redo = function () { return ({\n    type: ActionTypes.REDO,\n}); };\n//# sourceMappingURL=undo.js.map","import { findNodeInState } from './editable';\nexport var focus = function (state) {\n    return state && state.reactPage && state.reactPage.focus;\n};\nexport var allFocusedNodeIds = function (state) {\n    var _a, _b, _c;\n    return ((_c = (_b = (_a = focus(state)) === null || _a === void 0 ? void 0 : _a.nodeIds) === null || _b === void 0 ? void 0 : _b.filter(function (n) { var _a; return (_a = findNodeInState(state, n)) === null || _a === void 0 ? void 0 : _a.node; })) !== null && _c !== void 0 ? _c : []);\n};\nexport var singleFocusedNode = function (state) {\n    var nodeIds = allFocusedNodeIds(state);\n    if ((nodeIds === null || nodeIds === void 0 ? void 0 : nodeIds.length) === 1)\n        return nodeIds[0];\n    return null;\n};\n//# sourceMappingURL=focus.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useEffect } from 'react';\nimport { useSelector } from '../../reduxConnect';\nimport { allFocusedNodeIds, focus, singleFocusedNode, } from '../../selector/focus';\n/**\n * @returns the current focused nodeId if just one or null\n */\nexport var useFocusedNodeId = function () {\n    return useSelector(singleFocusedNode);\n};\nexport var useAllFocusedNodeIds = function () {\n    return useSelector(allFocusedNodeIds);\n};\n/**\n *\n * @param id the id of the node (row/cell)\n * @returns true if the given node id is focused\n */\nexport var useIsFocused = function (id) {\n    return useSelector(function (state) { return allFocusedNodeIds(state).includes(id); });\n};\n/**\n *\n * @param id the id of the node (row/cell)\n * @returns true if ONLY the given node id is focused\n */\nexport var useIsExclusivlyFocused = function (id) {\n    return useSelector(function (state) { return singleFocusedNode(state) === id; });\n};\n/**\n *\n * @param id the id of the node\n * @param effect callback that is run when the given node is focused and the focus action demanded scrollToCell\n * @param deps effect deps array\n */\nexport var useScrollToViewEffect = function (id, effect, deps) {\n    var scrollToCell = useSelector(function (state) {\n        var f = focus(state);\n        var nodeId = singleFocusedNode(state);\n        if (!f || nodeId !== id) {\n            return null;\n        }\n        return f.scrollToCell;\n    });\n    useEffect(function () {\n        if (scrollToCell) {\n            return effect();\n        }\n    }, __spreadArray([scrollToCell], __read(deps), false));\n};\n//# sourceMappingURL=focus.js.map","// poor check\nexport var objIsNode = function (obj) {\n    if (!obj)\n        return false;\n    if (!('id' in obj)) {\n        return false;\n    }\n    return true;\n};\n//# sourceMappingURL=objIsNode.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React from 'react';\nimport { useCallback } from 'react';\nimport { useDrop } from 'react-dnd';\nimport { useCellIsAllowedHere, useInsertNew, useSetDisplayReferenceNodeId, } from '../hooks';\nvar FallbackDropArea = function (_a) {\n    var children = _a.children;\n    var insertNew = useInsertNew();\n    var isAllowed = useCellIsAllowedHere();\n    var _b = __read(useDrop({\n        accept: 'cell',\n        canDrop: function (item) { return isAllowed(item); },\n        drop: function (item, monitor) {\n            // fallback drop\n            if (!monitor.didDrop() && item.cell) {\n                insertNew(item.cell);\n            }\n        },\n    }), 2), dropRef = _b[1];\n    var setReference = useSetDisplayReferenceNodeId();\n    var clearReference = useCallback(function (e) {\n        var _a;\n        // if click was on the root, clear reference\n        if ((_a = e.target.classList) === null || _a === void 0 ? void 0 : _a.contains('react-page-editable'))\n            setReference(null);\n    }, [setReference]);\n    return (React.createElement(\"div\", { ref: dropRef, onClick: clearReference }, children));\n};\nexport default FallbackDropArea;\n//# sourceMappingURL=FallbackDropArea.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { useCallback } from 'react';\nimport { useDispatch, useSelector } from '../../reduxConnect';\nimport { setZoom } from '../../actions/display';\nimport { useOption } from './options';\nexport var useSetZoom = function () {\n    var dispatch = useDispatch();\n    return useCallback(function (zoom) { return dispatch(setZoom(zoom)); }, [dispatch]);\n};\n/**\n * @returns the current zoom\n */\nexport var useZoom = function () {\n    return useSelector(function (state) { return state.reactPage.display.zoom; });\n};\nexport var useZoomOut = function () {\n    var zoom = useZoom();\n    var zoomFactors = useOption('zoomFactors');\n    var setZoom = useSetZoom();\n    return useCallback(function () {\n        var newZoom = zoomFactors === null || zoomFactors === void 0 ? void 0 : zoomFactors.find(function (z) { return z < zoom; });\n        if (newZoom)\n            setZoom(newZoom);\n    }, [zoom, setZoom, zoomFactors]);\n};\nexport var useZoomIn = function () {\n    var zoom = useZoom();\n    var setZoom = useSetZoom();\n    var zoomFactors = useOption('zoomFactors');\n    return useCallback(function () {\n        var newZoom = __spreadArray([], __read((zoomFactors !== null && zoomFactors !== void 0 ? zoomFactors : [])), false).reverse().find(function (z) { return z > zoom; });\n        if (newZoom)\n            setZoom(newZoom);\n    }, [zoom, setZoom, zoomFactors]);\n};\nexport var useCanZoomOut = function () {\n    var _a;\n    var zoom = useZoom();\n    var zoomFactors = useOption('zoomFactors');\n    return (_a = zoomFactors === null || zoomFactors === void 0 ? void 0 : zoomFactors.some(function (z) { return z < zoom; })) !== null && _a !== void 0 ? _a : false;\n};\nexport var useCanZoomIn = function () {\n    var _a;\n    var zoom = useZoom();\n    var zoomFactors = useOption('zoomFactors');\n    return (_a = zoomFactors === null || zoomFactors === void 0 ? void 0 : zoomFactors.some(function (z) { return z > zoom; })) !== null && _a !== void 0 ? _a : false;\n};\n//# sourceMappingURL=display.js.map","export default (function (element, offset, behavior) {\n    if (offset === void 0) { offset = 0; }\n    if (behavior === void 0) { behavior = 'smooth'; }\n    if (!element) {\n        return;\n    }\n    var bodyRect = document.body.getBoundingClientRect().top;\n    var elementRect = element.getBoundingClientRect().top;\n    var elementPosition = elementRect - bodyRect;\n    var offsetPosition = elementPosition - offset;\n    window.scrollTo({\n        top: offsetPosition,\n        behavior: behavior,\n    });\n});\n//# sourceMappingURL=scrollIntoViewWithOffset.js.map","import throttle from 'lodash.throttle';\nimport React, { useEffect } from 'react';\nimport scrollIntoViewWithOffset from '../../Cell/utils/scrollIntoViewWithOffset';\nimport { useDisplayMode } from '../../hooks';\nfunction isElementInViewport(el) {\n    var rect = el.getBoundingClientRect();\n    return (rect.top >= 0 &&\n        rect.left >= 0 &&\n        rect.bottom <=\n            (window.innerHeight ||\n                document.documentElement.clientHeight) /*or $(window).height() */ &&\n        rect.right <=\n            (window.innerWidth ||\n                document.documentElement.clientWidth) /*or $(window).width() */);\n}\nexport var useKeepScrollPosition = function (ref) {\n    var mode = useDisplayMode();\n    var firstElementInViewPortref = React.useRef();\n    useEffect(function () {\n        var onScroll = throttle(function () {\n            if (ref.current) {\n                var firstInViewport = Array.prototype.find.call(ref.current.getElementsByClassName('react-page-cell'), function (cell) { return isElementInViewport(cell); });\n                if (firstInViewport) {\n                    firstElementInViewPortref.current = {\n                        el: firstInViewport,\n                        topOffset: firstInViewport.getBoundingClientRect().top,\n                    };\n                }\n                else {\n                    firstElementInViewPortref.current = undefined;\n                }\n            }\n        }, 600);\n        window.addEventListener('scroll', onScroll);\n        return function () {\n            window.removeEventListener('scroll', onScroll);\n        };\n    }, []);\n    useEffect(function () {\n        if (firstElementInViewPortref.current) {\n            var _a = firstElementInViewPortref.current, el_1 = _a.el, topOffset_1 = _a.topOffset;\n            setTimeout(function () {\n                scrollIntoViewWithOffset(el_1, topOffset_1, 'auto');\n            }, 0);\n        }\n    }, [mode]);\n};\n//# sourceMappingURL=useKeepScrollPosition.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar _a;\nimport { isRow } from '../../types';\nimport deepEquals from '../../utils/deepEquals';\nimport logger from '../logger';\n/**\n * NO (None): No drop zone.\n *\n * Corners are counted clockwise, beginning top left\n * C1 (Corner top left): Position decided by top left corner function\n * C2 (Corner top right): Position decided by top right corner function\n * C3 (Corner bottom right): Position decided by bottom right corner function\n * C4 (Corner bottom left): Position decided by bottom left corner function\n *\n * Above:\n * AH (Above here): above, same level\n * AA (Above of self or some ancestor): Above, compute active level using classification functions, e.g. log, sin, mx + t\n *\n * Below:\n * BH (Below here)\n * BA (Below of self or some ancestor)\n *\n * Left of:\n * LH (Left of here)\n * LA (Left of self or some ancestor)\n *\n * Right of:\n * RH (Right of here)\n * RA (Right of self or some ancestor)\n *\n * Inside / inline\n * IL (Inline left)\n * IR (Inline right)\n */\nexport var classes = {\n    NO: 0,\n    C1: 10,\n    C2: 11,\n    C3: 12,\n    C4: 13,\n    AH: 200,\n    AA: 201,\n    BH: 210,\n    BA: 211,\n    LH: 220,\n    LA: 221,\n    RH: 230,\n    RA: 231,\n    IL: 300,\n    IR: 301,\n};\nvar c = classes;\n/**\n * A list of matrices that are used to define the callback function.\n *\n * @type {{10x10: *[], 10x10-no-inline: *[]}}\n */\nvar MATRIX_LIST = {\n    '10x10': [\n        [c.C1, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.C2],\n        [c.LA, c.IL, c.IL, c.IL, c.AH, c.AH, c.IR, c.IR, c.IR, c.RA],\n        [c.LA, c.IL, c.IL, c.IL, c.AH, c.AH, c.IR, c.IR, c.IR, c.RA],\n        [c.LA, c.IL, c.IL, c.IL, c.AH, c.AH, c.IR, c.IR, c.IR, c.RA],\n        [c.LA, c.LH, c.LH, c.LH, c.C1, c.C2, c.RH, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.LH, c.C4, c.C3, c.RH, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.C4, c.BH, c.BH, c.C3, c.IR, c.RH, c.RA],\n        [c.LA, c.LH, c.C4, c.BH, c.BH, c.BH, c.BH, c.C3, c.RH, c.RA],\n        [c.LA, c.C4, c.BH, c.BH, c.BH, c.BH, c.BH, c.BH, c.C3, c.RA],\n        [c.C4, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.C3],\n    ],\n    '10x10-no-inline': [\n        [c.C1, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.AA, c.C2],\n        [c.LA, c.C1, c.AH, c.AH, c.AH, c.AH, c.AH, c.AH, c.C2, c.RA],\n        [c.LA, c.LH, c.C1, c.AH, c.AH, c.AH, c.AH, c.C2, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.C1, c.AH, c.AH, c.C2, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.LH, c.C1, c.C2, c.RH, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.LH, c.C4, c.C3, c.RH, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.LH, c.C4, c.BH, c.BH, c.C3, c.RH, c.RH, c.RA],\n        [c.LA, c.LH, c.C4, c.BH, c.BH, c.BH, c.BH, c.C3, c.RH, c.RA],\n        [c.LA, c.C4, c.BH, c.BH, c.BH, c.BH, c.BH, c.BH, c.C3, c.RA],\n        [c.C4, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.BA, c.C3],\n    ],\n};\n/**\n * Computes the average width and height for cells in a room.\n *\n * @param room\n * @param matrix\n * @returns {{x: number, y: number}}\n */\nvar getRoomScale = function (_a) {\n    var room = _a.room, matrix = _a.matrix;\n    var rows = matrix.length;\n    var cells = matrix[0].length;\n    var scalingX = room.width / cells;\n    var scalingY = room.height / rows;\n    return {\n        x: scalingX,\n        y: scalingY,\n    };\n};\n/**\n * Returns the index of the hover cell.\n *\n * @param mouse\n * @param scale\n */\nvar getMouseHoverCell = function (_a) {\n    var mouse = _a.mouse, scale = _a.scale;\n    return ({\n        cell: Math.floor(mouse.x / scale.x),\n        row: Math.floor(mouse.y / scale.y),\n    });\n};\n/**\n * Used for caching.\n */\nvar last = { '10x10': null, '10x10-no-inline': null };\nexport var computeHover = function (drag, hover, actions, _a) {\n    var _b, _c;\n    var room = _a.room, mouse = _a.mouse, cellPlugins = _a.cellPlugins;\n    var allowInlineNeighbours = (_c = (_b = cellPlugins.find(function (p) { return p.id === hover.pluginId; })) === null || _b === void 0 ? void 0 : _b.allowInlineNeighbours) !== null && _c !== void 0 ? _c : false;\n    var matrixName = allowInlineNeighbours ? '10x10' : '10x10-no-inline';\n    var matrix = MATRIX_LIST[matrixName];\n    var scale = getRoomScale({ room: room, matrix: matrix });\n    var hoverCell = getMouseHoverCell({ mouse: mouse, scale: scale });\n    var rows = matrix.length;\n    var cells = matrix[0].length;\n    if (hoverCell.row >= rows) {\n        hoverCell.row = rows - 1;\n    }\n    else if (hoverCell.row < 0) {\n        hoverCell.row = 0;\n    }\n    if (hoverCell.cell >= cells) {\n        hoverCell.cell = cells - 1;\n    }\n    else if (hoverCell.cell < 0) {\n        hoverCell.cell = 0;\n    }\n    var cell = matrix[hoverCell.row][hoverCell.cell];\n    if (!CALLBACK_LIST[cell]) {\n        logger.error('Matrix callback not found.', {\n            room: room,\n            mouse: mouse,\n            matrix: matrix,\n            scale: scale,\n            hoverCell: hoverCell,\n            rows: rows,\n            cells: cells,\n        });\n        return;\n    }\n    var all = {\n        item: drag.id,\n        hover: hover.id,\n        actions: actions,\n        ctx: {\n            room: room,\n            mouse: mouse,\n            position: hoverCell,\n            size: { rows: rows, cells: cells },\n            scale: scale,\n        },\n    };\n    if (deepEquals(all, last[matrixName])) {\n        return;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    last[matrixName] = all;\n    return CALLBACK_LIST[cell](drag, hover, actions, {\n        room: room,\n        mouse: mouse,\n        position: hoverCell,\n        size: { rows: rows, cells: cells },\n        cellPlugins: cellPlugins,\n        scale: scale,\n    });\n};\n/**\n * Return the mouse position relative to the cell.\n */\nvar relativeMousePosition = function (_a) {\n    var mouse = _a.mouse, position = _a.position, scale = _a.scale;\n    return ({\n        x: Math.round(mouse.x - position.cell * scale.x),\n        y: Math.round(mouse.y - position.row * scale.y),\n    });\n};\n/**\n * Computes the drop level based on the mouse position and the cell width.\n */\nexport var computeLevel = function (_a) {\n    var size = _a.size, _b = _a.level, level = _b === void 0 ? 0 : _b, position = _a.position;\n    if (size <= (level + 1) * 2) {\n        return Math.round(position / (size / level));\n    }\n    var spare = size - (level + 1) * 2;\n    var steps = [0];\n    var current = spare;\n    for (var i = 0; i <= level; i++) {\n        steps.push(steps[i] + current / 2);\n        current /= 2;\n        if (position >= steps[i] + i * 2 && position < steps[i + 1] + (i + 1) * 2) {\n            return i;\n        }\n    }\n    return level;\n};\n/**\n * Computes the horizontal drop level based on the mouse position.\n *\n * @param mouse\n * @param position\n * @param hover\n * @param scale\n * @param level\n * @param inv returns the inverse drop level. Usually true for left and above drop level computation.\n * @returns number\n */\nvar computeHorizontal = function (_a, inv) {\n    var mouse = _a.mouse, position = _a.position, hover = _a.hover, scale = _a.scale, _b = _a.level, level = _b === void 0 ? 0 : _b;\n    if (inv === void 0) { inv = false; }\n    var x = relativeMousePosition({ mouse: mouse, position: position, scale: scale }).x;\n    var at = computeLevel({ size: scale.x, position: x, level: level });\n    if (isRow(hover)) {\n        // Is row, always opt for lowest level\n        return level;\n    }\n    // If the hovered element is an inline element, level 0 would be directly besides it which doesn't work.\n    // Set it to 1 instead.\n    if (hover.inline && at === 0) {\n        at = 1;\n    }\n    return inv ? level - at : at;\n};\n/**\n * Computes the vertical drop level based on the mouse position.\n *\n * @returns number\n */\nvar computeVertical = function (_a, inv) {\n    var _b = _a.level, level = _b === void 0 ? 0 : _b, mouse = _a.mouse, hover = _a.hover, position = _a.position, scale = _a.scale;\n    if (inv === void 0) { inv = false; }\n    var y = relativeMousePosition({ mouse: mouse, position: position, scale: scale }).y;\n    var at = computeLevel({ size: scale.y, position: y, level: level });\n    if (isRow(hover)) {\n        // Is row, always opt for lowest level\n        return level;\n    }\n    // If the hovered element is an inline element, level 0 would be directly besides it which doesn't work.\n    // Set it to 1 instead.\n    if (hover.inline && at === 0) {\n        at = 1;\n    }\n    return inv ? level - at : at;\n};\nvar getDropLevel = function (hover) {\n    return !isRow(hover) && hover.inline ? 1 : 0;\n};\n/**\n * A list of callbacks.\n */\nexport var CALLBACK_LIST = (_a = {},\n    _a[c.NO] = function (item, hover, _a) {\n        var clear = _a.clear;\n        return clear();\n    },\n    /* corners */\n    _a[c.C1] = function (item, hover, _a, ctx) {\n        var leftOf = _a.leftOf, above = _a.above;\n        var mouse = relativeMousePosition(ctx);\n        var level = getDropLevel(hover);\n        if (mouse.x < mouse.y) {\n            return leftOf(item, hover, { level: level });\n        }\n        above(item, hover, { level: level });\n    },\n    _a[c.C2] = function (item, hover, _a, ctx) {\n        var rightOf = _a.rightOf, above = _a.above;\n        var mouse = relativeMousePosition(ctx);\n        var level = getDropLevel(hover);\n        if (mouse.x > mouse.y) {\n            return rightOf(item, hover, { level: level });\n        }\n        above(item, hover, { level: level });\n    },\n    _a[c.C3] = function (item, hover, _a, ctx) {\n        var rightOf = _a.rightOf, below = _a.below;\n        var mouse = relativeMousePosition(ctx);\n        var level = getDropLevel(hover);\n        if (mouse.x > mouse.y) {\n            return rightOf(item, hover, { level: level });\n        }\n        below(item, hover, { level: level });\n    },\n    _a[c.C4] = function (item, hover, _a, ctx) {\n        var leftOf = _a.leftOf, below = _a.below;\n        var mouse = relativeMousePosition(ctx);\n        var level = getDropLevel(hover);\n        if (mouse.x < mouse.y) {\n            return leftOf(item, hover, { level: level });\n        }\n        below(item, hover, { level: level });\n    },\n    /* heres */\n    _a[c.AH] = function (item, hover, _a) {\n        var above = _a.above;\n        var level = getDropLevel(hover);\n        above(item, hover, { level: level });\n    },\n    _a[c.BH] = function (item, hover, _a) {\n        var below = _a.below;\n        var level = getDropLevel(hover);\n        below(item, hover, { level: level });\n    },\n    _a[c.LH] = function (item, hover, _a) {\n        var leftOf = _a.leftOf;\n        var level = getDropLevel(hover);\n        leftOf(item, hover, { level: level });\n    },\n    _a[c.RH] = function (item, hover, _a) {\n        var rightOf = _a.rightOf;\n        var level = getDropLevel(hover);\n        rightOf(item, hover, { level: level });\n    },\n    /* ancestors */\n    _a[c.AA] = function (item, hover, _a, ctx) {\n        var _b;\n        var above = _a.above;\n        return above(item, hover, {\n            level: computeVertical(__assign(__assign({}, ctx), { hover: hover, level: (_b = hover.levels) === null || _b === void 0 ? void 0 : _b.above }), true),\n        });\n    },\n    _a[c.BA] = function (item, hover, _a, ctx) {\n        var _b;\n        var below = _a.below;\n        return below(item, hover, {\n            level: computeVertical(__assign(__assign({}, ctx), { hover: hover, level: (_b = hover.levels) === null || _b === void 0 ? void 0 : _b.below })),\n        });\n    },\n    _a[c.LA] = function (item, hover, _a, ctx) {\n        var _b;\n        var leftOf = _a.leftOf;\n        return leftOf(item, hover, {\n            level: computeHorizontal(__assign(__assign({}, ctx), { hover: hover, level: (_b = hover.levels) === null || _b === void 0 ? void 0 : _b.left }), true),\n        });\n    },\n    _a[c.RA] = function (item, hover, _a, ctx) {\n        var _b;\n        var rightOf = _a.rightOf;\n        return rightOf(item, hover, {\n            level: computeHorizontal(__assign(__assign({}, ctx), { hover: hover, level: (_b = hover.levels) === null || _b === void 0 ? void 0 : _b.right })),\n        });\n    },\n    /* inline */\n    _a[c.IL] = function (item, hover, _a, _b) {\n        var _c;\n        var inlineLeft = _a.inlineLeft, leftOf = _a.leftOf;\n        var cellPlugins = _b.cellPlugins;\n        if (isRow(item) || isRow(hover)) {\n            return;\n        }\n        var inline = hover.inline, hasInlineNeighbour = hover.hasInlineNeighbour;\n        var plugin = cellPlugins.find(function (p) {\n            var _a;\n            return p.id ===\n                (typeof item.plugin === 'string' ? item.plugin : (_a = item.plugin) === null || _a === void 0 ? void 0 : _a.id);\n        });\n        var isInlineable = (_c = plugin === null || plugin === void 0 ? void 0 : plugin.isInlineable) !== null && _c !== void 0 ? _c : false;\n        if (inline || !isInlineable) {\n            return leftOf(item, hover, { level: 2 });\n        }\n        if (hasInlineNeighbour && hasInlineNeighbour !== item.id) {\n            return leftOf(item, hover, { level: 2 });\n        }\n        if (hasInlineNeighbour &&\n            hasInlineNeighbour === item.id &&\n            item.inline === 'left') {\n            return leftOf(item, hover, { level: 2 });\n        }\n        inlineLeft(item, hover);\n    },\n    _a[c.IR] = function (item, hover, _a, _b) {\n        var _c;\n        var inlineRight = _a.inlineRight, rightOf = _a.rightOf;\n        var cellPlugins = _b.cellPlugins;\n        if (isRow(item) || isRow(hover)) {\n            return;\n        }\n        var inline = hover.inline, hasInlineNeighbour = hover.hasInlineNeighbour;\n        var plugin = cellPlugins.find(function (p) {\n            var _a;\n            return p.id ===\n                (typeof item.plugin === 'string' ? item.plugin : (_a = item.plugin) === null || _a === void 0 ? void 0 : _a.id);\n        });\n        var isInlineable = (_c = plugin === null || plugin === void 0 ? void 0 : plugin.isInlineable) !== null && _c !== void 0 ? _c : false;\n        if (inline || !isInlineable) {\n            return rightOf(item, hover, { level: 2 });\n        }\n        if (hasInlineNeighbour && hasInlineNeighbour !== item.id) {\n            return rightOf(item, hover, { level: 2 });\n        }\n        if (hasInlineNeighbour &&\n            hasInlineNeighbour === item.id &&\n            item.inline === 'right') {\n            return rightOf(item, hover, { level: 2 });\n        }\n        inlineRight(item, hover);\n    },\n    _a);\n//# sourceMappingURL=computeHover.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React from 'react';\nimport { useDrop } from 'react-dnd';\nimport { useCellIsAllowedHere, useInsertNew, useIsLayoutMode, useIsPreviewMode, useSetDisplayReferenceNodeId, useSetInsertMode, } from '../hooks';\nvar InsertNew = function (_a) {\n    var parentCellId = _a.parentCellId;\n    var setInsertMode = useSetInsertMode();\n    var insertNew = useInsertNew(parentCellId);\n    var isPreviewMode = useIsPreviewMode();\n    var isLayoutMode = useIsLayoutMode();\n    var setReferenceNodeId = useSetDisplayReferenceNodeId();\n    var checkIfAllowed = useCellIsAllowedHere(parentCellId);\n    var _b = __read(useDrop({\n        accept: 'cell',\n        canDrop: function (item) {\n            return checkIfAllowed(item);\n        },\n        collect: function (monitor) { return ({\n            isOver: monitor.isOver(),\n            isAllowed: checkIfAllowed(monitor.getItem()),\n        }); },\n        drop: function (item, monitor) {\n            // fallback drop\n            if (!monitor.didDrop() && item.cell) {\n                insertNew(item.cell);\n            }\n        },\n    }), 2), _c = _b[0], isOver = _c.isOver, isAllowed = _c.isAllowed, dropRef = _b[1];\n    if (isPreviewMode)\n        return null;\n    return (React.createElement(\"div\", { ref: dropRef, className: 'react-page-cell-insert-new' + (isOver && isAllowed ? ' hover' : ''), style: {\n            pointerEvents: 'all',\n            zIndex: isLayoutMode ? 10 : 1,\n            overflow: 'hidden',\n            width: '50%',\n            minWidth: 120,\n            margin: 'auto',\n            cursor: isOver && !isAllowed ? 'not-allowed' : 'pointer',\n        }, onClick: function (e) {\n            e.stopPropagation();\n            setReferenceNodeId(parentCellId);\n            setInsertMode();\n        } },\n        React.createElement(\"div\", { className: \"react-page-cell-insert-new-icon\" },\n            React.createElement(\"svg\", { focusable: \"false\", \"aria-hidden\": \"true\", viewBox: \"0 0 24 24\", \"data-testid\": \"AddIcon\" },\n                React.createElement(\"path\", { d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" })))));\n};\nexport default React.memo(InsertNew);\n//# sourceMappingURL=InsertNew.js.map","import { isProduction } from '../../const';\nexport var delay = isProduction ? 40 : 60;\n//# sourceMappingURL=index.js.map","// tslint:disable:no-console\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar trace = function () {\n    var _a, _b;\n    var e = new Error('dummy');\n    return ((_b = (_a = e.stack) === null || _a === void 0 ? void 0 : _a.replace(/^[^(]+?[\\n$]/gm, '').replace(/^\\s+at\\s+/gm, '').replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@').split('\\n')) !== null && _b !== void 0 ? _b : []);\n};\nvar Logger = /** @class */ (function () {\n    function Logger() {\n    }\n    /**\n     * Logs a warning. Warnings are things that are exceptional, but easily to recover from.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.warn.apply(console, __spreadArray(['Warning:'], __read(args), false));\n    };\n    /**\n     * Logs a debug message. Debug messages are things that help developers debugging things.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.debug = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.log.apply(console, __spreadArray(['Debug:'], __read(args), false));\n    };\n    /**\n     * Logs an info. Infos are things that might be interesting for someone who needs to take a closer look.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.info = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.log.apply(console, __spreadArray(['Info:'], __read(args), false));\n    };\n    /**\n     * Logs an error. Error are things that are exceptional, but can be recovered from.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.error = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.error.apply(console, __spreadArray(['Error:'], __read(args), false));\n        console.error('Trace:', trace());\n    };\n    /**\n     * Logs a fatal error. Fatal errors are things that are exceptional and can not be recovered from.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.fatal = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.error.apply(console, __spreadArray(['Fatal:'], __read(args), false));\n        console.error('Trace:', trace());\n        throw new Error(args.join(' '));\n    };\n    /**\n     * Logs a message.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Logger.prototype.log = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        console.log.apply(console, __spreadArray(['Fatal:'], __read(args), false));\n        console.log('Trace:', trace());\n    };\n    return Logger;\n}());\nexport { Logger };\nvar instance = new Logger();\nexport default instance;\n//# sourceMappingURL=index.js.map","import { computeHover } from './computeHover';\nvar computeCurrentDropPosition = function (actions, hover, drag, monitor, element, cellPlugins) {\n    var mousePosition = monitor.getClientOffset();\n    var componentPosition = element.getBoundingClientRect();\n    var room = {\n        height: componentPosition.bottom - componentPosition.top,\n        width: componentPosition.right - componentPosition.left,\n    };\n    if (!mousePosition) {\n        return;\n    }\n    var mouse = {\n        y: mousePosition.y - componentPosition.top,\n        x: mousePosition.x - componentPosition.left,\n    };\n    computeHover(drag, hover, actions, {\n        room: room,\n        mouse: mouse,\n        cellPlugins: cellPlugins,\n    });\n};\nexport var computeAndDispatchInsert = function (hover, drag, monitor, element, actions, cellPlugins) {\n    return computeCurrentDropPosition(actions, hover, drag, monitor, element, cellPlugins);\n};\nexport var computeAndDispatchHover = function (hover, drag, monitor, element, actions, cellPlugins) {\n    return computeCurrentDropPosition(actions, hover, drag, monitor, element, cellPlugins);\n};\n//# sourceMappingURL=input.js.map","import throttle from 'lodash.throttle';\nimport { delay } from '../../../../helper/throttle';\nimport { computeAndDispatchHover, computeAndDispatchInsert, } from '../../../../service/hover/input';\nimport logger from '../../../../service/logger';\nvar last = { hoverId: '', dragId: '' };\nvar shouldClear = function (hoverId, dragId) {\n    if (hoverId === last.hoverId && dragId === last.dragId) {\n        return false;\n    }\n    last = { hoverId: hoverId, dragId: dragId };\n    return true;\n};\nexport var onHover = throttle(function (target, monitor, element, actions, cellPlugins) {\n    var _a;\n    var drag = monitor.getItem();\n    if (!(drag === null || drag === void 0 ? void 0 : drag.cell) || !target) {\n        // item undefined, happens when throttle triggers after drop\n        return;\n    }\n    if (drag.cell.id === target.id) {\n        // If hovering over itself, do nothing\n        if (shouldClear(target.id, drag.cell.id)) {\n            actions.clear();\n        }\n        return;\n    }\n    else if (!monitor.isOver({ shallow: true })) {\n        // If hovering over ancestor cell, do nothing (we are going to propagate later in the tree anyways)\n        return;\n    }\n    else if (drag.cell.id && ((_a = target.ancestorIds) === null || _a === void 0 ? void 0 : _a.includes(drag.cell.id))) {\n        if (shouldClear(target.id, drag.cell.id)) {\n            actions.clear();\n        }\n        return;\n    }\n    else if (!target.id) {\n        // If hovering over something that isn't a cell or hasn't an id, do nothing. Should be an edge case\n        logger.warn('Canceled cell drop, no id given.', target, drag);\n        return;\n    }\n    last = { hoverId: target.id, dragId: drag.cell.id };\n    computeAndDispatchHover(target, drag.cell, monitor, element, actions, cellPlugins);\n}, delay, { leading: false });\nexport var onDrop = function (target, monitor, element, actions, cellPlugins) {\n    var _a;\n    var drag = monitor.getItem();\n    if (!drag.cell)\n        return;\n    if (monitor.didDrop() || !monitor.isOver({ shallow: true }) || !target) {\n        // If the item drop occurred deeper down the tree, don't do anything\n        return;\n    }\n    else if (drag.cell.id === target.id) {\n        // If the item being dropped on itself do nothing\n        actions.cancelCellDrag();\n        return;\n    }\n    else if (target &&\n        drag.cell.id &&\n        ((_a = target.ancestorIds) === null || _a === void 0 ? void 0 : _a.includes(drag.cell.id))) {\n        // If hovering over a child of itself, don't propagate further\n        actions.cancelCellDrag();\n        return;\n    }\n    last = { hoverId: target.id, dragId: drag.cell.id };\n    computeAndDispatchInsert(target, drag.cell, monitor, element, actions, cellPlugins);\n};\n//# sourceMappingURL=dnd.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport classNames from 'classnames';\nimport React, { useCallback, useEffect } from 'react';\nimport { useDrop } from 'react-dnd';\nimport { useSelector } from '../../../reduxConnect';\nimport { useNodeAsHoverTarget, useCellHasPlugin, useCellIsAllowedHere, useCellSpacing, useDropActions, useHoverActions, useIsInsertMode, useIsLayoutMode, useNodeHoverPosition, usePluginOfCell, useOption, useAllCellPluginsForNode, } from '../../hooks';\nimport { onDrop, onHover } from './helper/dnd';\nexport var useCellDrop = function (nodeId) {\n    var _a;\n    var ref = React.useRef();\n    var hoverTarget = useNodeAsHoverTarget(nodeId);\n    var targetParentNodeId = (_a = hoverTarget === null || hoverTarget === void 0 ? void 0 : hoverTarget.ancestorIds) === null || _a === void 0 ? void 0 : _a[0];\n    var checkIfAllowed = useCellIsAllowedHere(targetParentNodeId);\n    var plugin = usePluginOfCell(nodeId);\n    var cellPlugins = useAllCellPluginsForNode(targetParentNodeId);\n    var hoverActions = useHoverActions();\n    var dropActions = useDropActions(targetParentNodeId);\n    var isHoveringOverThis = useSelector(function (state) { var _a; return ((_a = state.reactPage.hover) === null || _a === void 0 ? void 0 : _a.nodeId) === nodeId; });\n    var _b = __read(useDrop({\n        accept: 'cell',\n        canDrop: function (item) {\n            var _a;\n            if (!item.cell) {\n                return false;\n            }\n            // check if plugin is allowed here\n            if (!checkIfAllowed(item)) {\n                return false;\n            }\n            if (plugin === null || plugin === void 0 ? void 0 : plugin.allowNeighbour) {\n                if (!plugin.allowNeighbour(item.cell)) {\n                    return false;\n                }\n            }\n            return (item.cell.id !== nodeId &&\n                !(item.cell.id && ((_a = hoverTarget === null || hoverTarget === void 0 ? void 0 : hoverTarget.ancestorIds) === null || _a === void 0 ? void 0 : _a.includes(item.cell.id))));\n        },\n        collect: function (monitor) { return ({\n            isOver: monitor.isOver(),\n            isAllowed: checkIfAllowed(monitor.getItem()),\n        }); },\n        hover: function (item, monitor) {\n            if (!item.cell || !hoverTarget || !ref.current) {\n                return false;\n            }\n            if (plugin === null || plugin === void 0 ? void 0 : plugin.allowNeighbour) {\n                if (!plugin.allowNeighbour(item.cell)) {\n                    return false;\n                }\n            }\n            onHover(hoverTarget, monitor, ref.current, hoverActions, cellPlugins);\n        },\n        drop: function (item, monitor) {\n            if (!hoverTarget || !ref.current) {\n                return;\n            }\n            onDrop(hoverTarget, monitor, ref.current, dropActions, cellPlugins);\n        },\n    }), 2), _c = _b[0], isOver = _c.isOver, isAllowed = _c.isAllowed, dropRef = _b[1];\n    useEffect(function () {\n        if (!isOver && isHoveringOverThis) {\n            hoverActions.clear();\n        }\n    }, [isOver, isHoveringOverThis, hoverActions.clear]);\n    // see https://github.com/react-dnd/react-dnd/issues/1955\n    var attach = useCallback(function (domElement) {\n        dropRef(domElement);\n        ref.current = domElement;\n        // use dom element here for measuring\n    }, [dropRef]);\n    return [attach, isAllowed];\n};\nvar Droppable = function (props) {\n    var _a;\n    var _b;\n    var isLayoutMode = useIsLayoutMode();\n    var isInsertMode = useIsInsertMode();\n    var _c = __read(useCellDrop(props.nodeId), 2), attach = _c[0], isAllowed = _c[1];\n    var hoverPosition = useNodeHoverPosition(props.nodeId);\n    var allowMoveInEditMode = useOption('allowMoveInEditMode');\n    var hasPlugin = useCellHasPlugin(props.nodeId);\n    var cellSpacingY = ((_b = useCellSpacing()) !== null && _b !== void 0 ? _b : { y: 0 }).y;\n    var needVerticalMargin = !props.isLeaf && !hasPlugin;\n    if (!(isLayoutMode || isInsertMode) && !allowMoveInEditMode) {\n        return (React.createElement(\"div\", { className: 'react-page-cell-droppable-container' }, props.children));\n    }\n    return (React.createElement(\"div\", { ref: attach, style: {\n            height: '100%',\n        }, className: \"react-page-cell-droppable\" },\n        React.createElement(\"div\", { style: {\n                position: 'absolute',\n                pointerEvents: 'none',\n                top: needVerticalMargin ? \"\".concat(cellSpacingY / 2, \"px\") : 0,\n                left: 0,\n                bottom: needVerticalMargin ? \"\".concat(cellSpacingY / 2, \"px\") : 0,\n                right: 0,\n            }, className: classNames((_a = {\n                    'react-page-cell-droppable-not-allowed': !isAllowed,\n                    'react-page-cell-droppable-is-over-current': isAllowed && hoverPosition\n                },\n                _a[\"react-page-cell-droppable-is-over-\".concat(hoverPosition)] = isAllowed && hoverPosition,\n                _a['react-page-cell-droppable-leaf'] = props.isLeaf,\n                _a)) }),\n        props.children));\n};\nexport default Droppable;\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React from 'react';\nimport { useCellDrop } from '../../Cell/Droppable';\nimport { useIsInsertMode, useIsLayoutMode } from '../../hooks';\nvar Droppable = function (_a) {\n    var children = _a.children, nodeId = _a.nodeId;\n    var isLayoutMode = useIsLayoutMode();\n    var isInsertMode = useIsInsertMode();\n    var _b = __read(useCellDrop(nodeId), 2), ref = _b[0], isAllowed = _b[1];\n    if (!(isLayoutMode || isInsertMode)) {\n        return React.createElement(\"div\", { className: \"react-page-row-droppable-container\" }, children);\n    }\n    return (React.createElement(\"div\", { ref: ref, className: \"react-page-row-droppable\" }, children));\n};\nexport default Droppable;\n//# sourceMappingURL=index.js.map","import React from 'react';\nimport { useIsEditMode, useRemoveCell, useUiTranslator } from '../../hooks';\nvar ErrorCell = function (_a) {\n    var nodeId = _a.nodeId, error = _a.error;\n    var isEditMode = useIsEditMode();\n    var removeCell = useRemoveCell(nodeId);\n    var t = useUiTranslator().t;\n    return (React.createElement(\"div\", { className: \"react-page-cell-error\" },\n        React.createElement(\"strong\", null, t('An error occurred!')),\n        React.createElement(\"small\", null,\n            React.createElement(\"dl\", null,\n                React.createElement(\"dt\", null, t('Cause:')),\n                React.createElement(\"dd\", null, error.message),\n                React.createElement(\"dt\", null, t('Cell:')),\n                React.createElement(\"dd\", null, nodeId))),\n        isEditMode ? (React.createElement(\"button\", { onClick: function () { return removeCell(); } }, t('Remove'))) : null));\n};\nexport default ErrorCell;\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { useDrag, DragPreviewImage } from 'react-dnd';\nimport { useCell, useHoverActions } from '../../hooks';\nimport React from 'react';\nexport var dragIcon = \n// tslint:disable-next-line:max-line-length\n'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAhCAYAAACbffiEAAAA6UlEQVRYhe2ZQQ6CMBBFX0njHg7ESXTp1p3uvIBewc3Em3AfdelSFwRDCAm01JRO+pa0lP8zzc9kMCKyAa7AFqhIixdwB44WuACHuHq8KWm1vwtgF1lMCPaWkevUNE3Qr9R17XTu1P5uvUdV+IpbG2qMGBH5xBYRAjUVUWPEjj10SS3XRFry3kha/VBTETVGcmqtDTVGFqdWn7k9ku96f88QNRVRYySn1tpQY8QptXz7qinmnpt7rZTIqbU21BgJ2mv1+XfCDVFTETVGjIg8SG8KP+RZ0I7lU+dmgRNgaKfyZVw9znT/R85fOHJJE77U6UcAAAAASUVORK5CYII=';\nexport var useDragHandle = function (nodeId, enabled) {\n    if (enabled === void 0) { enabled = true; }\n    var actions = useHoverActions();\n    var cell = useCell(nodeId);\n    var _a = __read(useDrag({\n        canDrag: enabled,\n        item: function () {\n            actions.dragCell(nodeId);\n            return { cell: cell };\n        },\n        type: 'cell',\n        collect: function (monitor) { return ({\n            isDragging: monitor.isDragging(),\n        }); },\n        end: function (item, monitor) {\n            if (monitor.didDrop()) {\n                // If the item drop occurred deeper down the tree, don't do anything\n                return;\n            }\n            // If drag ended but drop did not occur, cancel dragging\n            actions.cancelCellDrag();\n        },\n    }), 3), isDragging = _a[0].isDragging, dragRef = _a[1], preview = _a[2];\n    var previewElement = React.createElement(DragPreviewImage, { connect: preview, src: dragIcon });\n    return [isDragging, dragRef, previewElement];\n};\n//# sourceMappingURL=useDragHandle.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useFocusCell, useIsLayoutMode, useOption, usePluginOfCell, useUiTranslator, } from '../../hooks';\nimport { useDragHandle } from '../Draggable/useDragHandle';\nvar Handle = function (_a) {\n    var nodeId = _a.nodeId;\n    var allowMoveInEditMode = useOption('allowMoveInEditMode');\n    var isLayoutMode = useIsLayoutMode();\n    var dragEnabled = allowMoveInEditMode || isLayoutMode;\n    var _b = __read(useDragHandle(nodeId, dragEnabled), 3), isDragging = _b[0], dragRef = _b[1], previewElement = _b[2];\n    var focus = useFocusCell(nodeId);\n    var plugin = usePluginOfCell(nodeId);\n    var t = useUiTranslator().t;\n    if (!plugin) {\n        return null;\n    }\n    return (React.createElement(React.Fragment, null,\n        previewElement,\n        React.createElement(\"div\", { className: classNames('react-page-cell-handle', {\n                'react-page-cell-handle-drag-enabled': dragEnabled,\n                'react-page-cell-handle-is-dragging': isDragging,\n            }), ref: dragRef, onClick: function (e) {\n                var mode = e.metaKey || e.ctrlKey ? 'add' : 'replace';\n                focus(false, mode);\n            } }, t((plugin === null || plugin === void 0 ? void 0 : plugin.title) || (plugin === null || plugin === void 0 ? void 0 : plugin.text)))));\n};\nexport default React.memo(Handle);\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useCell, useFocusCell, useIsLayoutMode, useOption } from '../../hooks';\nimport { useDragHandle } from './useDragHandle';\nvar DefaultSmallHandle = function (_a) {\n    var onClick = _a.onClick;\n    return (React.createElement(\"div\", { className: \"react-page-cell-draggable-overlay-handle\", onClick: onClick },\n        React.createElement(\"div\", { className: \"react-page-cell-draggable-overlay-handle-icon\" })));\n};\nvar Draggable = function (_a) {\n    var _b;\n    var _c;\n    var isLeaf = _a.isLeaf, children = _a.children, nodeId = _a.nodeId;\n    var cell = useCell(nodeId);\n    var _d = __read(useDragHandle(nodeId), 3), isDragging = _d[0], dragRef = _d[1], previewElement = _d[2];\n    var focus = useFocusCell(nodeId);\n    var isLayoutMode = useIsLayoutMode();\n    var allowMoveInEditMode = useOption('allowMoveInEditMode');\n    var components = useOption('components');\n    var ResizeHandle = (_c = components === null || components === void 0 ? void 0 : components.EditModeResizeHandle) !== null && _c !== void 0 ? _c : DefaultSmallHandle;\n    return (React.createElement(React.Fragment, null,\n        previewElement,\n        React.createElement(\"div\", { ref: isLayoutMode ? dragRef : undefined, style: {\n                height: '100%',\n            }, className: classNames({\n                'react-page-cell-draggable-in-edit': !isLayoutMode && allowMoveInEditMode,\n                'react-page-cell-draggable': isLayoutMode,\n                'react-page-cell-draggable-is-dragging': isDragging,\n            }) },\n            isLayoutMode ? (React.createElement(\"div\", { onClick: function (e) {\n                    var mode = e.metaKey || e.ctrlKey ? 'add' : 'replace';\n                    focus(false, mode);\n                }, className: classNames((_b = {\n                        'react-page-cell-draggable-overlay': isLayoutMode\n                    },\n                    _b[\"react-page-cell-draggable-inline-\".concat(cell === null || cell === void 0 ? void 0 : cell.inline)] = cell === null || cell === void 0 ? void 0 : cell.inline,\n                    _b['react-page-cell-draggable-leaf'] = isLeaf,\n                    _b)) })) : allowMoveInEditMode ? (React.createElement(\"div\", { ref: dragRef },\n                React.createElement(ResizeHandle, { onClick: focus }))) : null,\n            children)));\n};\nexport default Draggable;\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { Tab, Tabs } from '@mui/material';\nimport React, { useState } from 'react';\nimport { AutoformControls } from '../../../../ui';\nvar ControlsList = React.memo(function (_a) {\n    var _b;\n    var controls = _a.controls, componentProps = _a.componentProps;\n    var _c = __read(useState(0), 2), tab = _c[0], setTab = _c[1];\n    var activeControls = (_b = controls[tab]) === null || _b === void 0 ? void 0 : _b.controls;\n    return (React.createElement(\"div\", { style: {\n            display: 'flex',\n            flexDirection: 'row',\n        } },\n        React.createElement(Tabs, { sx: {\n                marginTop: '-12px',\n                marginBottom: '-12px',\n                marginLeft: '-24px',\n                alignItems: 'flex-start',\n                backgroundColor: function (theme) { return theme.palette.background.default; },\n            }, value: tab, onChange: function (e, v) { return setTab(v); }, orientation: \"vertical\", variant: \"scrollable\" }, controls.map(function (t, index) { return (React.createElement(Tab, { sx: {\n                alignItems: 'flex-start',\n            }, label: t.title, key: index })); })),\n        activeControls ? (React.createElement(\"div\", { style: {\n                flex: 1,\n                marginLeft: 24,\n                display: 'flex',\n            } },\n            React.createElement(Controls, { controls: activeControls, componentProps: componentProps }))) : null));\n});\nvar Controls = React.memo(function (_a) {\n    var controls = _a.controls, componentProps = _a.componentProps;\n    var pluginControls = null;\n    if (Array.isArray(controls)) {\n        return React.createElement(ControlsList, { componentProps: componentProps, controls: controls });\n    }\n    if ((controls === null || controls === void 0 ? void 0 : controls.type) === 'custom') {\n        var Component = controls.Component;\n        pluginControls = React.createElement(Component, __assign({}, componentProps, controls));\n    }\n    else if ((controls === null || controls === void 0 ? void 0 : controls.type) === 'autoform') {\n        pluginControls = React.createElement(AutoformControls, __assign({}, componentProps, controls));\n    }\n    return React.createElement(\"div\", { style: { overflow: 'auto', flex: 1 } }, pluginControls);\n});\nvar PluginControls = function (_a) {\n    var controls = _a.controls, componentProps = _a.componentProps;\n    return (React.createElement(\"div\", { style: {\n            maxHeight: '50vh',\n            // if it has tabs, stretch to avoid jumping tabs\n            width: Array.isArray(controls) ? '100vw' : undefined,\n            maxWidth: '100%',\n            display: 'flex',\n        } },\n        React.createElement(Controls, { controls: controls, componentProps: componentProps })));\n};\nexport default React.memo(PluginControls);\n//# sourceMappingURL=index.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nvar PluginMissing = function (_a) {\n    var children = _a.children, props = __rest(_a, [\"children\"]);\n    return (React.createElement(\"div\", null,\n        React.createElement(\"div\", { style: {\n                backgroundColor: 'red',\n                padding: '8px',\n                border: '1px solid black',\n                margin: '2px',\n                overflowX: 'scroll',\n            } },\n            \"The requested plugin `\",\n            props.pluginId,\n            \"` could not be found.\",\n            React.createElement(\"button\", { onClick: props.remove }, \"Delete Plugin\"),\n            React.createElement(\"pre\", null, JSON.stringify(props, null, 2))),\n        children));\n};\nexport default PluginMissing;\n//# sourceMappingURL=PluginMissing.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React, { useMemo } from 'react';\nimport { BottomToolbar } from '../../../../ui';\nimport { usePluginOfCell, useDebouncedCellData, useIsEditMode, useIsPreviewMode, useLang, useRemoveCell, useCellProps, useOption, useIsExclusivlyFocused, } from '../../hooks';\nimport PluginControls from '../PluginControls';\nimport PluginMissing from '../PluginMissing';\nimport NoopProvider from '../NoopProvider';\nvar PluginComponent = function (_a) {\n    var _b, _c;\n    var nodeId = _a.nodeId, children = _a.children, hasChildren = _a.hasChildren;\n    var lang = useLang();\n    var components = useOption('components');\n    var CustomPluginMissing = components === null || components === void 0 ? void 0 : components.CellPluginMissing;\n    var isPreviewMode = useIsPreviewMode();\n    var isEditMode = useIsEditMode();\n    var _d = __read(useDebouncedCellData(nodeId), 2), data = _d[0], onChange = _d[1];\n    var pluginId = useCellProps(nodeId, function (c) { var _a; return (_a = c === null || c === void 0 ? void 0 : c.plugin) === null || _a === void 0 ? void 0 : _a.id; });\n    var plugin = usePluginOfCell(nodeId);\n    var focused = useIsExclusivlyFocused(nodeId);\n    var hasInlineNeighbour = useCellProps(nodeId, function (c) { return c === null || c === void 0 ? void 0 : c.hasInlineNeighbour; });\n    var Renderer = plugin === null || plugin === void 0 ? void 0 : plugin.Renderer;\n    var Missing = CustomPluginMissing !== null && CustomPluginMissing !== void 0 ? CustomPluginMissing : PluginMissing;\n    var Provider = (_b = plugin === null || plugin === void 0 ? void 0 : plugin.Provider) !== null && _b !== void 0 ? _b : NoopProvider;\n    var remove = useRemoveCell(nodeId);\n    var Toolbar = (_c = components === null || components === void 0 ? void 0 : components.BottomToolbar) !== null && _c !== void 0 ? _c : BottomToolbar;\n    var componentProps = useMemo(function () { return ({\n        nodeId: nodeId,\n        lang: lang,\n        data: data,\n        pluginConfig: plugin,\n        focused: isEditMode && focused,\n        readOnly: !isEditMode,\n        onChange: onChange,\n        isEditMode: isEditMode,\n        isPreviewMode: isPreviewMode,\n        remove: remove,\n    }); }, [\n        nodeId,\n        lang,\n        data,\n        plugin,\n        isEditMode,\n        focused,\n        onChange,\n        isEditMode,\n        isPreviewMode,\n        remove,\n    ]);\n    // In case of non-zero cell spacing, nested layouts (layout plugins with children) should have their\n    // margin collapsing functionality off. The simplest solution is to use display:flex for the below wrapping <div>.\n    // This however is not compatible with inline elements flotation, so if a cell has inline neighbors, we are going\n    // to have to keep display:block style. Layout plugins with inline cell support will have to take care of\n    // margin collapsing internally on their own.\n    var display = hasInlineNeighbour\n        ? {}\n        : {\n            display: 'flex',\n            flexDirection: 'column',\n        };\n    return (React.createElement(Provider, __assign({}, componentProps),\n        React.createElement(React.Fragment, null,\n            React.createElement(\"div\", { style: __assign(__assign({}, display), { height: '100%', pointerEvents: !isPreviewMode &&\n                        plugin &&\n                        !(plugin === null || plugin === void 0 ? void 0 : plugin.allowClickInside) &&\n                        !hasChildren\n                        ? 'none'\n                        : undefined }) }, Renderer ? (React.createElement(Renderer, __assign({}, componentProps), children)) : pluginId ? (React.createElement(Missing, __assign({}, componentProps, { pluginId: pluginId }))) : (children)),\n            React.createElement(Toolbar, { nodeId: nodeId, open: focused, pluginControls: isEditMode && (plugin === null || plugin === void 0 ? void 0 : plugin.controls) ? (React.createElement(PluginControls, { componentProps: componentProps, controls: plugin === null || plugin === void 0 ? void 0 : plugin.controls })) : null }))));\n};\nexport default PluginComponent;\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React from 'react';\nimport { getPluginCellSpacing, normalizeCellSpacing, } from '../../../utils/getCellSpacing';\nimport { useCellData, useCellHasPlugin, useCellInnerDivStylingProps, useCellSpacing, useCellSpacingProvider, useFocusCell, useIsEditMode, useIsFocused, useIsPreviewMode, useNodeChildrenIds, useOption, usePluginOfCell, useSetEditMode, } from '../../hooks';\nimport Row from '../../Row';\nimport Draggable from '../Draggable';\nimport Droppable from '../Droppable';\nimport InsertNew from '../InsertNew';\nimport PluginComponent from '../PluginComponent';\nvar Inner = function (_a) {\n    var _b, _c, _d, _e, _f, _g;\n    var nodeId = _a.nodeId;\n    var isPreviewMode = useIsPreviewMode();\n    var isEditMode = useIsEditMode();\n    var cellShouldHavePlugin = useCellHasPlugin(nodeId);\n    var plugin = usePluginOfCell(nodeId);\n    var setEditMode = useSetEditMode();\n    var focus = useFocusCell(nodeId);\n    var focused = useIsFocused(nodeId);\n    var childrenIds = useNodeChildrenIds(nodeId);\n    var cellSpacing = useCellSpacing();\n    var ref = React.useRef(null);\n    var hasChildren = childrenIds.length > 0;\n    var data = useCellData(nodeId);\n    var pluginCellSpacing = getPluginCellSpacing(plugin, data);\n    var _h = __read(useCellSpacingProvider(pluginCellSpacing), 2), Provider = _h[0], providerValue = _h[1];\n    var cellSpacingY = 0;\n    if (typeof pluginCellSpacing !== 'undefined' && pluginCellSpacing != null) {\n        cellSpacingY = (_c = (_b = normalizeCellSpacing(pluginCellSpacing)) === null || _b === void 0 ? void 0 : _b.y) !== null && _c !== void 0 ? _c : 0;\n    }\n    else {\n        cellSpacingY = (_d = cellSpacing === null || cellSpacing === void 0 ? void 0 : cellSpacing.y) !== null && _d !== void 0 ? _d : 0;\n    }\n    var onClick = React.useCallback(function (e) {\n        var _a, _b;\n        var target = e.target;\n        // check whether the click was inside cell-inner, but not inside a nested cell\n        if (!focused &&\n            isEditMode &&\n            // this arrives when they stop resizing\n            !((_a = target.classList) === null || _a === void 0 ? void 0 : _a.contains('react-page-row')) &&\n            (target === null || target === void 0 ? void 0 : target.closest) &&\n            target.closest('.react-page-cell-inner') === ref.current &&\n            target.closest('.react-page-cell.react-page-cell-has-plugin') ===\n                ((_b = ref.current) === null || _b === void 0 ? void 0 : _b.closest('.react-page-cell'))) {\n            var mode = e.metaKey || e.ctrlKey ? 'add' : 'replace';\n            focus(false, mode);\n            setEditMode();\n        }\n    }, [focus, focused, isEditMode, setEditMode]);\n    var insertAllowed = ((_e = plugin === null || plugin === void 0 ? void 0 : plugin.childConstraints) === null || _e === void 0 ? void 0 : _e.maxChildren)\n        ? ((_f = plugin === null || plugin === void 0 ? void 0 : plugin.childConstraints) === null || _f === void 0 ? void 0 : _f.maxChildren) > childrenIds.length\n        : true;\n    var innerDivProps = useCellInnerDivStylingProps(nodeId);\n    var children = childrenIds.map(function (id) { return React.createElement(Row, { nodeId: id, key: id }); });\n    var components = useOption('components');\n    var InsertNewWithDefault = (_g = components === null || components === void 0 ? void 0 : components.InsertNew) !== null && _g !== void 0 ? _g : InsertNew;\n    if (!cellShouldHavePlugin) {\n        return React.createElement(Droppable, { nodeId: nodeId }, children);\n    }\n    return (React.createElement(Droppable, { nodeId: nodeId, isLeaf: !hasChildren },\n        React.createElement(Draggable, { nodeId: nodeId, isLeaf: !hasChildren },\n            React.createElement(\"div\", __assign({ onClick: !isPreviewMode ? onClick : undefined, tabIndex: -1, ref: ref }, innerDivProps),\n                React.createElement(PluginComponent, { nodeId: nodeId, hasChildren: hasChildren },\n                    hasChildren ? (React.createElement(Provider, { value: providerValue },\n                        React.createElement(\"div\", { style: cellSpacingY !== 0\n                                ? { margin: \"\".concat(-cellSpacingY / 2, \"px 0\") }\n                                : undefined }, children))) : (children),\n                    insertAllowed ? (React.createElement(InsertNewWithDefault, { parentCellId: nodeId, childrenIds: childrenIds })) : null)))));\n};\nexport default React.memo(Inner);\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React from 'react';\nimport { MoveDown, MoveLeft, MoveRight, MoveUp, } from '../../../../ui/moveButtons';\nvar baseStyle = {\n    position: 'absolute',\n    margin: 0,\n};\nvar MARGIN = 10;\nvar MoveActions = function (_a) {\n    var nodeId = _a.nodeId;\n    return (React.createElement(\"div\", { className: \"react-page-cell-move-actions\", style: __assign({ left: 0, right: 0, bottom: 0, top: 0, zIndex: 100, pointerEvents: 'none' }, baseStyle) },\n        React.createElement(MoveUp, { nodeId: nodeId, style: __assign(__assign({}, baseStyle), { top: MARGIN, left: '50%', transform: 'translateX(-50%)' }) }),\n        React.createElement(MoveLeft, { nodeId: nodeId, style: __assign(__assign({}, baseStyle), { left: MARGIN, top: '50%', transform: 'translateY(-50%)' }) }),\n        React.createElement(MoveRight, { nodeId: nodeId, style: __assign(__assign({}, baseStyle), { right: MARGIN, top: '50%', transform: 'translateY(-50%)' }) }),\n        React.createElement(MoveDown, { nodeId: nodeId, style: __assign(__assign({}, baseStyle), { bottom: MARGIN, left: '50%', transform: 'translateX(-50%)' }) })));\n};\nexport default MoveActions;\n//# sourceMappingURL=index.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport classNames from 'classnames';\nimport React, { useCallback } from 'react';\nimport { getCellOuterDivClassName } from '../../utils/getCellStylingProps';\nimport { useAllFocusedNodeIds, useCellHasPlugin, useCellProps, useCellSpacing, useIsFocused, useIsInsertMode, useIsLayoutMode, useIsPreviewMode, useIsResizeMode, useLang, useNodeHasChildren, useOption, useScrollToViewEffect, useSetDisplayReferenceNodeId, } from '../hooks';\nimport ErrorCell from './ErrorCell';\nimport Handle from './Handle';\nimport Inner from './Inner';\nimport MoveActions from './MoveActions';\nimport scrollIntoViewWithOffset from './utils/scrollIntoViewWithOffset';\nvar CellErrorGate = /** @class */ (function (_super) {\n    __extends(class_1, _super);\n    function class_1() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            error: null,\n        };\n        return _this;\n    }\n    class_1.prototype.componentDidCatch = function (error) {\n        this.setState({ error: error });\n    };\n    class_1.prototype.render = function () {\n        if (this.state.error) {\n            return React.createElement(ErrorCell, { nodeId: this.props.nodeId, error: this.state.error });\n        }\n        return this.props.children;\n    };\n    return class_1;\n}(React.Component));\nvar Cell = function (_a) {\n    var _b;\n    var nodeId = _a.nodeId, measureRef = _a.measureRef;\n    var focused = useIsFocused(nodeId);\n    var _c = useCellProps(nodeId, function (node) {\n        var _a;\n        return {\n            inline: node === null || node === void 0 ? void 0 : node.inline,\n            hasInlineNeighbour: node === null || node === void 0 ? void 0 : node.hasInlineNeighbour,\n            isDraft: node === null || node === void 0 ? void 0 : node.isDraft,\n            isDraftI18n: node === null || node === void 0 ? void 0 : node.isDraftI18n,\n            size: (_a = node === null || node === void 0 ? void 0 : node.size) !== null && _a !== void 0 ? _a : 12,\n        };\n    }), inline = _c.inline, hasInlineNeighbour = _c.hasInlineNeighbour, isDraft = _c.isDraft, isDraftI18n = _c.isDraftI18n, size = _c.size;\n    var lang = useLang();\n    var isPreviewMode = useIsPreviewMode();\n    var isResizeMode = useIsResizeMode();\n    var isLayoutMode = useIsLayoutMode();\n    var isInsertMode = useIsInsertMode();\n    var multiNodesSelected = useAllFocusedNodeIds().length > 1;\n    var hasChildren = useNodeHasChildren(nodeId);\n    var showMoveButtons = useOption('showMoveButtonsInLayoutMode');\n    var hasPlugin = useCellHasPlugin(nodeId);\n    var cellSpacing = useCellSpacing();\n    var needVerticalPadding = !hasChildren || hasPlugin;\n    var isDraftInLang = (_b = isDraftI18n === null || isDraftI18n === void 0 ? void 0 : isDraftI18n[lang]) !== null && _b !== void 0 ? _b : isDraft;\n    var ref = React.useRef(null);\n    var setReferenceNodeId = useSetDisplayReferenceNodeId();\n    var onClick = useCallback(function (e) {\n        if (isInsertMode) {\n            e.stopPropagation();\n            setReferenceNodeId(nodeId);\n        }\n    }, [nodeId, isInsertMode, setReferenceNodeId]);\n    useScrollToViewEffect(nodeId, function () {\n        if (ref.current)\n            scrollIntoViewWithOffset(ref.current, 120); // 120 is just a sane default, we might make int configurable in the future\n    }, [ref.current]);\n    if (isDraftInLang && isPreviewMode) {\n        return null;\n    }\n    var cellOuterStlye = cellSpacing && (cellSpacing.y !== 0 || cellSpacing.x !== 0)\n        ? {\n            padding: \"\".concat(needVerticalPadding ? cellSpacing.y / 2 : 0, \"px \").concat(cellSpacing.x / 2, \"px\"),\n        }\n        : undefined;\n    return (React.createElement(\"div\", { style: cellOuterStlye, ref: ref, className: getCellOuterDivClassName({\n            hasChildren: hasChildren,\n            hasInlineNeighbour: hasInlineNeighbour,\n            size: size,\n            inline: inline,\n        }) +\n            ' ' +\n            classNames({\n                'react-page-cell-has-plugin': hasPlugin,\n                'react-page-cell-focused': focused,\n                'react-page-cell-is-draft': isDraftInLang,\n                'react-page-cell-bring-to-front': !isResizeMode && !isLayoutMode && inline, // inline must not be active for resize/layout\n            }), onClick: onClick },\n        React.createElement(Handle, { nodeId: nodeId }),\n        showMoveButtons &&\n            isLayoutMode &&\n            !hasChildren &&\n            !multiNodesSelected ? (React.createElement(MoveActions, { nodeId: nodeId })) : null,\n        React.createElement(\"div\", { \n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            ref: measureRef, style: {\n                height: '100%',\n                boxSizing: 'border-box',\n            } },\n            React.createElement(CellErrorGate, { nodeId: nodeId },\n                React.createElement(Inner, { nodeId: nodeId })))));\n};\nexport default React.memo(Cell);\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React from 'react';\nimport Draggable from 'react-draggable';\nimport { useMeasure } from 'react-use';\nimport Cell from '../Cell';\nimport { useIsEditMode, useIsPreviewMode, useIsResizeMode, useResizeCell, useCellSpacing, useOption, } from '../hooks';\nvar ResizableRowCell = function (_a) {\n    var _b;\n    var nodeId = _a.nodeId, rowWidth = _a.rowWidth, rowHasInlineChildrenPosition = _a.rowHasInlineChildrenPosition, isLast = _a.isLast, offset = _a.offset, size = _a.size, maxSize = _a.maxSize;\n    var stepWidth = rowWidth / 12; // we're going to keep it a real number to preserve some precision\n    var allowResizeInEditMode = useOption('allowResizeInEditMode');\n    var isResizeMode = useIsResizeMode();\n    var isEditMode = useIsEditMode();\n    var isPreviewMode = useIsPreviewMode();\n    var resize = useResizeCell(nodeId);\n    var _c = __read(useMeasure(), 2), ref = _c[0], cellHeight = _c[1].height;\n    var cellSpacingY = ((_b = useCellSpacing()) !== null && _b !== void 0 ? _b : { y: 0 }).y;\n    var showResizeHandle = !isPreviewMode &&\n        !isLast &&\n        (isResizeMode || (allowResizeInEditMode && isEditMode));\n    return (React.createElement(React.Fragment, null,\n        React.createElement(Cell, { nodeId: nodeId, measureRef: ref }),\n        showResizeHandle ? (React.createElement(Draggable, { bounds: {\n                top: 0,\n                bottom: 0,\n                left: Math.round(stepWidth),\n                right: Math.round(rowWidth - stepWidth),\n            }, position: {\n                x: rowHasInlineChildrenPosition === 'right'\n                    ? Math.round(stepWidth * (12 - offset))\n                    : Math.round(stepWidth * offset),\n                y: 0,\n            }, axis: \"x\", onDrag: function (e, data) {\n                var diff = Math.round(data.deltaX / stepWidth);\n                var newSize = rowHasInlineChildrenPosition === 'right'\n                    ? size - diff\n                    : size + diff;\n                if (newSize > 0 && newSize <= maxSize)\n                    resize(newSize);\n            }, grid: [Math.round(stepWidth), 0] },\n            React.createElement(\"div\", { className: \"resize-handle\", style: {\n                    // fix floating style\n                    height: rowHasInlineChildrenPosition ? cellHeight : 'auto',\n                    margin: cellSpacingY !== 0 ? \"\".concat(cellSpacingY / 2, \"px 0\") : undefined,\n                }, onClick: function (e) { return e.stopPropagation(); } }))) : null));\n};\nexport default React.memo(ResizableRowCell);\n//# sourceMappingURL=ResizableRowCell.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useMeasure } from 'react-use';\nimport { isRow } from '../../types/node';\nimport { useCellSpacing, useNodeHoverPosition, useNodeProps } from '../hooks';\nimport Droppable from './Droppable';\nimport ResizableRowCell from './ResizableRowCell';\nvar reduceToIdAndSizeArray = function (acc, node, index, array) {\n    var _a, _b, _c, _d;\n    var nextNode = array[index + 1];\n    var size = isRow(node) ? 12 : (_a = node.size) !== null && _a !== void 0 ? _a : 12;\n    var nextSize = !nextNode || isRow(nextNode) ? 0 : (_b = nextNode.size) !== null && _b !== void 0 ? _b : 12;\n    var offset = size + ((_d = (_c = acc[index - 1]) === null || _c === void 0 ? void 0 : _c.offset) !== null && _d !== void 0 ? _d : 0);\n    return __spreadArray(__spreadArray([], __read(acc), false), [\n        {\n            id: node.id,\n            size: size,\n            maxSize: size + nextSize - 1,\n            offset: offset,\n        },\n    ], false);\n};\nvar Row = function (_a) {\n    var _b;\n    var nodeId = _a.nodeId;\n    var _c = __read(useMeasure(), 2), ref = _c[0], rowWidth = _c[1].width;\n    var hoverPosition = useNodeHoverPosition(nodeId);\n    var childrenWithOffsets = useNodeProps(nodeId, function (node) {\n        var _a, _b, _c, _d;\n        return isRow(node)\n            ? (_b = (_a = node.cells) === null || _a === void 0 ? void 0 : _a.reduce(reduceToIdAndSizeArray, [])) !== null && _b !== void 0 ? _b : []\n            : (_d = (_c = node === null || node === void 0 ? void 0 : node.rows) === null || _c === void 0 ? void 0 : _c.reduce(reduceToIdAndSizeArray, [])) !== null && _d !== void 0 ? _d : [];\n    });\n    var rowHasInlineChildrenPosition = useNodeProps(nodeId, function (node) { var _a; return (isRow(node) && node.cells.length === 2 && ((_a = node.cells[0]) === null || _a === void 0 ? void 0 : _a.inline)) || null; });\n    var cellSpacing = useCellSpacing();\n    return (React.createElement(Droppable, { nodeId: nodeId },\n        React.createElement(\"div\", { \n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            ref: ref, className: classNames('react-page-row', {\n                'react-page-row-has-floating-children': Boolean(rowHasInlineChildrenPosition),\n            }), style: {\n                position: 'relative',\n                margin: cellSpacing && cellSpacing.x !== 0\n                    ? \"0 \".concat(-cellSpacing.x / 2, \"px\")\n                    : undefined,\n            } },\n            React.createElement(\"div\", { style: __assign({ position: 'absolute', pointerEvents: 'none' }, (cellSpacing\n                    ? {\n                        top: \"\".concat(cellSpacing.y / 2, \"px\"),\n                        left: \"\".concat(cellSpacing.x / 2, \"px\"),\n                        bottom: \"\".concat(cellSpacing.y / 2, \"px\"),\n                        right: \"\".concat(cellSpacing.x / 2, \"px\"),\n                    }\n                    : {})), className: classNames((_b = {\n                        'react-page-row-is-hovering-this': Boolean(hoverPosition)\n                    },\n                    _b[\"react-page-row-is-hovering-\".concat(hoverPosition || '')] = Boolean(hoverPosition),\n                    _b)) }),\n            childrenWithOffsets.map(function (_a, index) {\n                var offset = _a.offset, id = _a.id, size = _a.size, maxSize = _a.maxSize;\n                return (React.createElement(ResizableRowCell, { key: id, isLast: index === childrenWithOffsets.length - 1, rowWidth: rowWidth, nodeId: id, rowHasInlineChildrenPosition: rowHasInlineChildrenPosition, offset: offset, size: size, maxSize: maxSize }));\n            }))));\n};\nexport default React.memo(Row);\n//# sourceMappingURL=index.js.map","import React from 'react';\nimport InsertNew from '../../Cell/InsertNew';\nimport { useCellSpacing, useOption, useValueNode } from '../../hooks';\nimport Row from '../../Row';\nvar Rows = function () {\n    var _a;\n    var rowIds = useValueNode(function (editable) {\n        var _a, _b;\n        return ({\n            rowIds: (_b = (_a = editable === null || editable === void 0 ? void 0 : editable.rows) === null || _a === void 0 ? void 0 : _a.map(function (c) { return c.id; })) !== null && _b !== void 0 ? _b : [],\n        });\n    }).rowIds;\n    var childConstraints = useOption('childConstraints');\n    var components = useOption('components');\n    var cellSpacingY = useCellSpacing().y;\n    var insertAllowed = (childConstraints === null || childConstraints === void 0 ? void 0 : childConstraints.maxChildren)\n        ? (childConstraints === null || childConstraints === void 0 ? void 0 : childConstraints.maxChildren) > rowIds.length\n        : true;\n    var InsertNewWithDefault = (_a = components === null || components === void 0 ? void 0 : components.InsertNew) !== null && _a !== void 0 ? _a : InsertNew;\n    return (React.createElement(React.Fragment, null,\n        rowIds.length > 0 ? (React.createElement(\"div\", { style: cellSpacingY !== 0\n                ? { margin: \"\".concat(-cellSpacingY / 2, \"px 0\") }\n                : undefined }, rowIds.map(function (id) { return (React.createElement(Row, { nodeId: id, key: id })); }))) : null,\n        insertAllowed ? React.createElement(InsertNewWithDefault, { childrenIds: rowIds }) : null));\n};\nexport default React.memo(Rows);\n//# sourceMappingURL=Rows.js.map","import { useSelector } from '../../reduxConnect';\nimport { currentValue } from '../../selector/editable';\nimport deepEquals from '../../utils/deepEquals';\n/**\n *\n * @param selector receives the current value node object and returns T\n * @returns the selection T\n */\nexport var useValueNode = function (selector) {\n    return useSelector(function (state) { return selector(currentValue(state)); }, deepEquals);\n};\n//# sourceMappingURL=value.js.map","import React, { useRef } from 'react';\nimport { useDisplayMode, useZoom } from '../../hooks';\nimport { useKeepScrollPosition } from '../hooks/useKeepScrollPosition';\nimport Rows from './Rows';\nvar Inner = function () {\n    var _a, _b, _c;\n    var mode = useDisplayMode();\n    var ref = useRef(null);\n    var zoom = useZoom();\n    useKeepScrollPosition(ref);\n    var rect = (_a = ref.current) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect();\n    var zoomTransformOriginY = window.innerHeight / 2 - ((_b = rect === null || rect === void 0 ? void 0 : rect.top) !== null && _b !== void 0 ? _b : 0);\n    var offsetPercent = zoomTransformOriginY / ((_c = rect === null || rect === void 0 ? void 0 : rect.height) !== null && _c !== void 0 ? _c : 0);\n    var backdropPercent = 50 * (1 - zoom);\n    var left = backdropPercent + '%';\n    var right = 100 - backdropPercent + '%';\n    var top = backdropPercent * offsetPercent * 2 + '%';\n    var bottom = 100 - backdropPercent * (1 - offsetPercent) * 2 + '%';\n    return (React.createElement(\"div\", { ref: ref, style: {\n            position: 'relative',\n        } },\n        React.createElement(\"div\", { style: {\n                opacity: zoom < 1 ? 1 : 0,\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                right: 0,\n                bottom: 0,\n                transition: '0.6s',\n                clipPath: \"polygon(0% 0%, 0% 100%, \".concat(left, \" 100%, \").concat(left, \" \").concat(top, \", \").concat(right, \" \").concat(top, \", \").concat(right, \" \").concat(bottom, \", \").concat(left, \" \").concat(bottom, \", \").concat(left, \" 100%, 100% 100%, 100% 0%)\"),\n                background: \"url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16  ' viewBox='0 0 8 8'%3E%3Cg fill='%23c5c5c5' fill-opacity='0.4'%3E%3Cpath fill-rule='evenodd' d='M0 0h4v4H0V0zm4 4h4v4H4V4z'/%3E%3C/g%3E%3C/svg%3E\\\")\",\n            } }),\n        React.createElement(\"div\", { style: {\n                transformOrigin: \"center \".concat(zoomTransformOriginY, \"px\"),\n                transform: \"scale(\".concat(zoom, \")\"),\n                transition: '0.6s',\n            }, className: 'react-page-editable react-page-editable-mode-' + mode },\n            React.createElement(Rows, null))));\n};\nexport default React.memo(Inner);\n//# sourceMappingURL=index.js.map","import React from 'react';\nimport FallbackDropArea from './FallbackDropArea';\nimport Inner from './Inner';\nvar Editable = function () {\n    return (React.createElement(FallbackDropArea, null,\n        React.createElement(Inner, null)));\n};\nexport default React.memo(Editable);\n//# sourceMappingURL=index.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport isHotkey from 'is-hotkey';\nimport { useCallback, useEffect, useMemo } from 'react';\nimport { objIsNode } from '../../../core/utils/objIsNode';\nimport { isRow } from '../../types/node';\nimport { getCommonAncestorTree } from '../../utils/ancestorTree';\nimport { cloneAsCell } from '../../utils/cloneWithNewIds';\nimport { useAllCellPluginsForNode, useAllFocusedNodeIds, useBlurAllCells, useEditorStore, useFocusCellById, useFocusedNodeId, useInsertAfter, useIsEditMode, useIsInsertMode, useParentCellId, useRedo, useRemoveMultipleNodeIds, useSetEditMode, useSetInsertMode, useUndo, } from '../hooks';\nvar lastFocused = null;\nvar GlobalHotKeys = function (_a) {\n    var focusRef = _a.focusRef;\n    var editor = useEditorStore();\n    var undo = useUndo();\n    var redo = useRedo();\n    var setInsertMode = useSetInsertMode();\n    var isEditMode = useIsEditMode();\n    var blurAllCells = useBlurAllCells();\n    var focusedNodeIds = useAllFocusedNodeIds();\n    var someCellIsFocused = focusedNodeIds.length > 0;\n    var focusedNodeId = useFocusedNodeId();\n    var focusParentId = useParentCellId(focusedNodeId);\n    var plugins = useAllCellPluginsForNode(focusParentId);\n    var focusCell = useFocusCellById();\n    var removeCells = useRemoveMultipleNodeIds();\n    var insertAfter = useInsertAfter();\n    var isInsertMode = useIsInsertMode();\n    var setEditMode = useSetEditMode();\n    var delegateToFoundPlugin = useCallback(function (event, nodeId, handlerName, defaultHandler) { return __awaiter(void 0, void 0, void 0, function () {\n        var node, plugin, e_1;\n        var _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    node = nodeId ? editor === null || editor === void 0 ? void 0 : editor.getNode(nodeId) : null;\n                    plugin = plugins.find(function (p) { var _a; return p.id === ((_a = node === null || node === void 0 ? void 0 : node.plugin) === null || _a === void 0 ? void 0 : _a.id); });\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, 5, , 6]);\n                    if (!(isEditMode && node && (plugin === null || plugin === void 0 ? void 0 : plugin[handlerName]))) return [3 /*break*/, 3];\n                    return [4 /*yield*/, ((_a = plugin[handlerName]) === null || _a === void 0 ? void 0 : _a.call(plugin, event, node))];\n                case 2:\n                    _b.sent();\n                    _b.label = 3;\n                case 3: \n                // if the plugin handler resolve or there is no, they do not handle it, so do the default\n                return [4 /*yield*/, defaultHandler(event, node)];\n                case 4:\n                    // if the plugin handler resolve or there is no, they do not handle it, so do the default\n                    _b.sent();\n                    return [3 /*break*/, 6];\n                case 5:\n                    e_1 = _b.sent();\n                    if (e_1) {\n                        // tslint:disable-next-line:no-console\n                        console.error(e_1);\n                    }\n                    return [3 /*break*/, 6];\n                case 6: return [2 /*return*/];\n            }\n        });\n    }); }, [editor, isEditMode]);\n    var handlers = useMemo(function () {\n        var handleCopy = function (deleteAfter) {\n            var _a;\n            var _b;\n            if (deleteAfter === void 0) { deleteAfter = false; }\n            // copy cell, unless text is selected\n            if (((_b = window.getSelection()) === null || _b === void 0 ? void 0 : _b.type) !== 'Range' &&\n                (focusedNodeIds === null || focusedNodeIds === void 0 ? void 0 : focusedNodeIds.length) > 0) {\n                if (!editor) {\n                    return;\n                }\n                var node = getCommonAncestorTree(editor, focusedNodeIds);\n                if (!node) {\n                    return;\n                }\n                var cell = cloneAsCell(node);\n                var type = 'text/plain'; // json is not supported\n                var blob = new Blob([JSON.stringify(cell)], { type: type });\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var data = [new ClipboardItem((_a = {}, _a[type] = blob, _a))];\n                navigator.clipboard.write(data);\n                if (deleteAfter) {\n                    removeCells(focusedNodeIds);\n                }\n            }\n        };\n        return [\n            {\n                hotkeys: ['Escape'],\n                handler: function () {\n                    if (someCellIsFocused) {\n                        blurAllCells();\n                    }\n                    if (isInsertMode) {\n                        setEditMode();\n                    }\n                },\n            },\n            {\n                hotkeys: ['mod+z'],\n                handler: function () {\n                    undo();\n                },\n            },\n            {\n                hotkeys: ['mod+c'],\n                handler: function () {\n                    handleCopy(false);\n                },\n            },\n            {\n                hotkeys: ['mod+x'],\n                handler: function () {\n                    handleCopy(true);\n                },\n            },\n            {\n                hotkeys: ['mod+v'],\n                handler: function () { return __awaiter(void 0, void 0, void 0, function () {\n                    var node, _a, _b, commonAncestorNode, insertAfterNodeId, e_2;\n                    var _c;\n                    return __generator(this, function (_d) {\n                        switch (_d.label) {\n                            case 0:\n                                _d.trys.push([0, 2, , 3]);\n                                _b = (_a = JSON).parse;\n                                return [4 /*yield*/, navigator.clipboard.readText()];\n                            case 1:\n                                node = _b.apply(_a, [_d.sent()]);\n                                if (!editor) {\n                                    return [2 /*return*/];\n                                }\n                                if (objIsNode(node)) {\n                                    commonAncestorNode = focusedNodeIds.length > 0\n                                        ? getCommonAncestorTree(editor, focusedNodeIds)\n                                        : null;\n                                    insertAfterNodeId = commonAncestorNode\n                                        ? isRow(commonAncestorNode)\n                                            ? commonAncestorNode.cells.length === 1 // if it has just one cell, add below this cell. if it has multiple, add below this row\n                                                ? commonAncestorNode.cells[0].id\n                                                : commonAncestorNode.id\n                                            : (_c = commonAncestorNode.rows) === null || _c === void 0 ? void 0 : _c[commonAncestorNode.rows.length - 1].id // if common ancestor is a cell (usually the root cell, add below last row)\n                                        : null;\n                                    insertAfter(node, insertAfterNodeId);\n                                }\n                                return [3 /*break*/, 3];\n                            case 2:\n                                e_2 = _d.sent();\n                                return [3 /*break*/, 3];\n                            case 3: return [2 /*return*/];\n                        }\n                    });\n                }); },\n            },\n            {\n                hotkeys: ['ctrl+shift+z', 'ctrl+y', 'command+shift+z', 'command+y'],\n                handler: function () {\n                    redo();\n                },\n            },\n            {\n                hotkeys: ['alt+del', 'alt+backspace'],\n                handler: function (event) {\n                    delegateToFoundPlugin(event, focusedNodeId, 'handleRemoveHotKey', function () {\n                        removeCells(focusedNodeIds);\n                    });\n                },\n            },\n        ];\n    }, [\n        editor,\n        focusedNodeId,\n        focusedNodeIds,\n        someCellIsFocused,\n        blurAllCells,\n        focusCell,\n        removeCells,\n        setEditMode,\n        setInsertMode,\n    ]);\n    useEffect(function () {\n        // when we have multiple instances, we try to send the event only to the right one\n        // we do a little trick with a global variable (instead of requiring a wrapping context)\n        var _a, _b;\n        lastFocused = focusRef.current;\n        var keyHandler = function (event) {\n            if (lastFocused !== focusRef.current)\n                return;\n            var matchingHandler = handlers.find(function (handler) {\n                return handler.hotkeys.some(function (hotkey) { return isHotkey(hotkey, event); });\n            });\n            matchingHandler === null || matchingHandler === void 0 ? void 0 : matchingHandler.handler(event);\n        };\n        document.addEventListener('keydown', keyHandler);\n        var focusHandler = function () {\n            lastFocused = focusRef.current;\n        };\n        (_a = focusRef.current) === null || _a === void 0 ? void 0 : _a.addEventListener('click', focusHandler);\n        (_b = focusRef.current) === null || _b === void 0 ? void 0 : _b.addEventListener('mouseenter', focusHandler);\n        return function () {\n            var _a, _b;\n            document.removeEventListener('keydown', keyHandler);\n            (_a = focusRef.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('mouseenter', focusHandler);\n            (_b = focusRef.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('click', focusHandler);\n            if (lastFocused === focusRef.current) {\n                lastFocused = null;\n            }\n        };\n    }, [handlers, someCellIsFocused, isEditMode, focusRef]);\n    return null;\n};\nexport default GlobalHotKeys;\n//# sourceMappingURL=GlobalHotKeys.js.map","import React from 'react';\nimport { DndProvider as DndProviderOrg } from 'react-dnd';\nimport { useOption } from '../components/hooks';\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nvar DndProvider = function (_a) {\n    var children = _a.children;\n    var dndBackend = useOption('dndBackend');\n    return dndBackend ? (React.createElement(DndProviderOrg, { backend: dndBackend }, children)) : (React.createElement(React.Fragment, null, children));\n};\nexport default DndProvider;\n//# sourceMappingURL=DndProvider.js.map","import React, { useEffect } from 'react';\nimport { DISPLAY_MODE_EDIT } from '../actions/display';\nimport { useBlurAllCells, useIsInsertMode, useOption, useSetMode, } from './hooks';\n// this might break in future, but its better than nothing\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction findReactElement(node) {\n    for (var key in node) {\n        if (key.startsWith('__reactInternalInstance$') ||\n            key.startsWith('__reactFiber$') // react 17\n        ) {\n            return node[key];\n        }\n    }\n    return null;\n}\n// we go up the reac-tree. This works even through portals, which would not be possible with traversing the dom tree!\nvar isInSameTree = function (parent, child) {\n    if (!parent) {\n        return false;\n    }\n    var element = findReactElement(child);\n    while (element) {\n        if (element.stateNode === parent) {\n            return true;\n        }\n        element = element.return;\n    }\n    return false;\n};\nvar useBlurAll = function (_a) {\n    var _b = _a.defaultMode, defaultMode = _b === void 0 ? DISPLAY_MODE_EDIT : _b, disabled = _a.disabled;\n    var ref = React.useRef();\n    var blurAllCells = useBlurAllCells();\n    var setMode = useSetMode();\n    var isInsertMode = useIsInsertMode();\n    useEffect(function () {\n        if (disabled) {\n            return;\n        }\n        if (!ref.current) {\n            return;\n        }\n        if (!document && !document.body) {\n            return;\n        }\n        var onMouseDown = function (e) {\n            if (!isInSameTree(ref.current, e.target)) {\n                blurAllCells();\n                // set us in default mode if current mode is \"insert\"\n                if (isInsertMode) {\n                    setMode(defaultMode);\n                }\n            }\n        };\n        document.body.addEventListener('mousedown', onMouseDown);\n        return function () {\n            document.body.removeEventListener('mousedown', onMouseDown);\n        };\n    }, [ref.current, disabled, isInsertMode, setMode, blurAllCells]);\n    return ref;\n};\nvar BlurGate = function (_a) {\n    var children = _a.children;\n    var defaultMode = useOption('blurGateDefaultMode');\n    var disabled = useOption('blurGateDisabled');\n    var ref = useBlurAll({ defaultMode: defaultMode, disabled: disabled });\n    return React.createElement(\"div\", { ref: ref }, children);\n};\nexport default BlurGate;\n//# sourceMappingURL=BlurGate.js.map","import { createContext, useContext, useRef } from 'react';\nexport var CallbacksContext = createContext({});\n/**\n * @returns the callbacks object of the current Editor.\n *\n * this object is memoized, alltough its better to use `usecallback` instead if you want to use a single callback\n */\nexport var useCallbackOptions = function () { return useContext(CallbacksContext); };\n/**\n * get a single (memoized) callback\n * @param key the callback key\n * @returns the callback value\n */\nexport var useCallbackOption = function (key) {\n    var callbacks = useCallbackOptions();\n    var callback = callbacks[key];\n    var lastcallback = useRef(callback);\n    if (lastcallback.current !== callback) {\n        lastcallback.current = callback;\n    }\n    return lastcallback.current;\n};\n//# sourceMappingURL=callbacks.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useRef } from 'react';\nimport deepEquals from '../utils/deepEquals';\nimport { CallbacksContext } from '../components/hooks';\nvar CallbacksProvider = function (_a) {\n    var children = _a.children, callbacks = __rest(_a, [\"children\"]);\n    var lastCallbacks = useRef();\n    var isEqual = lastCallbacks.current\n        ? deepEquals(lastCallbacks.current, callbacks)\n        : false;\n    if (!isEqual) {\n        lastCallbacks.current = callbacks;\n    }\n    return lastCallbacks.current ? (React.createElement(CallbacksContext.Provider, { value: lastCallbacks.current }, children)) : null;\n};\nexport default CallbacksProvider;\n//# sourceMappingURL=CallbacksProvider.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar serializeRow = function (r, cellPlugins) {\n    return __assign(__assign({}, r), { cells: r.cells.map(function (c) { return serializeCell(c, cellPlugins); }) });\n};\nvar serializeCell = function (c, cellPlugins) {\n    var _a;\n    var pluginDef = c.plugin;\n    var pluginFound = pluginDef\n        ? cellPlugins.find(function (p) { return p.id === pluginDef.id; })\n        : null;\n    var transformData = function (dataIn) {\n        return (pluginFound === null || pluginFound === void 0 ? void 0 : pluginFound.serialize) ? pluginFound.serialize(dataIn) : dataIn;\n    };\n    var dataI18n = c.dataI18n\n        ? Object.keys(c.dataI18n).reduce(function (acc, lang) {\n            var _a;\n            var _b;\n            return (__assign(__assign({}, acc), (_a = {}, _a[lang] = transformData((_b = c.dataI18n) === null || _b === void 0 ? void 0 : _b[lang]), _a)));\n        }, {})\n        : null;\n    return __assign(__assign({}, c), { rows: (_a = c.rows) === null || _a === void 0 ? void 0 : _a.map(function (r) { return serializeRow(r, cellPlugins); }), dataI18n: dataI18n !== null && dataI18n !== void 0 ? dataI18n : {} });\n};\nexport var serialzeValue = function (_a, plugins) {\n    var rows = _a.rows, rest = __rest(_a, [\"rows\"]);\n    return __assign(__assign({}, rest), { rows: rows.map(function (c) { return serializeRow(c, plugins); }) });\n};\n//# sourceMappingURL=serialzeValue.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport React, { useEffect, useMemo, useRef } from 'react';\nimport { updateValue } from '../actions/value';\nimport { useCallbackOption, useOption, useRenderOption, } from '../components/hooks';\nimport EditorStore, { EditorContext } from '../EditorStore';\nimport { migrateValue } from '../migrations/migrate';\nimport { serialzeValue } from '../migrations/serialzeValue';\nimport { initialState } from '../reducer';\nimport { ReduxProvider } from '../reduxConnect';\nimport deepEquals from '../utils/deepEquals';\nvar EditorStoreProvider = function (_a) {\n    var _b;\n    var children = _a.children, lang = _a.lang, value = _a.value;\n    var cellPlugins = useRenderOption('cellPlugins');\n    var middleware = (_b = useOption('middleware')) !== null && _b !== void 0 ? _b : [];\n    var onChangeLang = useCallbackOption('onChangeLang');\n    var onChange = useCallbackOption('onChange');\n    var storeFromOptions = useOption('store');\n    var editorStore = useMemo(function () {\n        var store = new EditorStore({\n            initialState: initialState(migrateValue(value, {\n                cellPlugins: cellPlugins,\n                lang: lang,\n            }), lang),\n            store: storeFromOptions,\n            middleware: middleware,\n        });\n        return store;\n    }, __spreadArray([storeFromOptions], __read(middleware), false));\n    var lastValueRef = useRef(value);\n    useEffect(function () {\n        var oldLang = lang;\n        var handleChanges = function () {\n            // notify outsiders to new language, when chagned in ui\n            var newLang = editorStore.store.getState().reactPage.settings.lang;\n            if (newLang && (newLang !== oldLang || newLang !== lang)) {\n                oldLang = newLang;\n                onChangeLang === null || onChangeLang === void 0 ? void 0 : onChangeLang(newLang);\n            }\n            if (!onChange) {\n                return;\n            }\n            //console.time('calculate notifiy on change');\n            var currentValue = editorStore.store.getState().reactPage.values.present;\n            if (!currentValue) {\n                // console.timeEnd('calculate notifiy on change');\n                return;\n            }\n            var serializedValue = serialzeValue(currentValue, cellPlugins);\n            var serializedEqual = deepEquals(lastValueRef.current, serializedValue);\n            if (serializedEqual) {\n                //    console.timeEnd('calculate notifiy on change');\n                return;\n            }\n            lastValueRef.current = serializedValue;\n            //   console.timeEnd('calculate notifiy on change');\n            onChange(serializedValue);\n        };\n        var unsubscribe = editorStore.store.subscribe(handleChanges);\n        return function () {\n            unsubscribe();\n        };\n    }, [editorStore, onChange, cellPlugins]);\n    useEffect(function () {\n        var equal = deepEquals(value, lastValueRef.current);\n        // value changed from outside\n        if (!equal) {\n            lastValueRef.current = value;\n            var migratedValue = migrateValue(value, {\n                cellPlugins: cellPlugins,\n                lang: lang,\n            });\n            editorStore.store.dispatch(updateValue(migratedValue));\n        }\n    }, [value, cellPlugins, lang]);\n    useEffect(function () {\n        // if changed from outside\n        editorStore.setLang(lang);\n    }, [editorStore, lang]);\n    return (React.createElement(ReduxProvider, { store: editorStore.store },\n        React.createElement(EditorContext.Provider, { value: editorStore }, children)));\n};\nexport default EditorStoreProvider;\n//# sourceMappingURL=EditorStoreProvider.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useRef } from 'react';\nimport deepEquals from '../utils/deepEquals';\nimport { OptionsContext } from '../components/hooks';\nimport { DEFAULT_OPTIONS } from '../defaultOptions';\n/*\nwe memoize the options, so that if you access them, you won't get a fresh object every time.\n*/\nvar OptionsProvider = function (_a) {\n    var children = _a.children, options = __rest(_a, [\"children\"]);\n    var lastOptions = useRef();\n    var fullOptions = __assign(__assign({}, DEFAULT_OPTIONS), options);\n    var isEqual = lastOptions.current\n        ? deepEquals(lastOptions.current, fullOptions)\n        : false;\n    if (!isEqual) {\n        lastOptions.current = fullOptions;\n    }\n    return lastOptions.current ? (React.createElement(OptionsContext.Provider, { value: lastOptions.current }, children)) : null;\n};\nexport default OptionsProvider;\n//# sourceMappingURL=OptionsProvider.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { useRef } from 'react';\nimport deepEquals from '../utils/deepEquals';\nimport { RenderOptionsContext } from '../components/hooks';\nimport { DEFAULT_RENDER_OPTIONS } from '../defaultOptions';\n/*\nwe memoize the RenderOptions, so that if you access them, you won't get a fresh object every time.\n\n*/\nvar RenderOptionsProvider = function (_a) {\n    var children = _a.children, renderOptions = __rest(_a, [\"children\"]);\n    var lastRenderOptions = useRef();\n    var fullRenderOptions = __assign(__assign({}, DEFAULT_RENDER_OPTIONS), renderOptions);\n    var isEqual = lastRenderOptions.current\n        ? deepEquals(lastRenderOptions.current, fullRenderOptions)\n        : false;\n    if (!isEqual) {\n        lastRenderOptions.current = fullRenderOptions;\n    }\n    return lastRenderOptions.current ? (React.createElement(RenderOptionsContext.Provider, { value: lastRenderOptions.current }, children)) : null;\n};\nexport default RenderOptionsProvider;\n//# sourceMappingURL=RenderOptionsProvider.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React from 'react';\nimport DndProvider from './DndProvider';\nimport BlurGate from '../components/BlurGate';\nimport CallbacksProvider from './CallbacksProvider';\nimport EditorStoreProvider from './EditorStoreProvider';\nimport OptionsProvider from './OptionsProvider';\nimport RenderOptionsProvider from './RenderOptionsProvider';\nimport { ThemeProvider } from '@mui/material';\nimport { DEFAULT_OPTIONS } from '../defaultOptions';\nvar Provider = function (_a) {\n    var _b = _a.lang, lang = _b === void 0 ? 'default' : _b, value = _a.value, _c = _a.children, children = _c === void 0 ? [] : _c, renderOptions = _a.renderOptions, callbacks = _a.callbacks, options = _a.options;\n    return (React.createElement(OptionsProvider, __assign({}, options),\n        React.createElement(RenderOptionsProvider, __assign({}, renderOptions),\n            React.createElement(CallbacksProvider, __assign({}, callbacks),\n                React.createElement(DndProvider, null,\n                    React.createElement(EditorStoreProvider, { lang: lang, value: value },\n                        React.createElement(ThemeProvider, { theme: options.uiTheme || DEFAULT_OPTIONS.uiTheme },\n                            React.createElement(BlurGate, null, children))))))));\n};\nexport default Provider;\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport classNames from 'classnames';\nimport React from 'react';\nimport { DragPreviewImage, useDrag } from 'react-dnd';\nimport { dragIcon } from '../../../core/components/Cell/Draggable/useDragHandle';\nimport { useSetLayoutMode } from '../../../core/components/hooks/displayMode';\nvar Draggable = function (_a) {\n    var insert = _a.insert, children = _a.children;\n    var setLayoutMode = useSetLayoutMode();\n    var _b = __read(useDrag({\n        type: 'cell',\n        item: function () {\n            setLayoutMode();\n            return {\n                cell: insert,\n            };\n        },\n        collect: function (monitor) { return ({\n            isDragging: monitor.isDragging(),\n        }); },\n    }), 3), isDragging = _b[0].isDragging, dragRef = _b[1], preview = _b[2];\n    var classes = classNames({ 'react-page-toolbar-draggable-is-dragged': isDragging }, 'react-page-toolbar-draggable');\n    return (React.createElement(\"div\", { className: classes, ref: dragRef },\n        React.createElement(DragPreviewImage, { connect: preview, src: dragIcon }),\n        children));\n};\nexport default Draggable;\n//# sourceMappingURL=index.js.map","import Avatar from '@mui/material/Avatar';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemText from '@mui/material/ListItemText';\nimport React from 'react';\nimport { useDisplayModeReferenceNodeId, useInsertNew, useUiTranslator, } from '../../../core/components/hooks';\nimport Draggable from '../Draggable/index';\nvar Item = function (_a) {\n    var _b, _c;\n    var plugin = _a.plugin, insert = _a.insert;\n    var title = (_b = plugin.title) !== null && _b !== void 0 ? _b : plugin.text;\n    var t = useUiTranslator().t;\n    if (!plugin.icon && !title) {\n        return null;\n    }\n    var referenceNodeId = useDisplayModeReferenceNodeId();\n    var insertNew = useInsertNew(referenceNodeId);\n    var insertIt = React.useCallback(function () { return insertNew(insert); }, [insertNew, referenceNodeId, insert]);\n    return (React.createElement(Draggable, { insert: insert },\n        React.createElement(ListItem, { title: (_c = t('Click to add or drag and drop it somewhere on your page!')) !== null && _c !== void 0 ? _c : '', className: \"react-page-plugin-drawer-item\", onClick: insertIt },\n            React.createElement(Avatar, { children: plugin.icon || (title === null || title === void 0 ? void 0 : title[0]), style: {\n                    marginRight: 16,\n                } }),\n            React.createElement(ListItemText, { primary: t(title), secondary: t(plugin.description) }))));\n};\nexport default Item;\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport Drawer from '@mui/material/Drawer';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListSubheader from '@mui/material/ListSubheader';\nimport TextField from '@mui/material/TextField';\nimport React from 'react';\nimport { Portal } from 'react-portal';\nimport { useIsInsertMode, useUiTranslator, useDisplayModeReferenceNodeId, useAllCellPluginsForNode, } from '../../core/components/hooks';\nimport Item from './Item/index';\nvar getPluginTitle = function (plugin) { var _a; return (_a = (plugin.title || plugin.text)) !== null && _a !== void 0 ? _a : ''; };\nexport var PluginDrawer = React.memo(function () {\n    var _a;\n    var defaultLabels = {\n        noPluginFoundContent: 'No blocks found',\n        searchPlaceholder: 'Search for blocks',\n        insertPlugin: 'Add blocks to page',\n        dragMe: 'Drag me!',\n    };\n    var nodeId = useDisplayModeReferenceNodeId();\n    var plugins = useAllCellPluginsForNode(nodeId);\n    var t = useUiTranslator().t;\n    var _b = __read(React.useState(''), 2), searchText = _b[0], setSearchText = _b[1];\n    var searchFilter = React.useCallback(function (plugin) {\n        var id = plugin.id;\n        var title = getPluginTitle(plugin);\n        return (plugin &&\n            id &&\n            !plugin.hideInMenu &&\n            (id.toLowerCase().startsWith(searchText === null || searchText === void 0 ? void 0 : searchText.toLowerCase()) ||\n                (plugin.description &&\n                    plugin.description\n                        .toLowerCase()\n                        .startsWith(searchText === null || searchText === void 0 ? void 0 : searchText.toLowerCase())) ||\n                (title && title.toLowerCase().startsWith(searchText === null || searchText === void 0 ? void 0 : searchText.toLowerCase()))));\n    }, [searchText]);\n    var onSearch = React.useCallback(function (e) {\n        var target = e.target;\n        if (target instanceof HTMLInputElement) {\n            setSearchText(target.value);\n        }\n    }, [setSearchText]);\n    var isInsertMode = useIsInsertMode();\n    var inputRef = React.useRef();\n    React.useEffect(function () {\n        var handle;\n        if (inputRef.current && isInsertMode) {\n            handle = setTimeout(function () {\n                var _a;\n                var e = (_a = inputRef === null || inputRef === void 0 ? void 0 : inputRef.current) === null || _a === void 0 ? void 0 : _a.querySelector('input');\n                if (e) {\n                    e.focus();\n                }\n            }, 100);\n        }\n        return function () {\n            clearTimeout(handle);\n        };\n    }, [inputRef.current, isInsertMode]);\n    var filteredPlugins = plugins.filter(searchFilter);\n    return (React.createElement(Portal, null,\n        React.createElement(Drawer, { variant: \"persistent\", className: \"react-page-plugin-drawer\", open: isInsertMode, PaperProps: {\n                style: {\n                    width: 320,\n                },\n            } },\n            React.createElement(List, { subheader: React.createElement(ListSubheader, null, t(defaultLabels.insertPlugin)) },\n                React.createElement(ListItem, null,\n                    React.createElement(TextField, { inputRef: inputRef, placeholder: (_a = t(defaultLabels.searchPlaceholder)) !== null && _a !== void 0 ? _a : '', fullWidth: true, onChange: onSearch })),\n                filteredPlugins.length === 0 && (React.createElement(ListSubheader, null, t(defaultLabels.noPluginFoundContent)))),\n            filteredPlugins.length > 0 && (React.createElement(List, null, filteredPlugins.map(function (plugin, k) {\n                return (React.createElement(Item, { translations: defaultLabels, plugin: plugin, key: k.toString(), insert: {\n                        plugin: plugin.id,\n                    } }));\n            }))))));\n});\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport Fab from '@mui/material/Fab';\nimport Delete from '@mui/icons-material/Delete';\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useIsLayoutMode, useTrashDrop } from '../../core/components/hooks';\nexport var Trash = React.memo(function () {\n    var isLayoutMode = useIsLayoutMode();\n    var _a = __read(useTrashDrop(), 2), isHovering = _a[0].isHovering, ref = _a[1];\n    return (React.createElement(\"div\", { ref: ref, className: classNames('react-page-controls-trash', {\n            'react-page-controls-trash-active': isLayoutMode,\n        }) },\n        React.createElement(Fab, { color: \"secondary\", disabled: !isHovering },\n            React.createElement(Delete, null))));\n});\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport Fab from '@mui/material/Fab';\nimport { useIsSmallScreen } from '../../../core/components/hooks';\nvar DisplayModeToggle = function (_a) {\n    var description = _a.description, icon = _a.icon, onClick = _a.onClick, active = _a.active, disabled = _a.disabled, _b = _a.activeColor, activeColor = _b === void 0 ? 'secondary' : _b, style = _a.style, rest = __rest(_a, [\"description\", \"icon\", \"onClick\", \"active\", \"disabled\", \"activeColor\", \"style\"]);\n    var isSmall = useIsSmallScreen();\n    return (React.createElement(\"div\", { className: \"react-page-controls-mode-toggle-button\", style: style },\n        React.createElement(\"div\", { className: \"react-page-controls-mode-toggle-button-inner\" },\n            React.createElement(Fab, __assign({ color: active ? activeColor : 'default', size: isSmall ? 'small' : 'large', onClick: onClick, disabled: disabled }, rest), icon)),\n        React.createElement(\"div\", { className: \"react-page-controls-mode-toggle-button-description\" }, description)));\n};\nexport default DisplayModeToggle;\n//# sourceMappingURL=index.js.map","import Create from '@mui/icons-material/Create';\nimport React from 'react';\nimport { useIsEditMode, useSetEditMode } from '../../../core/components/hooks';\nimport Button from '../Button/index';\nvar ToggleEdit = function (_a) {\n    var label = _a.label;\n    var isEditMode = useIsEditMode();\n    var setEditMode = useSetEditMode();\n    return (React.createElement(Button, { icon: React.createElement(Create, null), description: label, active: isEditMode, onClick: setEditMode }));\n};\nexport default React.memo(ToggleEdit);\n//# sourceMappingURL=index.js.map","import ContentAdd from '@mui/icons-material/Add';\nimport React from 'react';\nimport { useIsInsertMode, useSetInsertMode, } from '../../../core/components/hooks';\nimport Button from '../Button/index';\nvar ToggleInsert = function (_a) {\n    var label = _a.label;\n    var isInsertMode = useIsInsertMode();\n    var setInsertMode = useSetInsertMode();\n    return (React.createElement(Button, { icon: React.createElement(ContentAdd, null), description: label, active: isInsertMode, onClick: setInsertMode }));\n};\nexport default React.memo(ToggleInsert);\n//# sourceMappingURL=index.js.map","import ViewQuilt from '@mui/icons-material/ViewQuilt';\nimport React from 'react';\nimport { useIsLayoutMode, useSetLayoutMode, } from '../../../core/components/hooks';\nimport Button from '../Button';\nvar ToggleLayout = function (_a) {\n    var label = _a.label;\n    var isLayoutMode = useIsLayoutMode();\n    var setLayoutMode = useSetLayoutMode();\n    return (React.createElement(Button, { icon: React.createElement(ViewQuilt, null), description: label, active: isLayoutMode, onClick: setLayoutMode }));\n};\nexport default React.memo(ToggleLayout);\n//# sourceMappingURL=index.js.map","import Devices from '@mui/icons-material/Devices';\nimport React from 'react';\nimport { useIsPreviewMode, useSetPreviewMode, } from '../../../core/components/hooks';\nimport Button from '../Button/index';\nvar TogglePreview = function (_a) {\n    var label = _a.label;\n    var isPreviewMode = useIsPreviewMode();\n    var setIsPreviewMode = useSetPreviewMode();\n    return (React.createElement(Button, { icon: React.createElement(Devices, null), description: label, active: isPreviewMode, onClick: setIsPreviewMode }));\n};\nexport default React.memo(TogglePreview);\n//# sourceMappingURL=index.js.map","import Resize from '@mui/icons-material/SettingsOverscan';\nimport React from 'react';\nimport { useIsResizeMode, useSetResizeMode, } from '../../../core/components/hooks';\nimport Button from '../Button/index';\nvar ToggleResize = function (props) {\n    var isResizeMode = useIsResizeMode();\n    var setResizeMode = useSetResizeMode();\n    return (React.createElement(Button, { icon: React.createElement(Resize, null), description: props.label, active: isResizeMode, onClick: setResizeMode }));\n};\nexport default React.memo(ToggleResize);\n//# sourceMappingURL=index.js.map","import IconRedo from '@mui/icons-material/Redo';\nimport IconUndo from '@mui/icons-material/Undo';\nimport React from 'react';\nimport { useCanRedo, useCanUndo, useIsSmallScreen, useRedo, useUndo, } from '../../../core/components/hooks';\nimport Button from '../Button/index';\nvar UndoRedo = function (_a) {\n    var labelUndo = _a.labelUndo, labelRedo = _a.labelRedo;\n    var undo = useUndo();\n    var canUndo = useCanUndo();\n    var canRedo = useCanRedo();\n    var redo = useRedo();\n    var isSmall = useIsSmallScreen();\n    return (React.createElement(\"div\", { style: {\n            height: isSmall ? 56 : 80,\n            float: 'right',\n            display: 'flex',\n            direction: 'ltr',\n            transform: 'scale(1.2)',\n        } },\n        React.createElement(\"div\", { style: {\n                width: isSmall ? 29 : 36,\n                overflow: 'hidden',\n                marginRight: isSmall ? 1 : 2,\n            } },\n            React.createElement(Button, { active: true, disabled: !canUndo, style: {\n                    transform: \"translateX(\".concat(isSmall ? 27 : 35, \"px)\"),\n                }, icon: React.createElement(IconUndo, { style: { transform: \"translateX(-\".concat(isSmall ? 6 : 12, \"px)\") } }), description: labelUndo, onClick: undo, activeColor: \"primary\" })),\n        React.createElement(\"div\", { style: {\n                width: isSmall ? 28 : 36,\n                overflow: 'hidden',\n                marginLeft: 1,\n            } },\n            React.createElement(Button, { style: {\n                    position: 'relative',\n                    transform: 'translateX(1px)',\n                }, active: true, disabled: !canRedo, icon: React.createElement(IconRedo, { style: { transform: \"translateX(\".concat(isSmall ? 6 : 12, \"px)\") } }), description: labelRedo, onClick: redo, activeColor: \"primary\" }))));\n};\nexport default React.memo(UndoRedo);\n//# sourceMappingURL=index.js.map","import IconZoomOut from '@mui/icons-material/ZoomOut';\nimport IconZoomIn from '@mui/icons-material/ZoomIn';\nimport React from 'react';\nimport { useCanZoomIn, useCanZoomOut, useIsSmallScreen, useZoomIn, useZoomOut, } from '../../../core/components/hooks';\nimport Button from '../Button/index';\nvar Zoom = function (_a) {\n    var labelZoomIn = _a.labelZoomIn, labelZoomOut = _a.labelZoomOut;\n    var canZoomIn = useCanZoomIn();\n    var canZoomOut = useCanZoomOut();\n    var zoomOut = useZoomOut();\n    var zoomIn = useZoomIn();\n    var isSmall = useIsSmallScreen();\n    return (React.createElement(\"div\", { style: {\n            height: isSmall ? 56 : 80,\n            float: 'right',\n            display: 'flex',\n            direction: 'ltr',\n            transform: 'scale(1.2)',\n        } },\n        React.createElement(\"div\", { style: {\n                width: isSmall ? 29 : 36,\n                overflow: 'hidden',\n                marginRight: isSmall ? 1 : 2,\n            } },\n            React.createElement(Button, { active: true, disabled: !canZoomIn, style: {\n                    transform: \"translateX(\".concat(isSmall ? 27 : 35, \"px)\"),\n                }, icon: React.createElement(IconZoomIn, { style: { transform: \"translateX(-\".concat(isSmall ? 6 : 12, \"px)\") } }), description: labelZoomIn, onClick: zoomIn, activeColor: \"default\" })),\n        React.createElement(\"div\", { style: {\n                width: isSmall ? 28 : 36,\n                overflow: 'hidden',\n                marginLeft: 1,\n            } },\n            React.createElement(Button, { style: {\n                    position: 'relative',\n                    transform: 'translateX(1px)',\n                }, active: true, disabled: !canZoomOut, icon: React.createElement(IconZoomOut, { style: { transform: \"translateX(\".concat(isSmall ? 6 : 12, \"px)\") } }), description: labelZoomOut, onClick: zoomOut, activeColor: \"default\" }))));\n};\nexport default React.memo(Zoom);\n//# sourceMappingURL=index.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport React from 'react';\nimport { useOption, useUiTranslator } from '../../core/components/hooks';\nimport ToggleEdit from './ToggleEdit/index';\nimport ToggleInsert from './ToggleInsert/index';\nimport ToggleLayout from './ToggleLayout/index';\nimport TogglePreview from './TogglePreview/index';\nimport ToggleResize from './ToggleResize/index';\nimport UndoRedo from './UndoRedo';\nimport Zoom from './Zoom';\nvar getStickyNessstyle = function (stickyness) {\n    if (!stickyness ||\n        (!stickyness.shouldStickToBottom && !stickyness.shouldStickToTop)) {\n        return {\n            position: 'fixed',\n            right: (stickyness === null || stickyness === void 0 ? void 0 : stickyness.rightOffsetFixed) || 0,\n        };\n    }\n    return {\n        position: 'absolute',\n        bottom: stickyness.shouldStickToBottom ? 0 : 'auto',\n        top: stickyness.shouldStickToTop ? 0 : 'auto',\n        right: -stickyness.rightOffset || 0,\n    };\n};\nfunction notEmpty(value) {\n    return value !== null && value !== undefined;\n}\nexport var Sidebar = function (_a) {\n    var _b, _c, _d, _e, _f, _g;\n    var stickyNess = _a.stickyNess;\n    var t = useUiTranslator().t;\n    var zoomEnabled = useOption('zoomEnabled');\n    var undoRedoEnabled = useOption('undoRedoEnabled');\n    var editEnabled = useOption('editEnabled');\n    var insertEnabled = useOption('insertEnabled');\n    var layoutEnabled = useOption('layoutEnabled');\n    var resizeEnabled = useOption('resizeEnabled');\n    var previewEnabled = useOption('previewEnabled');\n    var defaultLabels = {\n        edit: 'Edit blocks',\n        insert: 'Add blocks',\n        layout: 'Move blocks',\n        resize: 'Resize blocks',\n        preview: 'Preview page',\n    };\n    var customOptions = useOption('customOptions');\n    var actions = __spreadArray([\n        // eslint-disable-next-line react/jsx-key\n        undoRedoEnabled\n            ? { action: React.createElement(UndoRedo, { labelRedo: \"redo\", labelUndo: \"undo\" }) }\n            : null,\n        zoomEnabled\n            ? { action: React.createElement(Zoom, { labelZoomIn: \"zoom in\", labelZoomOut: \"zoom out\" }) }\n            : null,\n        editEnabled\n            ? { action: React.createElement(ToggleEdit, { label: (_b = t(defaultLabels.edit)) !== null && _b !== void 0 ? _b : '' }) }\n            : null,\n        insertEnabled\n            ? { action: React.createElement(ToggleInsert, { label: (_c = t(defaultLabels.insert)) !== null && _c !== void 0 ? _c : '' }) }\n            : null,\n        layoutEnabled\n            ? { action: React.createElement(ToggleLayout, { label: (_d = t(defaultLabels.layout)) !== null && _d !== void 0 ? _d : '' }) }\n            : null,\n        resizeEnabled\n            ? { action: React.createElement(ToggleResize, { label: (_e = t(defaultLabels.resize)) !== null && _e !== void 0 ? _e : '' }) }\n            : null,\n        previewEnabled\n            ? { action: React.createElement(TogglePreview, { label: (_f = t(defaultLabels.preview)) !== null && _f !== void 0 ? _f : '' }) }\n            : null\n    ], __read(((_g = customOptions === null || customOptions === void 0 ? void 0 : customOptions.map(function (customOption) { return ({ action: customOption }); })) !== null && _g !== void 0 ? _g : [])), false).filter(notEmpty);\n    return (React.createElement(\"div\", { className: \"react-page-controls-mode-toggle-control-group\", style: __assign({ position: 'fixed', zIndex: 10001, bottom: 0, right: 0, display: 'flex', maxHeight: '100%' }, getStickyNessstyle(stickyNess)) },\n        React.createElement(\"div\", { ref: stickyNess === null || stickyNess === void 0 ? void 0 : stickyNess.stickyElRef, style: {\n                padding: 16,\n                position: 'relative',\n                flexFlow: 'column wrap',\n                direction: 'rtl',\n                display: 'flex',\n            } }, actions.map(function (_a, index) {\n            var action = _a.action;\n            return (React.createElement(\"div\", { key: index, className: \"react-page-controls-mode-toggle-control\", style: {\n                    animationDelay: (actions.length - index) * 150 + 'ms',\n                } },\n                React.createElement(React.Fragment, null,\n                    action,\n                    React.createElement(\"div\", { className: \"react-page-controls-mode-toggle-clearfix\" }))));\n        }))));\n};\n//# sourceMappingURL=index.js.map","import React from 'react';\nimport { IconButton, Tooltip } from '@mui/material';\nimport Delete from '@mui/icons-material/Delete';\nimport { useAllFocusedNodeIds, useRemoveMultipleNodeIds, useUiTranslator, } from '../../core/components/hooks';\nvar DeleteAll = function () {\n    var _a;\n    var remove = useRemoveMultipleNodeIds();\n    var focused = useAllFocusedNodeIds();\n    var t = useUiTranslator().t;\n    return (React.createElement(Tooltip, { title: (_a = t('Remove all selected')) !== null && _a !== void 0 ? _a : '' },\n        React.createElement(IconButton, { onClick: function () { return remove(focused); }, \"aria-label\": \"delete\", color: \"secondary\" },\n            React.createElement(Delete, null))));\n};\nexport default DeleteAll;\n//# sourceMappingURL=DeleteAll.js.map","import { IconButton, Tooltip } from '@mui/material';\nimport React from 'react';\nimport { useAllFocusedNodeIds, useDuplicateMultipleCells, useUiTranslator, } from '../../core/components/hooks';\nimport Icon from '@mui/icons-material/FileCopy';\nvar DuplicateAll = function () {\n    var _a;\n    var duplicate = useDuplicateMultipleCells();\n    var t = useUiTranslator().t;\n    var nodeIds = useAllFocusedNodeIds();\n    return (React.createElement(Tooltip, { title: (_a = t('Duplicate al')) !== null && _a !== void 0 ? _a : '' },\n        React.createElement(IconButton, { onClick: function () { return duplicate(nodeIds); }, \"aria-label\": \"delete\", color: \"default\" },\n            React.createElement(Icon, null))));\n};\nexport default DuplicateAll;\n//# sourceMappingURL=DuplicateAll.js.map","import { Avatar, Grid, Typography } from '@mui/material';\nimport React from 'react';\nimport { useAllFocusedNodeIds, useUiTranslator, } from '../../core/components/hooks';\nimport { BottomToolbarDrawer } from '../BottomToolbar';\nimport DeleteAll from './DeleteAll';\nimport DuplicateAll from './DuplicateAll';\nexport var MultiNodesBottomToolbar = React.memo(function () {\n    var t = useUiTranslator().t;\n    var focusedNodeIds = useAllFocusedNodeIds();\n    return (React.createElement(BottomToolbarDrawer, { open: focusedNodeIds.length > 1, anchor: 'bottom' },\n        React.createElement(Grid, { container: true, direction: \"row\", alignItems: \"center\" },\n            React.createElement(Grid, { item: true },\n                React.createElement(Avatar, { children: focusedNodeIds.length, style: {\n                        marginRight: 16,\n                    } })),\n            React.createElement(Grid, { item: true },\n                React.createElement(Typography, { variant: \"subtitle1\" }, t('(multiple selected)'))),\n            React.createElement(Grid, { item: true, style: { marginLeft: 'auto' } },\n                React.createElement(DuplicateAll, null)),\n            React.createElement(Grid, { item: true },\n                React.createElement(DeleteAll, null)))));\n});\n//# sourceMappingURL=index.js.map","import React from 'react';\nimport { PluginDrawer } from '../PluginDrawer';\nimport { Trash } from '../Trash';\nimport { Sidebar } from '../Sidebar';\nimport { useOption } from '../../core/components/hooks';\nimport { MultiNodesBottomToolbar } from '../MultiNodesBottomToolbar';\nexport default React.memo(function (_a) {\n    var _b = _a.stickyNess, stickyNess = _b === void 0 ? {\n        shouldStickToTop: false,\n        shouldStickToBottom: false,\n        rightOffset: 0,\n        rightOffsetFixed: 0,\n    } : _b;\n    var hideEditorSidebar = useOption('hideEditorSidebar');\n    return (React.createElement(React.Fragment, null,\n        React.createElement(Trash, null),\n        !hideEditorSidebar && React.createElement(Sidebar, { stickyNess: stickyNess }),\n        React.createElement(PluginDrawer, null),\n        React.createElement(MultiNodesBottomToolbar, null)));\n});\n//# sourceMappingURL=index.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React, { useState } from 'react';\nimport { useOption } from '..';\nvar StickyWrapper = function (_a) {\n    var children = _a.children;\n    var ref = React.createRef();\n    var sidebarPosition = useOption('sidebarPosition');\n    var stickyElRef = React.createRef();\n    var _b = __read(useState(false), 2), shouldStickToTop = _b[0], setShouldStickToTop = _b[1];\n    var _c = __read(useState(true), 2), shouldStickToBottom = _c[0], setShouldStickToBottom = _c[1];\n    var _d = __read(useState(0), 2), rightOffset = _d[0], setRightOffset = _d[1];\n    var _e = __read(useState(0), 2), rightOffsetFixed = _e[0], setRightOffsetFixed = _e[1];\n    React.useEffect(function () {\n        var calc = function () {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n            if (ref.current) {\n                /**\n                 * TODO: works, but needs refactor, could calculate style for sidebar directly\n                 */\n                var _q = ref.current.getBoundingClientRect(), top_1 = _q.top, left = _q.left, right = _q.right;\n                var bottom = top_1 + ref.current.clientHeight;\n                // document.documentElement.clientWidth is without scrollbars, so better for us\n                if (sidebarPosition === 'rightAbsolute') {\n                    var rightOffsetAbsolute = document.documentElement.clientWidth -\n                        left -\n                        ref.current.clientWidth;\n                    setRightOffset(rightOffsetAbsolute);\n                    setRightOffsetFixed(0);\n                }\n                else if (sidebarPosition === 'rightRelative') {\n                    var rightOffsetAbsolute = document.documentElement.clientWidth -\n                        left -\n                        ref.current.clientWidth;\n                    var rightOffsetRelative = (_b = (_a = stickyElRef.current) === null || _a === void 0 ? void 0 : _a.clientWidth) !== null && _b !== void 0 ? _b : 0;\n                    var overlapsScreenRight = right + ((_d = (_c = stickyElRef.current) === null || _c === void 0 ? void 0 : _c.clientWidth) !== null && _d !== void 0 ? _d : 0) >\n                        document.documentElement.clientWidth;\n                    setRightOffset(overlapsScreenRight ? rightOffsetAbsolute : rightOffsetRelative);\n                    setRightOffsetFixed(overlapsScreenRight\n                        ? 0\n                        : document.documentElement.clientWidth -\n                            right -\n                            ((_f = (_e = stickyElRef.current) === null || _e === void 0 ? void 0 : _e.clientWidth) !== null && _f !== void 0 ? _f : 0));\n                }\n                else if (sidebarPosition === 'leftRelative') {\n                    var rightOffsetForRelativeLeft = -ref.current.clientWidth;\n                    var rightOffsetForAbsoluteLeft = -ref.current.clientWidth -\n                        left +\n                        ((_h = (_g = stickyElRef.current) === null || _g === void 0 ? void 0 : _g.clientWidth) !== null && _h !== void 0 ? _h : 100);\n                    var overlapsScreenLeft = right + rightOffsetForRelativeLeft <\n                        ((_k = (_j = stickyElRef.current) === null || _j === void 0 ? void 0 : _j.clientWidth) !== null && _k !== void 0 ? _k : 0);\n                    setRightOffset(overlapsScreenLeft\n                        ? rightOffsetForAbsoluteLeft\n                        : rightOffsetForRelativeLeft);\n                    setRightOffsetFixed(document.documentElement.clientWidth - left);\n                }\n                else if (sidebarPosition === 'leftAbsolute') {\n                    console.warn('sidebarPosition leftAbsolute is currently buggy');\n                    var rightOffsetForAbsoluteLeft = -ref.current.clientWidth -\n                        left +\n                        ((_m = (_l = stickyElRef.current) === null || _l === void 0 ? void 0 : _l.clientWidth) !== null && _m !== void 0 ? _m : 100);\n                    setRightOffset(rightOffsetForAbsoluteLeft);\n                    setRightOffsetFixed(document.documentElement.clientWidth -\n                        ((_p = (_o = stickyElRef.current) === null || _o === void 0 ? void 0 : _o.clientWidth) !== null && _p !== void 0 ? _p : 0));\n                }\n                var uiHeight = stickyElRef.current\n                    ? stickyElRef.current.clientHeight\n                    : 400;\n                setShouldStickToTop(top_1 > window.innerHeight - uiHeight);\n                setShouldStickToBottom(bottom < window.innerHeight);\n            }\n        };\n        document.addEventListener('scroll', calc);\n        window.addEventListener('resize', calc);\n        var observer = null;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (global.IntersectionObserver) {\n            observer = new IntersectionObserver(calc);\n            if (ref.current) {\n                observer.observe(ref.current);\n            }\n        }\n        // do it once\n        calc();\n        return function () {\n            document.removeEventListener('scroll', calc);\n            window.removeEventListener('resize', calc);\n            observer === null || observer === void 0 ? void 0 : observer.disconnect();\n        };\n    }, [ref, stickyElRef]);\n    return (React.createElement(\"div\", { style: { position: 'relative' }, ref: ref }, children({\n        rightOffset: rightOffset,\n        stickyElRef: stickyElRef,\n        focusRef: ref,\n        shouldStickToTop: shouldStickToTop,\n        shouldStickToBottom: shouldStickToBottom,\n        rightOffsetFixed: rightOffsetFixed,\n    })));\n};\nexport default StickyWrapper;\n//# sourceMappingURL=StickyWrapper.js.map","import React from 'react';\nimport Editable from '../core/components/Editable';\nimport GlobalHotKeys from '../core/components/HotKey/GlobalHotKeys';\nimport { createEmptyState } from '../core/EditorStore';\nimport Provider from '../core/Provider';\nimport EditorUI from '../ui/EditorUI';\nimport StickyWrapper from './StickyWrapper';\nvar EditableEditor = function (_a) {\n    var value = _a.value, lang = _a.lang, children = _a.children, options = _a.options, renderOptions = _a.renderOptions, callbacks = _a.callbacks;\n    var theValue = value || createEmptyState();\n    return (React.createElement(Provider, { lang: lang, callbacks: callbacks, value: theValue, renderOptions: renderOptions, options: options },\n        children,\n        React.createElement(StickyWrapper, null, function (stickyNess) { return (React.createElement(React.Fragment, null,\n            React.createElement(GlobalHotKeys, { focusRef: stickyNess.focusRef }),\n            React.createElement(Editable, null),\n            React.createElement(EditorUI, { stickyNess: stickyNess }))); })));\n};\nexport default EditableEditor;\n//# sourceMappingURL=EditableEditor.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React, { Fragment, useEffect, useMemo } from 'react';\nimport { useIsSmallScreen } from '../../core/components/hooks';\nimport lazyLoad from '../../core/helper/lazyLoad';\nimport makeUniformsSchema from './makeUniformsSchema';\nexport var AutoForm = lazyLoad(function () { return import('./AutoForm'); });\nexport var AutoField = lazyLoad(function () { return import('./AutoField'); });\nexport var AutoFields = lazyLoad(function () { return import('./AutoFields'); });\nvar getDefaultValue = function (bridge) {\n    return bridge.getSubfields().reduce(function (acc, fieldName) {\n        var _a;\n        return (__assign(__assign({}, acc), (_a = {}, _a[fieldName] = bridge.getInitialValue(fieldName), _a)));\n    }, {});\n};\nexport function AutoformControls(props) {\n    var onChange = props.onChange, data = props.data, schema = props.schema, _a = props.columnCount, columnCount = _a === void 0 ? 2 : _a, Content = props.Content;\n    var bridge = useMemo(function () { return makeUniformsSchema(schema); }, [schema]);\n    useEffect(function () {\n        var newDefaultData = __assign(__assign({}, getDefaultValue(bridge)), (data !== null && data !== void 0 ? data : {}));\n        onChange(newDefaultData);\n    }, [bridge]);\n    var isSmall = useIsSmallScreen();\n    return (React.createElement(AutoForm\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    , { \n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        model: data, autosave: true, schema: bridge, onSubmit: onChange }, Content ? (React.createElement(Content, __assign({}, props, { columnCount: columnCount }))) : (React.createElement(\"div\", { style: {\n            columnCount: isSmall ? 1 : columnCount,\n            columnRule: '1px solid #E0E0E0',\n            columnGap: 48,\n        } },\n        React.createElement(AutoFields, { element: Fragment })))));\n}\n//# sourceMappingURL=index.js.map","/* eslint-disable @typescript-eslint/ban-types */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport Ajv from 'ajv';\nimport { JSONSchemaBridge } from 'uniforms-bridge-json-schema';\nvar ajv = new Ajv({ allErrors: true, useDefaults: true });\najv.addKeyword('uniforms');\nfunction createValidator(schema) {\n    var validator = ajv.compile(schema);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return function (model) {\n        var _a;\n        validator(model);\n        if (validator.errors && validator.errors.length) {\n            return ((_a = validator.errors) === null || _a === void 0 ? void 0 : _a.length) ? { details: validator.errors } : null;\n        }\n    };\n}\nfunction makeUniformsSchema(jsonSchema) {\n    var fullSchema = __assign({ type: 'object' }, jsonSchema);\n    var bridge = new JSONSchemaBridge(fullSchema, createValidator(fullSchema));\n    // see https://github.com/react-page/react-page/issues/1187\n    // we remap props.component to props._customComponent to avoid the underlying issue in uniforms\n    //\n    var getPropsOrg = bridge.getProps;\n    bridge.getProps = function (name) {\n        var _a = getPropsOrg.call(this, name), component = _a.component, props = __rest(_a, [\"component\"]);\n        if (component) {\n            return __assign({ _customComponent: component }, props);\n        }\n        return props;\n    };\n    return bridge;\n}\nexport default makeUniformsSchema;\n//# sourceMappingURL=makeUniformsSchema.js.map"],"names":["useUndo","dispatch","useCallback","type","useRedo","useCanUndo","s","reactPage","values","past","length","useCanRedo","future","state","focus","allFocusedNodeIds","_a","_b","_c","nodeIds","filter","n","node","singleFocusedNode","__read","o","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","__spreadArray","to","from","pack","arguments","l","Array","prototype","slice","concat","useFocusedNodeId","useAllFocusedNodeIds","useIsFocused","id","includes","useIsExclusivlyFocused","useScrollToViewEffect","effect","deps","scrollToCell","f","nodeId","useEffect","objIsNode","obj","children","insertNew","isAllowed","dropRef","useDrop","accept","canDrop","item","drop","monitor","didDrop","cell","setReference","clearReference","target","classList","contains","ref","onClick","useSetZoom","zoom","useZoom","display","element","offset","behavior","bodyRect","document","body","getBoundingClientRect","top","offsetPosition","window","scrollTo","useKeepScrollPosition","mode","firstElementInViewPortref","onScroll","current","firstInViewport","find","getElementsByClassName","el","rect","left","bottom","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth","isElementInViewport","topOffset","undefined","addEventListener","removeEventListener","el_1","topOffset_1","setTimeout","scrollIntoViewWithOffset","parentCellId","setInsertMode","isPreviewMode","isLayoutMode","setReferenceNodeId","checkIfAllowed","collect","isOver","getItem","className","style","pointerEvents","zIndex","overflow","width","minWidth","margin","cursor","stopPropagation","focusable","viewBox","d","delay","trace","Error","stack","replace","split","Logger","warn","args","_i","console","apply","debug","log","info","fatal","join","__assign","Object","assign","t","p","hasOwnProperty","this","c","NO","C1","C2","C3","C4","AH","AA","BH","BA","LH","LA","RH","RA","IL","IR","MATRIX_LIST","last","computeHover","drag","hover","actions","room","mouse","cellPlugins","matrixName","pluginId","allowInlineNeighbours","matrix","scale","rows","cells","x","y","height","getRoomScale","hoverCell","Math","floor","row","getMouseHoverCell","CALLBACK_LIST","all","ctx","position","size","deepEquals","logger","relativeMousePosition","round","computeLevel","level","steps","computeHorizontal","inv","at","inline","computeVertical","getDropLevel","clear","leftOf","above","rightOf","below","levels","inlineLeft","hasInlineNeighbour","plugin","isInlineable","inlineRight","computeCurrentDropPosition","mousePosition","getClientOffset","componentPosition","hoverId","dragId","shouldClear","onHover","shallow","ancestorIds","computeAndDispatchHover","leading","onDrop","cancelCellDrag","computeAndDispatchInsert","useCellDrop","hoverTarget","targetParentNodeId","hoverActions","dropActions","isHoveringOverThis","allowNeighbour","domElement","props","isInsertMode","attach","hoverPosition","allowMoveInEditMode","hasPlugin","cellSpacingY","needVerticalMargin","isLeaf","isEditMode","removeCell","message","dragIcon","useDragHandle","enabled","useDrag","canDrag","dragCell","isDragging","end","dragRef","preview","DragPreviewImage","connect","src","dragEnabled","previewElement","metaKey","ctrlKey","title","text","DefaultSmallHandle","_d","components","ResizeHandle","EditModeResizeHandle","ControlsList","controls","componentProps","useState","tab","setTab","activeControls","flexDirection","Tabs","sx","marginTop","marginBottom","marginLeft","alignItems","backgroundColor","theme","palette","background","default","onChange","v","orientation","variant","map","index","Tab","label","key","flex","Controls","pluginControls","isArray","Component","AutoformControls","maxHeight","maxWidth","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","padding","border","overflowX","remove","JSON","stringify","hasChildren","lang","CustomPluginMissing","CellPluginMissing","data","focused","Renderer","Missing","Provider","NoopProvider","Toolbar","BottomToolbar","useMemo","pluginConfig","readOnly","allowClickInside","open","_e","_f","_g","cellShouldHavePlugin","setEditMode","childrenIds","cellSpacing","pluginCellSpacing","_h","providerValue","closest","insertAllowed","childConstraints","maxChildren","innerDivProps","InsertNewWithDefault","InsertNew","tabIndex","baseStyle","transform","__extends","extendStatics","b","setPrototypeOf","__proto__","TypeError","String","__","constructor","create","CellErrorGate","_super","class_1","_this","componentDidCatch","setState","render","measureRef","isDraft","isDraftI18n","isResizeMode","multiNodesSelected","showMoveButtons","needVerticalPadding","isDraftInLang","cellOuterStlye","boxSizing","rowWidth","rowHasInlineChildrenPosition","isLast","maxSize","stepWidth","allowResizeInEditMode","resize","useMeasure","cellHeight","showResizeHandle","bounds","axis","onDrag","diff","deltaX","newSize","grid","reduceToIdAndSizeArray","acc","array","nextNode","nextSize","childrenWithOffsets","reduce","Boolean","selector","rowIds","editable","useRef","zoomTransformOriginY","offsetPercent","backdropPercent","opacity","transition","clipPath","transformOrigin","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","result","then","__generator","g","_","sent","trys","ops","verb","op","pop","lastFocused","focusRef","editor","undo","redo","blurAllCells","focusedNodeIds","someCellIsFocused","focusedNodeId","focusParentId","plugins","focusCell","removeCells","insertAfter","delegateToFoundPlugin","event","handlerName","defaultHandler","e_1","getNode","handlers","handleCopy","deleteAfter","getSelection","blob","Blob","ClipboardItem","navigator","clipboard","write","hotkeys","handler","commonAncestorNode","insertAfterNodeId","parse","readText","keyHandler","matchingHandler","some","hotkey","focusHandler","dndBackend","DndProvider","backend","defaultMode","disabled","setMode","onMouseDown","parent","child","startsWith","findReactElement","stateNode","return","isInSameTree","useBlurAll","CallbacksContext","createContext","useCallbackOption","callback","useContext","lastcallback","callbacks","lastCallbacks","serializeRow","serializeCell","pluginDef","pluginFound","dataI18n","keys","dataIn","serialize","middleware","onChangeLang","storeFromOptions","editorStore","EditorStore","initialState","migrate","store","lastValueRef","oldLang","unsubscribe","subscribe","newLang","getState","settings","currentValue","present","serializedValue","rest","serialzeValue","migratedValue","setLang","options","lastOptions","fullOptions","renderOptions","lastRenderOptions","fullRenderOptions","ThemeProvider","uiTheme","insert","setLayoutMode","classes","icon","referenceNodeId","insertIt","ListItem","Avatar","marginRight","ListItemText","primary","secondary","description","PluginDrawer","defaultLabels","noPluginFoundContent","searchPlaceholder","insertPlugin","dragMe","searchText","setSearchText","searchFilter","getPluginTitle","hideInMenu","toLowerCase","onSearch","HTMLInputElement","inputRef","handle","querySelector","clearTimeout","filteredPlugins","Drawer","PaperProps","List","subheader","ListSubheader","TextField","placeholder","fullWidth","k","translations","toString","Trash","isHovering","Fab","color","Delete","active","activeColor","isSmall","Button","Create","ViewQuilt","setIsPreviewMode","Devices","setResizeMode","labelUndo","labelRedo","canUndo","canRedo","float","direction","labelZoomIn","labelZoomOut","canZoomIn","zoomFactors","z","useCanZoomIn","canZoomOut","useCanZoomOut","zoomOut","setZoom","newZoom","useZoomOut","zoomIn","reverse","useZoomIn","notEmpty","Sidebar","stickyness","stickyNess","zoomEnabled","undoRedoEnabled","editEnabled","insertEnabled","layoutEnabled","resizeEnabled","previewEnabled","customOptions","action","customOption","shouldStickToBottom","shouldStickToTop","rightOffset","rightOffsetFixed","stickyElRef","flexFlow","animationDelay","Tooltip","IconButton","duplicate","MultiNodesBottomToolbar","anchor","Grid","container","Typography","hideEditorSidebar","sidebarPosition","setShouldStickToTop","setShouldStickToBottom","setRightOffset","setRightOffsetFixed","calc","_j","_k","_l","_m","_o","_p","_q","top_1","rightOffsetAbsolute","rightOffsetRelative","overlapsScreenRight","rightOffsetForRelativeLeft","rightOffsetForAbsoluteLeft","overlapsScreenLeft","uiHeight","observer","IntersectionObserver","observe","disconnect","theValue","EditorUI","AutoForm","AutoFields","schema","columnCount","Content","bridge","newDefaultData","getSubfields","fieldName","getInitialValue","getDefaultValue","model","autosave","onSubmit","columnRule","columnGap","Fragment","ajv","allErrors","useDefaults","addKeyword","jsonSchema","fullSchema","validator","compile","errors","details","createValidator","getPropsOrg","getProps","name","component","_customComponent"],"sourceRoot":""}