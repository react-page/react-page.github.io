{"version":3,"file":"static/chunks/pages/examples/customuniformsexperiments-e837e65cb313f687.js","mappings":"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","sources":["webpack://_N_E/?eb7f","webpack://_N_E/./pages/examples/customuniformsexperiments.tsx","webpack://_N_E/../packages/editor/lib-es/core/components/hooks/screen.js","webpack://_N_E/../packages/editor/lib-es/ui/AutoformControls/index.js","webpack://_N_E/../packages/editor/lib-es/ui/AutoformControls/makeUniformsSchema.js"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/examples/customuniformsexperiments\",\n      function () {\n        return require(\"private-next-pages/examples/customuniformsexperiments.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/examples/customuniformsexperiments\"])\n      });\n    }\n  ","/* eslint-disable react/no-unescaped-entities */\nimport React, { useState } from 'react';\nimport { AutoFields, ColorPickerField } from '@react-page/editor';\n// The editor core\nimport type { Value, CellPlugin } from '@react-page/editor';\nimport Editor, { createValue } from '@react-page/editor';\n\nimport slate from '@react-page/plugins-slate';\n\nimport PageLayout from '../../components/PageLayout';\nimport { Button } from '@mui/material';\n\nconst customContentPluginWithSpecialForm: CellPlugin<{\n  title: string;\n  description: string;\n}> = {\n  Renderer: ({ data }) => (\n    <div>\n      <h3>Name</h3>\n      <p>title: {data.title}</p>\n      <p>description: {data.description}</p>\n    </div>\n  ),\n  id: 'custom-content-plugin-with-custom-actions',\n  title: 'Custom content plugin',\n  description: 'Some custom content plugin with special actions',\n  version: 1,\n  controls: {\n    type: 'autoform',\n    schema: {\n      properties: {\n        title: { type: 'string' },\n        description: { type: 'string' },\n      },\n      required: [],\n    },\n    Content: ({ nodeId, onChange, remove }) => (\n      <div>\n        <p>node {nodeId}</p>\n\n        <Button\n          variant=\"outlined\"\n          onClick={() => {\n            onChange(\n              {\n                title: 'Good day, sir',\n              },\n              {\n                lang: 'en',\n              }\n            );\n          }}\n        >\n          set title in English to \"Good day, sir\"\n        </Button>\n        <Button\n          variant=\"outlined\"\n          onClick={() => {\n            onChange(\n              {\n                title: 'Guten Tag',\n              },\n              {\n                lang: 'de',\n              }\n            );\n          }}\n        >\n          set title in German to \"Guten Tag\"\n        </Button>\n        <AutoFields />\n\n        <Button variant=\"outlined\" onClick={remove} color=\"error\">\n          Remove this cell\n        </Button>\n      </div>\n    ),\n  },\n};\n\nconst cellPlugins = [slate(), customContentPluginWithSpecialForm];\n\nconst INITIAL_VALUE = createValue(\n  {\n    rows: [\n      [\n        {\n          plugin: customContentPluginWithSpecialForm,\n        },\n      ],\n    ],\n  },\n  {\n    cellPlugins,\n    lang: 'default',\n  }\n);\nexport default function CustomFormLayout() {\n  const [value, setValue] = useState<Value>(INITIAL_VALUE);\n\n  return (\n    <PageLayout>\n      <Editor\n        cellPlugins={cellPlugins}\n        value={value}\n        onChange={setValue}\n        languages={[\n          {\n            label: 'English',\n            lang: 'en',\n          },\n          {\n            label: 'Deutsch',\n            lang: 'de',\n          },\n        ]}\n      />\n    </PageLayout>\n  );\n}\n","import { useMediaQuery, useTheme } from '@mui/material';\nexport var useIsSmallScreen = function () {\n    var theme = useTheme();\n    return useMediaQuery(theme.breakpoints.down('sm'));\n};\n//# sourceMappingURL=screen.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React, { Fragment, useEffect, useMemo } from 'react';\nimport { useIsSmallScreen } from '../../core/components/hooks';\nimport lazyLoad from '../../core/helper/lazyLoad';\nimport makeUniformsSchema from './makeUniformsSchema';\nexport var AutoForm = lazyLoad(function () { return import('./AutoForm'); });\nexport var AutoField = lazyLoad(function () { return import('./AutoField'); });\nexport var AutoFields = lazyLoad(function () { return import('./AutoFields'); });\nvar getDefaultValue = function (bridge) {\n    return bridge.getSubfields().reduce(function (acc, fieldName) {\n        var _a;\n        return (__assign(__assign({}, acc), (_a = {}, _a[fieldName] = bridge.getInitialValue(fieldName), _a)));\n    }, {});\n};\nexport function AutoformControls(props) {\n    var onChange = props.onChange, data = props.data, schema = props.schema, _a = props.columnCount, columnCount = _a === void 0 ? 2 : _a, Content = props.Content;\n    var bridge = useMemo(function () { return makeUniformsSchema(schema); }, [schema]);\n    useEffect(function () {\n        var newDefaultData = __assign(__assign({}, getDefaultValue(bridge)), (data !== null && data !== void 0 ? data : {}));\n        onChange(newDefaultData);\n    }, [bridge]);\n    var isSmall = useIsSmallScreen();\n    return (React.createElement(AutoForm\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    , { \n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        model: data, autosave: true, schema: bridge, onSubmit: onChange }, Content ? (React.createElement(Content, __assign({}, props, { columnCount: columnCount }))) : (React.createElement(\"div\", { style: {\n            columnCount: isSmall ? 1 : columnCount,\n            columnRule: '1px solid #E0E0E0',\n            columnGap: 48,\n        } },\n        React.createElement(AutoFields, { element: Fragment })))));\n}\n//# sourceMappingURL=index.js.map","/* eslint-disable @typescript-eslint/ban-types */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport Ajv from 'ajv';\nimport { JSONSchemaBridge } from 'uniforms-bridge-json-schema';\nvar ajv = new Ajv({ allErrors: true, useDefaults: true });\najv.addKeyword('uniforms');\nfunction createValidator(schema) {\n    var validator = ajv.compile(schema);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return function (model) {\n        var _a;\n        validator(model);\n        if (validator.errors && validator.errors.length) {\n            return ((_a = validator.errors) === null || _a === void 0 ? void 0 : _a.length) ? { details: validator.errors } : null;\n        }\n    };\n}\nfunction makeUniformsSchema(jsonSchema) {\n    var fullSchema = __assign({ type: 'object' }, jsonSchema);\n    var bridge = new JSONSchemaBridge(fullSchema, createValidator(fullSchema));\n    // see https://github.com/react-page/react-page/issues/1187\n    // we remap props.component to props._customComponent to avoid the underlying issue in uniforms\n    //\n    var getPropsOrg = bridge.getProps;\n    bridge.getProps = function (name) {\n        var _a = getPropsOrg.call(this, name), component = _a.component, props = __rest(_a, [\"component\"]);\n        if (component) {\n            return __assign({ _customComponent: component }, props);\n        }\n        return props;\n    };\n    return bridge;\n}\nexport default makeUniformsSchema;\n//# sourceMappingURL=makeUniformsSchema.js.map"],"names":["window","__NEXT_P","push","customContentPluginWithSpecialForm","Renderer","data","div","h3","p","title","description","id","version","controls","type","schema","properties","required","Content","nodeId","onChange","remove","Button","variant","onClick","lang","AutoFields","color","cellPlugins","slate","INITIAL_VALUE","createValue","rows","plugin","CustomFormLayout","useState","value","setValue","PageLayout","Editor","languages","label","useIsSmallScreen","theme","breakpoints","down","__assign","Object","assign","t","s","i","n","arguments","length","prototype","hasOwnProperty","call","apply","this","AutoForm","AutoformControls","props","_a","columnCount","bridge","useMemo","useEffect","newDefaultData","getSubfields","reduce","acc","fieldName","getInitialValue","getDefaultValue","isSmall","model","autosave","onSubmit","style","columnRule","columnGap","element","Fragment","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","ajv","allErrors","useDefaults","addKeyword","jsonSchema","fullSchema","validator","compile","errors","details","createValidator","getPropsOrg","getProps","name","component","_customComponent"],"sourceRoot":""}