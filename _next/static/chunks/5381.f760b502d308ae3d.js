(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5381],{31320:function(e,t,r){"use strict";function n(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function a(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function o(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return a(r.overflowY,t)||a(r.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function i(e,t,r,n,a,o,i,l){return o<e&&i>t||o>e&&i<t?0:o<=e&&l<=r||i>=t&&l>=r?o-e-n:i>t&&l<r||o<e&&l>r?i-t+a:0}function l(e,t){var r=window,a=t.scrollMode,l=t.block,s=t.inline,d=t.boundary,c=t.skipOverflowHiddenElements,u="function"==typeof d?d:function(e){return e!==d};if(!n(e))throw new TypeError("Invalid target");for(var f=document.scrollingElement||document.documentElement,v=[],h=e;n(h)&&u(h);){if((h=h.parentElement)===f){v.push(h);break}null!=h&&h===document.body&&o(h)&&!o(document.documentElement)||null!=h&&o(h,c)&&v.push(h)}for(var p=r.visualViewport?r.visualViewport.width:innerWidth,g=r.visualViewport?r.visualViewport.height:innerHeight,m=window.scrollX||pageXOffset,w=window.scrollY||pageYOffset,E=e.getBoundingClientRect(),b=E.height,y=E.width,k=E.top,C=E.right,x=E.bottom,D=E.left,O="start"===l||"nearest"===l?k:"end"===l?x:k+b/2,S="center"===s?D+y/2:"end"===s?C:D,R=[],N=0;N<v.length;N++){var B=v[N],T=B.getBoundingClientRect(),M=T.height,F=T.width,P=T.top,L=T.right,W=T.bottom,j=T.left;if("if-needed"===a&&k>=0&&D>=0&&x<=g&&C<=p&&k>=P&&x<=W&&D>=j&&C<=L)return R;var A=getComputedStyle(B),I=parseInt(A.borderLeftWidth,10),U=parseInt(A.borderTopWidth,10),V=parseInt(A.borderRightWidth,10),q=parseInt(A.borderBottomWidth,10),z=0,H=0,K="offsetWidth"in B?B.offsetWidth-B.clientWidth-I-V:0,_="offsetHeight"in B?B.offsetHeight-B.clientHeight-U-q:0;if(f===B)z="start"===l?O:"end"===l?O-g:"nearest"===l?i(w,w+g,g,U,q,w+O,w+O+b,b):O-g/2,H="start"===s?S:"center"===s?S-p/2:"end"===s?S-p:i(m,m+p,p,I,V,m+S,m+S+y,y),z=Math.max(0,z+w),H=Math.max(0,H+m);else{z="start"===l?O-P-U:"end"===l?O-W+q+_:"nearest"===l?i(P,W,M,U,q+_,O,O+b,b):O-(P+M/2)+_/2,H="start"===s?S-j-I:"center"===s?S-(j+F/2)+K/2:"end"===s?S-L+V+K:i(j,L,F,I,V+K,S,S+y,y);var J=B.scrollLeft,X=B.scrollTop;O+=X-(z=Math.max(0,Math.min(X+z,B.scrollHeight-M+_))),S+=J-(H=Math.max(0,Math.min(J+H,B.scrollWidth-F+K)))}R.push({el:B,top:z,left:H})}return R}r.d(t,{Z:function(){return l}})},61242:function(e){"use strict";e.exports=function(e){if(e=String(e||""),n.test(e))return"rtl";if(a.test(e))return"ltr";return"neutral"};var t="\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc",r="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff",n=new RegExp("^[^"+r+"]*["+t+"]"),a=new RegExp("^[^"+t+"]*["+r+"]")},66471:function(e){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,a,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;0!==a--;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;0!==a--;)if(!Object.prototype.hasOwnProperty.call(r,o[a]))return!1;for(a=n;0!==a--;){var i=o[a];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r}},71236:function(e,t){"use strict";for(var r="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},a={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},o={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=1;i<20;i++)o["f"+i]=111+i;function l(e,t,r){t&&!("byKey"in t)&&(r=t,t=null),Array.isArray(e)||(e=[e]);var n=e.map((function(e){return s(e,t)})),a=function(e){return n.some((function(t){return d(t,e)}))};return null==r?a:a(r)}function s(e,t){var r=t&&t.byKey,a={},o=(e=e.replace("++","+add")).split("+"),i=o.length;for(var l in n)a[n[l]]=!1;var s=!0,d=!1,f=void 0;try{for(var v,h=o[Symbol.iterator]();!(s=(v=h.next()).done);s=!0){var p=v.value,g=p.endsWith("?")&&p.length>1;g&&(p=p.slice(0,-1));var m=u(p),w=n[m];1!==i&&w||(r?a.key=m:a.which=c(p)),w&&(a[w]=!g||null)}}catch(E){d=!0,f=E}finally{try{!s&&h.return&&h.return()}finally{if(d)throw f}}return a}function d(e,t){for(var r in e){var n=e[r],a=void 0;if(null!=n&&((null!=(a="key"===r&&null!=t.key?t.key.toLowerCase():"which"===r?91===n&&93===t.which?91:t.which:t[r])||!1!==n)&&a!==n))return!1}return!0}function c(e){return e=u(e),o[e]||e.toUpperCase().charCodeAt(0)}function u(e){return e=e.toLowerCase(),e=a[e]||e}t.ZP=l,t.TB=function(e,t){return l(e,{byKey:!0},t)}},96539:function(e,t,r){var n=r(77400).Symbol;e.exports=n},99736:function(e,t,r){var n=r(96539),a=r(34840),o=r(21258),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},74833:function(e,t,r){var n=r(56127),a=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(a,""):e}},39120:function(e,t,r){var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},34840:function(e,t,r){var n=r(96539),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,l=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,l),r=e[l];try{e[l]=void 0;var n=!0}catch(s){}var a=i.call(e);return n&&(t?e[l]=r:delete e[l]),a}},21258:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},77400:function(e,t,r){var n=r(39120),a="object"==typeof self&&self&&self.Object===Object&&self,o=n||a||Function("return this")();e.exports=o},56127:function(e){var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},66726:function(e,t,r){var n=r(11611),a=r(82846),o=r(91936),i=Math.max,l=Math.min;e.exports=function(e,t,r){var s,d,c,u,f,v,h=0,p=!1,g=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function w(t){var r=s,n=d;return s=d=void 0,h=t,u=e.apply(n,r)}function E(e){return h=e,f=setTimeout(y,t),p?w(e):u}function b(e){var r=e-v;return void 0===v||r>=t||r<0||g&&e-h>=c}function y(){var e=a();if(b(e))return k(e);f=setTimeout(y,function(e){var r=t-(e-v);return g?l(r,c-(e-h)):r}(e))}function k(e){return f=void 0,m&&s?w(e):(s=d=void 0,u)}function C(){var e=a(),r=b(e);if(s=arguments,d=this,v=e,r){if(void 0===f)return E(v);if(g)return clearTimeout(f),f=setTimeout(y,t),w(v)}return void 0===f&&(f=setTimeout(y,t)),u}return t=o(t)||0,n(r)&&(p=!!r.leading,c=(g="maxWait"in r)?i(o(r.maxWait)||0,t):c,m="trailing"in r?!!r.trailing:m),C.cancel=function(){void 0!==f&&clearTimeout(f),h=0,s=v=d=f=void 0},C.flush=function(){return void 0===f?u:k(a())},C}},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},92360:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},55193:function(e,t,r){var n=r(99736),a=r(92360);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==n(e)}},82846:function(e,t,r){var n=r(77400);e.exports=function(){return n.Date.now()}},19783:function(e,t,r){var n=r(66726),a=r(11611);e.exports=function(e,t,r){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),n(e,t,{leading:o,maxWait:t,trailing:i})}},91936:function(e,t,r){var n=r(74833),a=r(11611),o=r(55193),i=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=l.test(e);return r||s.test(e)?d(e.slice(2),r?2:8):i.test(e)?NaN:+e}},80164:function(e,t,r){"use strict";r.d(t,{CX:function(){return rt},F3:function(){return Ie},mH:function(){return Ge},UE:function(){return $e},vt:function(){return te},ui:function(){return me},_7:function(){return ie},BU:function(){return tt}});var n=r(27378),a=r(55185),o=r(61242),i=r.n(o),l=r(19783),s=r.n(l),d=r(31320);function c(e){return e===Object(e)&&0!==Object.keys(e).length}var u=function(e,t){var r=!e.ownerDocument.documentElement.contains(e);if(c(t)&&"function"===typeof t.behavior)return t.behavior(r?[]:(0,d.Z)(e,t));if(!r){var n=function(e){return!1===e?{block:"end",inline:"nearest"}:c(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var r="scrollBehavior"in document.body.style;e.forEach((function(e){var n=e.el,a=e.top,o=e.left;n.scroll&&r?n.scroll({top:a,left:o,behavior:t}):(n.scrollTop=a,n.scrollLeft=o)}))}((0,d.Z)(e,n),n.behavior)}},f=r(71236),v="Invariant failed";var h=function(e,t){if(!e)throw new Error(v)},p=r(31542);function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var w=e=>{var{isLast:t,leaf:r,parent:o,text:i}=e,l=ie(),s=Ie.findPath(l,i),d=a.Path.parent(s);return l.isVoid(o)?n.createElement(b,{length:a.Node.string(o).length}):""!==r.text||o.children[o.children.length-1]!==i||l.isInline(o)||""!==a.Editor.string(l,d)?""===r.text?n.createElement(b,null):t&&"\n"===r.text.slice(-1)?n.createElement(E,{isTrailing:!0,text:r.text}):n.createElement(E,{text:r.text}):n.createElement(b,{isLineBreak:!0})},E=e=>{var{text:t,isTrailing:r=!1}=e;return n.createElement("span",{"data-slate-string":!0},t,r?"\n":null)},b=e=>{var{length:t=0,isLineBreak:r=!1}=e;return n.createElement("span",{"data-slate-zero-width":r?"n":"z","data-slate-length":t},"\ufeff",r?n.createElement("br",null):null)},y=new WeakMap,k=new WeakMap,C=new WeakMap,x=new WeakMap,D=new WeakMap,O=new WeakMap,S=new WeakMap,R=new WeakMap,N=new WeakMap,B=new WeakMap,T=new WeakMap,M=new WeakMap,F=Symbol("placeholder"),P=0,L=e=>{var{leaf:t,isLast:r,text:a,parent:o,renderPlaceholder:i,renderLeaf:l=(e=>n.createElement(j,Object.assign({},e)))}=e,s=(0,n.useRef)(null);(0,n.useEffect)((()=>{var e=null===s||void 0===s?void 0:s.current,t=document.querySelector('[data-slate-editor="true"]');if(e&&t)return t.style.minHeight="".concat(e.clientHeight,"px"),()=>{t.style.minHeight="auto"}}),[s,t]);var d=n.createElement(w,{key:P++,isLast:r,leaf:t,parent:o,text:a});if(t[F]){var c={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:s}};d=n.createElement(n.Fragment,null,i(c),d)}return l({attributes:{"data-slate-leaf":!0},children:d,leaf:t,text:a})},W=n.memo(L,((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&a.Text.equals(t.leaf,e.leaf)&&t.leaf[F]===e.leaf[F])),j=e=>{var{attributes:t,children:r}=e;return n.createElement("span",Object.assign({},t),r)},A="undefined"!==typeof navigator&&"undefined"!==typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,I="undefined"!==typeof navigator&&/Mac OS X/.test(navigator.userAgent),U="undefined"!==typeof navigator&&/Android/.test(navigator.userAgent),V="undefined"!==typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),q="undefined"!==typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),z="undefined"!==typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),H="undefined"!==typeof navigator&&/Chrome/i.test(navigator.userAgent),K="undefined"!==typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),_="undefined"!==typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),J=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),X=!K&&!z&&"undefined"!==typeof globalThis&&globalThis.InputEvent&&"function"===typeof globalThis.InputEvent.prototype.getTargetRanges,Y=J?n.useLayoutEffect:n.useEffect,Z=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every((r=>t.hasOwnProperty(r)&&e[r]===t[r])),$=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],o=t[r],i=m(n,["anchor","focus"]),l=m(o,["anchor","focus"]);if(!a.Range.equals(n,o)||n[F]!==o[F]||!Z(i,l))return!1}return!0},G=e=>{for(var{decorations:t,isLast:r,parent:o,renderPlaceholder:i,renderLeaf:l,text:s}=e,d=ie(),c=(0,n.useRef)(null),u=a.Text.decorations(s,t),f=Ie.findKey(d,s),v=[],h=0;h<u.length;h++){var p=u[h];v.push(n.createElement(W,{isLast:r&&h===u.length-1,key:"".concat(f.id,"-").concat(h),renderPlaceholder:i,leaf:p,text:s,parent:o,renderLeaf:l}))}return Y((()=>{c.current?(O.set(f,c.current),S.set(s,c.current),D.set(c.current,s)):(O.delete(f),S.delete(s))})),n.createElement("span",{"data-slate-node":"text",ref:c},v)},Q=n.memo(G,((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.text===e.text&&$(t.decorations,e.decorations))),ee=(0,n.createContext)(!1),te=()=>(0,n.useContext)(ee),re=e=>{var{decorations:t,element:r,renderElement:o=(e=>n.createElement(ae,Object.assign({},e))),renderPlaceholder:l,renderLeaf:s,selection:d}=e,c=(0,n.useRef)(null),u=ie(),f=pe(),v=u.isInline(r),h=Ie.findKey(u,r),p=se({decorations:t,node:r,renderElement:o,renderPlaceholder:l,renderLeaf:s,selection:d}),g={"data-slate-node":"element",ref:c};if(v&&(g["data-slate-inline"]=!0),!v&&a.Editor.hasInlines(u,r)){var m=a.Node.string(r),w=i()(m);"rtl"===w&&(g.dir=w)}if(a.Editor.isVoid(u,r)){g["data-slate-void"]=!0,!f&&v&&(g.contentEditable=!1);var E=v?"span":"div",[[b]]=a.Node.texts(r);p=f?null:n.createElement(E,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},n.createElement(Q,{renderPlaceholder:l,decorations:[],isLast:!1,parent:r,text:b})),y.set(b,0),k.set(b,r)}return Y((()=>{c.current?(O.set(h,c.current),S.set(r,c.current),D.set(c.current,r)):(O.delete(h),S.delete(r))})),n.createElement(ee.Provider,{value:!!d},o({attributes:g,children:p,element:r}))},ne=n.memo(re,((e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&$(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&a.Range.equals(e.selection,t.selection)))),ae=e=>{var{attributes:t,children:r,element:a}=e,o=ie().isInline(a)?"span":"div";return n.createElement(o,Object.assign({},t,{style:{position:"relative"}}),r)},oe=(0,n.createContext)(null),ie=()=>{var e=(0,n.useContext)(oe);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},le=(0,n.createContext)((()=>[])),se=e=>{for(var{decorations:t,node:r,renderElement:o,renderPlaceholder:i,renderLeaf:l,selection:s}=e,d=(0,n.useContext)(le),c=ie(),u=Ie.findPath(c,r),f=[],v=a.Element.isElement(r)&&!c.isInline(r)&&a.Editor.hasInlines(c,r),h=0;h<r.children.length;h++){var p=u.concat(h),g=r.children[h],m=Ie.findKey(c,g),w=a.Editor.range(c,p),E=s&&a.Range.intersection(w,s),b=d([g,p]);for(var C of t){var x=a.Range.intersection(C,w);x&&b.push(x)}a.Element.isElement(g)?f.push(n.createElement(ne,{decorations:b,element:g,key:m.id,renderElement:o,renderPlaceholder:i,renderLeaf:l,selection:E})):f.push(n.createElement(Q,{decorations:b,key:m.id,isLast:v&&h===r.children.length-1,parent:r,renderPlaceholder:i,renderLeaf:l,text:g})),y.set(g,h),k.set(g,r)}return f},de={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},ce={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},ue={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},fe=e=>{var t=de[e],r=ce[e],n=ue[e],a=t&&(0,f.TB)(t),o=r&&(0,f.TB)(r),i=n&&(0,f.TB)(n);return e=>!(!a||!a(e))||(!!(I&&o&&o(e))||!(I||!i||!i(e)))},ve={isBold:fe("bold"),isCompose:fe("compose"),isMoveBackward:fe("moveBackward"),isMoveForward:fe("moveForward"),isDeleteBackward:fe("deleteBackward"),isDeleteForward:fe("deleteForward"),isDeleteLineBackward:fe("deleteLineBackward"),isDeleteLineForward:fe("deleteLineForward"),isDeleteWordBackward:fe("deleteWordBackward"),isDeleteWordForward:fe("deleteWordForward"),isExtendBackward:fe("extendBackward"),isExtendForward:fe("extendForward"),isExtendLineBackward:fe("extendLineBackward"),isExtendLineForward:fe("extendLineForward"),isItalic:fe("italic"),isMoveLineBackward:fe("moveLineBackward"),isMoveLineForward:fe("moveLineForward"),isMoveWordBackward:fe("moveWordBackward"),isMoveWordForward:fe("moveWordForward"),isRedo:fe("redo"),isSplitBlock:fe("splitBlock"),isTransposeCharacter:fe("transposeCharacter"),isUndo:fe("undo")},he=(0,n.createContext)(!1),pe=()=>(0,n.useContext)(he),ge=(0,n.createContext)(null),me=()=>{var e=(0,n.useContext)(ge);if(!e)throw new Error("The `useSlate` hook must be used inside the <SlateProvider> component's context.");var[t]=e;return t},we=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,Ee=e=>be(e)&&1===e.nodeType,be=e=>{var t=we(e);return!!t&&e instanceof t.Node},ye=e=>{var t=e&&e.anchorNode&&we(e.anchorNode);return!!t&&e instanceof t.Selection},ke=e=>be(e)&&3===e.nodeType,Ce=(e,t,r)=>{for(var n,{childNodes:a}=e,o=a[t],i=t,l=!1,s=!1;(be(n=o)&&8===n.nodeType||Ee(o)&&0===o.childNodes.length||Ee(o)&&"false"===o.getAttribute("contenteditable"))&&(!l||!s);)i>=a.length?(l=!0,i=t-1,r="backward"):i<0?(s=!0,i=t+1,r="forward"):(o=a[i],t=i,i+="forward"===r?1:-1);return[o,t]},xe=(e,t,r)=>{var[n]=Ce(e,t,r);return n},De=e=>{var t="";if(ke(e)&&e.nodeValue)return e.nodeValue;if(Ee(e)){for(var r of Array.from(e.childNodes))t+=De(r);var n=getComputedStyle(e).getPropertyValue("display");"block"!==n&&"list"!==n&&"BR"!==e.tagName||(t+="\n")}return t};function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Re=e=>n.createElement(n.Fragment,null,se(e)),Ne=e=>{var{attributes:t,children:r}=e;return n.createElement("span",Object.assign({},t),r)},Be=()=>[],Te=(e,t)=>{var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),u(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect},Me=(e,t)=>be(t)&&Ie.hasDOMNode(e,t),Fe=(e,t)=>be(t)&&Ie.hasDOMNode(e,t,{editable:!0}),Pe=(e,t)=>{var r=Me(e,t)&&Ie.toSlateNode(e,t);return a.Editor.isVoid(e,r)},Le=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},We=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented},je=0;class Ae{constructor(){this.id="".concat(je++)}}var Ie={getWindow(e){var t=C.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},findKey(e,t){var r=R.get(t);return r||(r=new Ae,R.set(t,r)),r},findPath(e,t){for(var r=[],n=t;;){var o=k.get(n);if(null==o){if(a.Editor.isEditor(n))return r;break}var i=y.get(n);if(null==i)break;r.unshift(i),n=o}throw new Error("Unable to find the path for Slate node: ".concat(JSON.stringify(t)))},findDocumentOrShadowRoot(e){var t=Ie.toDOMNode(e,e),r=t.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&null!=r.getSelection?r:t.ownerDocument},isFocused:e=>!!B.get(e),isReadOnly:e=>!!N.get(e),blur(e){var t=Ie.toDOMNode(e,e),r=Ie.findDocumentOrShadowRoot(e);B.set(e,!1),r.activeElement===t&&t.blur()},focus(e){var t=Ie.toDOMNode(e,e),r=Ie.findDocumentOrShadowRoot(e);B.set(e,!0),r.activeElement!==t&&t.focus({preventScroll:!0})},deselect(e){Ie.toDOMNode(e,e);var{selection:t}=e,r=Ie.findDocumentOrShadowRoot(e).getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&a.Transforms.deselect(e)},hasDOMNode(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:a=!1}=n,o=Ie.toDOMNode(e,e);try{r=Ee(t)?t:t.parentElement}catch(i){if(!i.message.includes('Permission denied to access property "nodeType"'))throw i}return!!r&&(r.closest("[data-slate-editor]")===o&&(!a||r.isContentEditable||!!r.getAttribute("data-slate-zero-width")))},insertData(e,t){e.insertData(t)},setFragmentData(e,t){e.setFragmentData(t)},toDOMNode(e,t){var r=a.Editor.isEditor(t)?x.get(e):O.get(Ie.findKey(e,t));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(JSON.stringify(t)));return r},toDOMPoint(e,t){var r,[n]=a.Editor.node(e,t.path),o=Ie.toDOMNode(e,n);a.Editor.void(e,{at:t})&&(t={path:t.path,offset:0});var i=Array.from(o.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),l=0;for(var s of i){var d=s.childNodes[0];if(null!=d&&null!=d.textContent){var{length:c}=d.textContent,u=s.getAttribute("data-slate-length"),f=l+(null==u?c:parseInt(u,10));if(t.offset<=f){r=[d,Math.min(c,Math.max(0,t.offset-l))];break}l=f}}if(!r)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(JSON.stringify(t)));return r},toDOMRange(e,t){var{anchor:r,focus:n}=t,o=a.Range.isBackward(t),i=Ie.toDOMPoint(e,r),l=a.Range.isCollapsed(t)?i:Ie.toDOMPoint(e,n),s=Ie.getWindow(e).document.createRange(),[d,c]=o?l:i,[u,f]=o?i:l,v=!!(Ee(d)?d:d.parentElement).getAttribute("data-slate-zero-width"),h=!!(Ee(u)?u:u.parentElement).getAttribute("data-slate-zero-width");return s.setStart(d,v?1:c),s.setEnd(u,h?1:f),s},toSlateNode(e,t){var r=Ee(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?D.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},findEventRange(e,t){"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:r,clientY:n,target:o}=t;if(null==r||null==n)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var i,l=Ie.toSlateNode(e,t.target),s=Ie.findPath(e,l);if(a.Editor.isVoid(e,l)){var d=o.getBoundingClientRect(),c=e.isInline(l)?r-d.left<d.left+d.width-r:n-d.top<d.top+d.height-n,u=a.Editor.point(e,s,{edge:c?"start":"end"}),f=c?a.Editor.before(e,u):a.Editor.after(e,u);if(f)return a.Editor.range(e,f)}var{document:v}=window;if(v.caretRangeFromPoint)i=v.caretRangeFromPoint(r,n);else{var h=v.caretPositionFromPoint(r,n);h&&((i=v.createRange()).setStart(h.offsetNode,h.offset),i.setEnd(h.offsetNode,h.offset))}if(!i)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return Ie.toSlateRange(e,i,{exactMatch:!1})},toSlatePoint(e,t,r){var[n,a]=r?t:(e=>{var[t,r]=e;if(Ee(t)&&t.childNodes.length){var n=r===t.childNodes.length,a=n?r-1:r;for([t,a]=Ce(t,a,n?"backward":"forward"),n=a<r;Ee(t)&&t.childNodes.length;){var o=n?t.childNodes.length-1:0;t=xe(t,o,n?"backward":"forward")}r=n&&null!=t.textContent?t.textContent.length:0}return[t,r]})(t),o=n.parentNode,i=null,l=0;if(o){var s=o.closest('[data-slate-void="true"]'),d=o.closest("[data-slate-leaf]"),c=null;if(d){i=d.closest('[data-slate-node="text"]');var u=Ie.getWindow(e).document.createRange();u.setStart(i,0),u.setEnd(n,a);var f=u.cloneContents();[...Array.prototype.slice.call(f.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(f.querySelectorAll("[contenteditable=false]"))].forEach((e=>{e.parentNode.removeChild(e)})),l=f.textContent.length,c=i}else s&&((d=s.querySelector("[data-slate-leaf]"))?(i=d.closest('[data-slate-node="text"]'),l=(c=d).textContent.length,c.querySelectorAll("[data-slate-zero-width]").forEach((e=>{l-=e.textContent.length}))):l=1);c&&l===c.textContent.length&&o.hasAttribute("data-slate-zero-width")&&l--}if(!i){if(r)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var v=Ie.toSlateNode(e,i);return{path:Ie.findPath(e,v),offset:l}},toSlateRange(e,t,r){var n,a,o,i,l,{exactMatch:s}=r;if((ye(t)?t.anchorNode:t.startContainer)&&(ye(t)?(n=t.anchorNode,a=t.anchorOffset,o=t.focusNode,i=t.focusOffset,l=H&&window.document.activeElement&&window.document.activeElement.shadowRoot?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed):(n=t.startContainer,a=t.startOffset,o=t.endContainer,i=t.endOffset,l=t.collapsed)),null==n||null==o||null==a||null==i)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));var d=Ie.toSlatePoint(e,[n,a],s);if(!d)return null;var c=l?d:Ie.toSlatePoint(e,[o,i],s);return c?{anchor:d,focus:c}:null},hasRange(e,t){var{anchor:r,focus:n}=t;return a.Editor.hasPath(e,r.path)&&a.Editor.hasPath(e,n.path)}};function Ue(e,t){if(e===t)return null;var r=function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++)if(e.charAt(n)!==t.charAt(n))return n;return e.length!==t.length?r:null}(e,t);if(null===r)return null;var n=function(e,t,r){for(var n=e.length,a=t.length,o=Math.min(n,a,r),i=0;i<o;i++)if(e.charAt(n-i-1)!==t.charAt(a-i-1))return i;return e.length!==t.length?o:null}(e,t,Math.min(e.length-r,t.length-r));return null===n?null:{start:r,end:n}}function Ve(e,t){return e.slice(t.start,e.length-t.end)}function qe(e,t){var r=Ie.toSlateNode(e,t);if(a.Text.isText(r)){var n=r.text,o=t.textContent;if(o.endsWith("\n")&&(o=o.slice(0,o.length-1)),o!==n){var i=function(e,t){if(void 0===e||void 0===t)return null;var r=Ue(e,t);if(null==r)return null;var n=Ve(t,r),a=Ve(e,r);return{start:r.start,end:e.length-r.end,insertText:n,removeText:a}}(n,o);if(null!==i)return{text:i,path:Ie.findPath(e,r)}}}}function ze(e,t,r){var{path:n,text:o}=r,i={anchor:{path:n,offset:o.start},focus:{path:n,offset:o.end}};if(!t||!a.Range.isCollapsed(t))return i;var{insertText:l,removeText:s}=o;if((1===l.length||1===s.length)&&a.Path.equals(t.anchor.path,n)){var[d]=Array.from(a.Editor.nodes(e,{at:t,match:a.Text.isText}));if(d){var[c]=d,{anchor:u}=t,f=c.text[u.offset-1],v=c.text[u.offset];if(1===l.length&&l===v)return t;if(1===s.length&&s===f)return{anchor:{path:n,offset:u.offset-1},focus:{path:n,offset:u.offset}}}}return i}function He(e){try{var t=M.get(e);t&&t()}catch(r){console.error(r)}}class Ke{constructor(e){this.editor=e,this.flush=e=>{try{this.reconcileMutations(e)}catch(t){console.error(t),He(this.editor)}},this.reconcileMutations=e=>{var t=function(e,t){var r=[],n=[],o=[],i=[];return t.forEach((t=>{switch(t.type){case"childList":t.addedNodes.length&&t.addedNodes.forEach((e=>{r.push(e)})),t.removedNodes.forEach((e=>{n.push(e)}));break;case"characterData":i.push(t);var{parentNode:l}=t.target;if(!l)return;var s=qe(e,l);if(!s)return;if(o.some((e=>{var{path:t}=e;return a.Path.equals(t,s.path)})))return;o.push(s)}})),{addedNodes:r,removedNodes:n,insertedText:o,characterDataMutations:i}}(this.editor,e),{insertedText:r,removedNodes:n}=t;if(((e,t)=>{var{selection:r}=e,{removedNodes:n}=t;return!!r&&a.Range.isExpanded(r)&&n.length>0})(this.editor,t)){var o=function(e){return e.reduce(((e,t)=>{var{text:r}=t;return"".concat(e).concat(r.insertText)}),"")}(r);this.replaceExpandedSelection(o)}else((e,t)=>{var{addedNodes:r}=t,{selection:n}=e,o=n?a.Node.parent(e,n.anchor.path):null,i=o?Ie.toDOMNode(e,o):null;return!!i&&r.some((e=>e instanceof HTMLElement&&e.tagName===(null===i||void 0===i?void 0:i.tagName)))})(this.editor,t)?this.insertBreak():((e,t)=>{var{addedNodes:r,characterDataMutations:n,removedNodes:a}=t;return a.length>0&&0===r.length&&n.length>0})(this.editor,t)?this.removeLeafNodes(n):((e,t)=>{var{removedNodes:r}=t;return r.length>0})(this.editor,t)?this.deleteBackward():((e,t)=>{var{insertedText:r}=t;return r.length>0})(this.editor,t)&&this.insertText(r)},this.insertText=e=>{var{selection:t}=this.editor;e.forEach((e=>{a.Transforms.insertText(this.editor,e.text.insertText,{at:ze(this.editor,t,e)})}))},this.insertBreak=()=>{var{selection:e}=this.editor;a.Editor.insertBreak(this.editor),He(this.editor),e&&setTimeout((()=>{this.editor.selection&&a.Range.equals(e,this.editor.selection)&&a.Transforms.move(this.editor)}),100)},this.replaceExpandedSelection=e=>{a.Editor.deleteFragment(this.editor),e.length&&a.Editor.insertText(this.editor,e),He(this.editor)},this.deleteBackward=()=>{a.Editor.deleteBackward(this.editor),Ie.focus(this.editor),He(this.editor)},this.removeLeafNodes=e=>{for(var t of e){var r=Ie.toSlateNode(this.editor,t);if(r){var n=Ie.findPath(this.editor,r);a.Transforms.delete(this.editor,{at:n}),He(this.editor)}}},this.editor=e}}var _e={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0};function Je(e){var t=ie(),[r]=(0,n.useState)((()=>new Ke(t))),{receivedUserInput:a,onUserInput:o}=function(){var e=ie(),t=(0,n.useRef)(!1),r=(0,n.useRef)(null),a=(0,n.useCallback)((()=>{if(!1===t.current){var n=Ie.getWindow(e);t.current=!0,r.current&&n.cancelAnimationFrame(r.current),r.current=n.requestAnimationFrame((()=>{t.current=!1,r.current=null}))}}),[]);return(0,n.useEffect)((()=>{t.current&&(t.current=!1)})),{receivedUserInput:t,onUserInput:a}}(),i=(0,n.useRef)(null),l=(0,n.useRef)(!1);return function(e,t,r){var[a]=(0,n.useState)((()=>new MutationObserver(t)));Y((()=>{a.disconnect()})),(0,n.useEffect)((()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return a.observe(e.current,r),a.disconnect.bind(a)}))}(e,(0,n.useCallback)((e=>{a.current&&(l.current=!0,r.flush(e),i.current&&clearTimeout(i.current),i.current=setTimeout((()=>{l.current=!1,i.current=null}),250))}),[]),_e),{isReconciling:l,onUserInput:o}}function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ze=(0,n.createContext)(!1),$e=()=>(0,n.useContext)(Ze),Ge=e=>{var{editor:t,children:r,onChange:o,value:i}=e,l=m(e,["editor","children","onChange","value"]),[s,d]=(0,n.useState)(0),c=(0,n.useMemo)((()=>(h(a.Node.isNodeList(i),"[Slate] value is invalid! Expected a list of elements but got: ".concat(JSON.stringify(i))),h(a.Editor.isEditor(t),"[Slate] editor is invalid! you passed: ".concat(JSON.stringify(t))),t.children=i,Object.assign(t,l),[t])),[s,i,...Object.values(l)]),u=(0,n.useCallback)((()=>{o(t.children),d(s+1)}),[s,o]);T.set(t,u),(0,n.useEffect)((()=>()=>{T.set(t,(()=>{}))}),[]);var[f,v]=(0,n.useState)(Ie.isFocused(t));return(0,n.useEffect)((()=>{v(Ie.isFocused(t))})),Y((()=>{var e=()=>v(Ie.isFocused(t));return document.addEventListener("focus",e,!0),()=>document.removeEventListener("focus",e,!0)}),[]),Y((()=>{var e=()=>v(Ie.isFocused(t));return document.addEventListener("blur",e,!0),()=>document.removeEventListener("blur",e,!0)}),[]),n.createElement(ge.Provider,{value:c},n.createElement(oe.Provider,{value:t},n.createElement(Ze.Provider,{value:f},r)))},Qe=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},et=(e,t,r)=>{var n=Ie.toDOMRange(e,t).getBoundingClientRect(),a=Ie.toDOMRange(e,r).getBoundingClientRect();return Qe(n,a)&&Qe(a,n)},tt=e=>{var t=e,{apply:r,onChange:n,deleteBackward:o}=t;return t.deleteBackward=r=>{if("line"!==r)return o(r);if(e.selection&&a.Range.isCollapsed(e.selection)){var n=a.Editor.above(e,{match:t=>a.Editor.isBlock(e,t),at:e.selection});if(n){var[,i]=n,l=a.Editor.range(e,i,e.selection.anchor),s=((e,t)=>{var r=a.Editor.range(e,a.Range.end(t)),n=Array.from(a.Editor.positions(e,{at:t})),o=0,i=n.length,l=Math.floor(i/2);if(et(e,a.Editor.range(e,n[o]),r))return a.Editor.range(e,n[o],r);if(n.length<2)return a.Editor.range(e,n[n.length-1],r);for(;l!==n.length&&l!==o;)et(e,a.Editor.range(e,n[l]),r)?i=l:o=l,l=Math.floor((o+i)/2);return a.Editor.range(e,n[i],r)})(t,l);a.Range.isCollapsed(s)||a.Transforms.delete(e,{at:s})}}},t.apply=e=>{var n=[];switch(e.type){case"insert_text":case"remove_text":case"set_node":for(var[o,i]of a.Editor.levels(t,{at:e.path})){var l=Ie.findKey(t,o);n.push([i,l])}break;case"insert_node":case"remove_node":case"merge_node":case"split_node":for(var[s,d]of a.Editor.levels(t,{at:a.Path.parent(e.path)})){var c=Ie.findKey(t,s);n.push([d,c])}break;case"move_node":for(var[u,f]of a.Editor.levels(t,{at:a.Path.common(a.Path.parent(e.path),a.Path.parent(e.newPath))})){var v=Ie.findKey(t,u);n.push([f,v])}}for(var[h,p]of(r(e),n)){var[g]=a.Editor.node(t,h);R.set(g,p)}},t.setFragmentData=e=>{var{selection:r}=t;if(r){var[n,o]=a.Range.edges(r),i=a.Editor.void(t,{at:n.path}),l=a.Editor.void(t,{at:o.path});if(!a.Range.isCollapsed(r)||i){var s=Ie.toDOMRange(t,r),d=s.cloneContents(),c=d.childNodes[0];if(d.childNodes.forEach((e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)})),l){var[u]=l,f=s.cloneRange(),v=Ie.toDOMNode(t,u);f.setEndAfter(v),d=f.cloneContents()}if(i&&(c=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach((e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""})),ke(c)){var h=document.createElement("span");h.style.whiteSpace="pre",h.appendChild(c),d.appendChild(h),c=h}var p=t.getFragment(),g=JSON.stringify(p),m=window.btoa(encodeURIComponent(g));c.setAttribute("data-slate-fragment",m),e.setData("application/x-slate-fragment",m);var w=document.createElement("div");return w.appendChild(d),w.setAttribute("hidden","true"),document.body.appendChild(w),e.setData("text/html",w.innerHTML),e.setData("text/plain",De(w)),document.body.removeChild(w),e}}},t.insertData=e=>{var r=e.getData("application/x-slate-fragment");if(r){var n=decodeURIComponent(window.atob(r)),o=JSON.parse(n);t.insertFragment(o)}else{var i=e.getData("text/plain");if(i){var l=i.split(/\r\n|\r|\n/),s=!1;for(var d of l)s&&a.Transforms.splitNodes(t,{always:!0}),t.insertText(d),s=!0}}},t.onChange=()=>{p.unstable_batchedUpdates((()=>{var e=T.get(t);e&&e(),n()}))},t},rt=U?e=>{var{autoFocus:t,decorate:r=Be,onDOMBeforeInput:o,placeholder:i,readOnly:l=!1,renderElement:d,renderLeaf:c,renderPlaceholder:f=(e=>n.createElement(Ne,Object.assign({},e))),style:v={},as:h="div"}=e,p=m(e,["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","style","as"]),g=me(),w=(0,n.useRef)(null),E=Je(w);N.set(g,l);var b=(0,n.useMemo)((()=>({isUpdatingSelection:!1,latestElement:null})),[]),[y,k]=(0,n.useState)(0),O=(0,n.useCallback)((()=>{k((e=>e+1))}),[y]);Y((()=>{var e;w.current&&(e=we(w.current))?(C.set(g,e),x.set(g,w.current),S.set(g,w.current),D.set(w.current,g),M.set(g,O)):(S.delete(g),M.delete(g));try{var{selection:t}=g,r=Ie.findDocumentOrShadowRoot(g).getSelection();if(!r||!Ie.isFocused(g))return;var n="None"!==r.type;if(!t&&!n)return;var o=x.get(g),i=!1;if(o.contains(r.anchorNode)&&o.contains(r.focusNode)&&(i=!0),n&&i&&t){var l=Ie.toSlateRange(g,r,{exactMatch:!0});if(l&&a.Range.equals(l,t))return}if(t&&!Ie.hasRange(g,t))return void(g.selection=Ie.toSlateRange(g,r,{exactMatch:!1}));var s=Ie.toDOMNode(g,g);b.isUpdatingSelection=!0;var d=t&&Ie.toDOMRange(g,t);if(d){a.Range.isBackward(t)?r.setBaseAndExtent(d.endContainer,d.endOffset,d.startContainer,d.startOffset):r.setBaseAndExtent(d.startContainer,d.startOffset,d.endContainer,d.endOffset);var c=d.startContainer.parentElement;c.getBoundingClientRect=d.getBoundingClientRect.bind(d),u(c,{scrollMode:"if-needed",boundary:s}),delete c.getBoundingClientRect}else r.removeAllRanges();setTimeout((()=>{b.isUpdatingSelection=!1}))}catch(f){b.isUpdatingSelection=!1}})),(0,n.useEffect)((()=>{w.current&&t&&w.current.focus()}),[t]);var R=(0,n.useCallback)((e=>{l||!Fe(g,e.target)||We(e,o)||E.onUserInput()}),[l,o]);Y((()=>{var e=w.current;return null===e||void 0===e||e.addEventListener("beforeinput",R),()=>null===e||void 0===e?void 0:e.removeEventListener("beforeinput",R)}),[y,o]);var T=(0,n.useCallback)(s()((()=>{try{if(!l&&!b.isUpdatingSelection&&!E.isReconciling.current){var e=Ie.findDocumentOrShadowRoot(g),{activeElement:t}=e,r=Ie.toDOMNode(g,g),n=e.getSelection();if(t===r?(b.latestElement=t,B.set(g,!0)):B.delete(g),!n)return a.Transforms.deselect(g);var{anchorNode:o,focusNode:i}=n,s=Fe(g,o)||Pe(g,o),d=Fe(g,i)||Pe(g,i);if(s&&d){var c=Ie.toSlateRange(g,n,{exactMatch:!1});a.Transforms.select(g,c)}else a.Transforms.deselect(g)}}catch(u){}}),100),[l]);Y((()=>{var e=Ie.getWindow(g);return e.document.addEventListener("selectionchange",T),()=>{e.document.removeEventListener("selectionchange",T)}}));var P=r([g,[]]);if(i&&1===g.children.length&&1===Array.from(a.Node.texts(g)).length&&""===a.Node.string(g)){var L=a.Editor.start(g,[]);P.push({[F]:!0,placeholder:i,anchor:L,focus:L})}return n.createElement(he.Provider,{value:l},n.createElement(le.Provider,{value:r},n.createElement(h,Object.assign({key:y,role:l?void 0:"textbox"},p,{spellCheck:p.spellCheck,autoCorrect:p.autoCorrect,autoCapitalize:p.autoCapitalize,"data-slate-editor":!0,"data-slate-node":"value",contentEditable:!l||void 0,suppressContentEditableWarning:!0,ref:w,style:Ye({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},v),onCopy:(0,n.useCallback)((e=>{Fe(g,e.target)&&!Le(e,p.onCopy)&&(e.preventDefault(),Ie.setFragmentData(g,e.clipboardData))}),[p.onCopy]),onCut:(0,n.useCallback)((e=>{if(!l&&Fe(g,e.target)&&!Le(e,p.onCut)){e.preventDefault(),Ie.setFragmentData(g,e.clipboardData);var{selection:t}=g;if(t)if(a.Range.isExpanded(t))a.Editor.deleteFragment(g);else{var r=a.Node.parent(g,t.anchor.path);a.Editor.isVoid(g,r)&&a.Transforms.delete(g)}}}),[l,p.onCut]),onFocus:(0,n.useCallback)((e=>{if(!l&&!b.isUpdatingSelection&&Fe(g,e.target)&&!Le(e,p.onFocus)){var t=Ie.findDocumentOrShadowRoot(g);b.latestElement=t.activeElement,B.set(g,!0)}}),[l,p.onFocus]),onBlur:(0,n.useCallback)((e=>{if(!l&&!b.isUpdatingSelection&&Fe(g,e.target)&&!Le(e,p.onBlur)){var t=Ie.findDocumentOrShadowRoot(g);if(b.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(r!==Ie.toDOMNode(g,g)&&(!Ee(r)||!r.hasAttribute("data-slate-spacer"))){if(null!=r&&be(r)&&Ie.hasDOMNode(g,r)){var n=Ie.toSlateNode(g,r);if(a.Element.isElement(n)&&!g.isVoid(n))return}B.delete(g)}}}}),[l,p.onBlur]),onPaste:(0,n.useCallback)((e=>{!Fe(g,e.target)||Le(e,p.onPaste)||l||(e.preventDefault(),Ie.insertData(g,e.clipboardData))}),[l,p.onPaste])}),se({decorations:P,node:g,renderElement:d,renderPlaceholder:f,renderLeaf:c,selection:g.selection}))))}:e=>{var{autoFocus:t,decorate:r=Be,onDOMBeforeInput:o,placeholder:l,readOnly:d=!1,renderElement:c,renderLeaf:u,renderPlaceholder:f=(e=>n.createElement(Ne,Object.assign({},e))),scrollSelectionIntoView:v=Te,style:h={},as:p="div"}=e,g=m(e,["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as"]),w=me(),[E,b]=(0,n.useState)(!1),y=(0,n.useRef)(null);N.set(w,d);var k=(0,n.useMemo)((()=>({isComposing:!1,isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null})),[]);Y((()=>{var e;y.current&&(e=we(y.current))?(C.set(w,e),x.set(w,y.current),S.set(w,y.current),D.set(y.current,w)):S.delete(w);var{selection:t}=w,r=Ie.findDocumentOrShadowRoot(w).getSelection();if(!k.isComposing&&r&&Ie.isFocused(w)){var n="None"!==r.type;if(t||n){var o=x.get(w),i=!1;if(o.contains(r.anchorNode)&&o.contains(r.focusNode)&&(i=!0),n&&i&&t){var l=Ie.toSlateRange(w,r,{exactMatch:!0});if(l&&a.Range.equals(l,t))return}if(!t||Ie.hasRange(w,t)){k.isUpdatingSelection=!0;var s=t&&Ie.toDOMRange(w,t);s?(a.Range.isBackward(t)?r.setBaseAndExtent(s.endContainer,s.endOffset,s.startContainer,s.startOffset):r.setBaseAndExtent(s.startContainer,s.startOffset,s.endContainer,s.endOffset),v(w,s)):r.removeAllRanges(),setTimeout((()=>{s&&V&&Ie.toDOMNode(w,w).focus();k.isUpdatingSelection=!1}))}else w.selection=Ie.toSlateRange(w,r,{exactMatch:!1})}}})),(0,n.useEffect)((()=>{y.current&&t&&y.current.focus()}),[t]);var O=(0,n.useCallback)((e=>{if(!d&&Fe(w,e.target)&&!We(e,o)){var{selection:t}=w,{inputType:r}=e,n=e.dataTransfer||e.data||void 0;if("insertCompositionText"===r||"deleteCompositionText"===r)return;if(e.preventDefault(),!r.startsWith("delete")||r.startsWith("deleteBy")){var[i]=e.getTargetRanges();if(i){var l=Ie.toSlateRange(w,i,{exactMatch:!1});t&&a.Range.equals(t,l)||a.Transforms.select(w,l)}}if(t&&a.Range.isExpanded(t)&&r.startsWith("delete")){var s=r.endsWith("Backward")?"backward":"forward";return void a.Editor.deleteFragment(w,{direction:s})}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":a.Editor.deleteFragment(w);break;case"deleteContent":case"deleteContentForward":a.Editor.deleteForward(w);break;case"deleteContentBackward":a.Editor.deleteBackward(w);break;case"deleteEntireSoftLine":a.Editor.deleteBackward(w,{unit:"line"}),a.Editor.deleteForward(w,{unit:"line"});break;case"deleteHardLineBackward":a.Editor.deleteBackward(w,{unit:"block"});break;case"deleteSoftLineBackward":a.Editor.deleteBackward(w,{unit:"line"});break;case"deleteHardLineForward":a.Editor.deleteForward(w,{unit:"block"});break;case"deleteSoftLineForward":a.Editor.deleteForward(w,{unit:"line"});break;case"deleteWordBackward":a.Editor.deleteBackward(w,{unit:"word"});break;case"deleteWordForward":a.Editor.deleteForward(w,{unit:"word"});break;case"insertLineBreak":case"insertParagraph":a.Editor.insertBreak(w);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===r&&(k.isComposing&&b(!1),k.isComposing=!1),n instanceof Ie.getWindow(w).DataTransfer?Ie.insertData(w,n):"string"===typeof n&&a.Editor.insertText(w,n)}}}),[d,o]);Y((()=>(y.current&&X&&y.current.addEventListener("beforeinput",O),()=>{y.current&&X&&y.current.removeEventListener("beforeinput",O)})),[O]);var R=(0,n.useCallback)(s()((()=>{if(!d&&!k.isComposing&&!k.isUpdatingSelection&&!k.isDraggingInternally){var e=Ie.findDocumentOrShadowRoot(w),{activeElement:t}=e,r=Ie.toDOMNode(w,w),n=e.getSelection();if(t===r?(k.latestElement=t,B.set(w,!0)):B.delete(w),!n)return a.Transforms.deselect(w);var{anchorNode:o,focusNode:i}=n,l=Fe(w,o)||Pe(w,o),s=Fe(w,i)||Pe(w,i);if(l&&s){var c=Ie.toSlateRange(w,n,{exactMatch:!1});a.Transforms.select(w,c)}else a.Transforms.deselect(w)}}),100),[d]);Y((()=>{var e=Ie.getWindow(w);return e.document.addEventListener("selectionchange",R),()=>{e.document.removeEventListener("selectionchange",R)}}),[R]);var T=r([w,[]]);if(l&&1===w.children.length&&1===Array.from(a.Node.texts(w)).length&&""===a.Node.string(w)&&!E){var M=a.Editor.start(w,[]);T.push({[F]:!0,placeholder:l,anchor:M,focus:M})}return n.createElement(he.Provider,{value:d},n.createElement(le.Provider,{value:r},n.createElement(p,Object.assign({"data-gramm":!1,role:d?void 0:"textbox"},g,{spellCheck:!!X&&g.spellCheck,autoCorrect:X?g.autoCorrect:"false",autoCapitalize:X?g.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!d||void 0,suppressContentEditableWarning:!0,ref:y,style:Se({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},h),onBeforeInput:(0,n.useCallback)((e=>{if(!X&&!d&&!Le(e,g.onBeforeInput)&&Fe(w,e.target)&&(e.preventDefault(),!k.isComposing)){var t=e.data;a.Editor.insertText(w,t)}}),[d]),onBlur:(0,n.useCallback)((e=>{if(!d&&!k.isUpdatingSelection&&Fe(w,e.target)&&!Le(e,g.onBlur)){var t=Ie.findDocumentOrShadowRoot(w);if(k.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(r!==Ie.toDOMNode(w,w)&&(!Ee(r)||!r.hasAttribute("data-slate-spacer"))){if(null!=r&&be(r)&&Ie.hasDOMNode(w,r)){var n=Ie.toSlateNode(w,r);if(a.Element.isElement(n)&&!w.isVoid(n))return}if(q){var o=t.getSelection();null===o||void 0===o||o.removeAllRanges()}B.delete(w)}}}}),[d,g.onBlur]),onClick:(0,n.useCallback)((e=>{if(!d&&Me(w,e.target)&&!Le(e,g.onClick)&&be(e.target)){var t=Ie.toSlateNode(w,e.target),r=Ie.findPath(w,t),n=a.Editor.start(w,r),o=a.Editor.end(w,r),i=a.Editor.void(w,{at:n}),l=a.Editor.void(w,{at:o});if(i&&l&&a.Path.equals(i[1],l[1])){var s=a.Editor.range(w,n);a.Transforms.select(w,s)}}}),[d,g.onClick]),onCompositionEnd:(0,n.useCallback)((e=>{Fe(w,e.target)&&!Le(e,g.onCompositionEnd)&&(k.isComposing&&b(!1),k.isComposing=!1,q||_||A||!e.data||a.Editor.insertText(w,e.data))}),[g.onCompositionEnd]),onCompositionUpdate:(0,n.useCallback)((e=>{Fe(w,e.target)&&!Le(e,g.onCompositionUpdate)&&(!k.isComposing&&b(!0),k.isComposing=!0)}),[g.onCompositionUpdate]),onCompositionStart:(0,n.useCallback)((e=>{if(Fe(w,e.target)&&!Le(e,g.onCompositionStart)){var{selection:t}=w;t&&a.Range.isExpanded(t)&&a.Editor.deleteFragment(w)}}),[g.onCompositionStart]),onCopy:(0,n.useCallback)((e=>{Fe(w,e.target)&&!Le(e,g.onCopy)&&(e.preventDefault(),Ie.setFragmentData(w,e.clipboardData))}),[g.onCopy]),onCut:(0,n.useCallback)((e=>{if(!d&&Fe(w,e.target)&&!Le(e,g.onCut)){e.preventDefault(),Ie.setFragmentData(w,e.clipboardData);var{selection:t}=w;if(t)if(a.Range.isExpanded(t))a.Editor.deleteFragment(w);else{var r=a.Node.parent(w,t.anchor.path);a.Editor.isVoid(w,r)&&a.Transforms.delete(w)}}}),[d,g.onCut]),onDragOver:(0,n.useCallback)((e=>{if(Me(w,e.target)&&!Le(e,g.onDragOver)){var t=Ie.toSlateNode(w,e.target);a.Editor.isVoid(w,t)&&e.preventDefault()}}),[g.onDragOver]),onDragStart:(0,n.useCallback)((e=>{if(Me(w,e.target)&&!Le(e,g.onDragStart)){var t=Ie.toSlateNode(w,e.target),r=Ie.findPath(w,t);if(a.Editor.isVoid(w,t)||a.Editor.void(w,{at:r,voids:!0})){var n=a.Editor.range(w,r);a.Transforms.select(w,n)}k.isDraggingInternally=!0,Ie.setFragmentData(w,e.dataTransfer)}}),[g.onDragStart]),onDrop:(0,n.useCallback)((e=>{if(!d&&Me(w,e.target)&&!Le(e,g.onDrop)){e.preventDefault();var t=w.selection,r=Ie.findEventRange(w,e),n=e.dataTransfer;a.Transforms.select(w,r),k.isDraggingInternally&&(t&&a.Transforms.delete(w,{at:t}),k.isDraggingInternally=!1),Ie.insertData(w,n),Ie.isFocused(w)||Ie.focus(w)}}),[d,g.onDrop]),onDragEnd:(0,n.useCallback)((e=>{!d&&k.isDraggingInternally&&Me(w,e.target)&&!Le(e,g.onDragEnd)&&(k.isDraggingInternally=!1)}),[d,g.onDragEnd]),onFocus:(0,n.useCallback)((e=>{if(!d&&!k.isUpdatingSelection&&Fe(w,e.target)&&!Le(e,g.onFocus)){var t=Ie.toDOMNode(w,w),r=Ie.findDocumentOrShadowRoot(w);if(k.latestElement=r.activeElement,V&&e.target!==t)return void t.focus();B.set(w,!0)}}),[d,g.onFocus]),onKeyDown:(0,n.useCallback)((e=>{if(!d&&Fe(w,e.target)&&!Le(e,g.onKeyDown)){var{nativeEvent:t}=e,{selection:r}=w,n=w.children[null!==r?r.focus.path[0]:0],o="rtl"===i()(a.Node.string(n));if(ve.isRedo(t)){e.preventDefault();var l=w;return void("function"===typeof l.redo&&l.redo())}if(ve.isUndo(t)){e.preventDefault();var s=w;return void("function"===typeof s.undo&&s.undo())}if(ve.isMoveLineBackward(t))return e.preventDefault(),void a.Transforms.move(w,{unit:"line",reverse:!0});if(ve.isMoveLineForward(t))return e.preventDefault(),void a.Transforms.move(w,{unit:"line"});if(ve.isExtendLineBackward(t))return e.preventDefault(),void a.Transforms.move(w,{unit:"line",edge:"focus",reverse:!0});if(ve.isExtendLineForward(t))return e.preventDefault(),void a.Transforms.move(w,{unit:"line",edge:"focus"});if(ve.isMoveBackward(t))return e.preventDefault(),void(r&&a.Range.isCollapsed(r)?a.Transforms.move(w,{reverse:!o}):a.Transforms.collapse(w,{edge:"start"}));if(ve.isMoveForward(t))return e.preventDefault(),void(r&&a.Range.isCollapsed(r)?a.Transforms.move(w,{reverse:o}):a.Transforms.collapse(w,{edge:"end"}));if(ve.isMoveWordBackward(t))return e.preventDefault(),r&&a.Range.isExpanded(r)&&a.Transforms.collapse(w,{edge:"focus"}),void a.Transforms.move(w,{unit:"word",reverse:!o});if(ve.isMoveWordForward(t))return e.preventDefault(),r&&a.Range.isExpanded(r)&&a.Transforms.collapse(w,{edge:"focus"}),void a.Transforms.move(w,{unit:"word",reverse:o});if(X){if((H||q)&&r&&(ve.isDeleteBackward(t)||ve.isDeleteForward(t))&&a.Range.isCollapsed(r)){var c=a.Node.parent(w,r.anchor.path);if(a.Element.isElement(c)&&a.Editor.isVoid(w,c)&&a.Editor.isInline(w,c))return e.preventDefault(),void a.Transforms.delete(w,{unit:"block"})}}else{if(ve.isBold(t)||ve.isItalic(t)||ve.isTransposeCharacter(t))return void e.preventDefault();if(ve.isSplitBlock(t))return e.preventDefault(),void a.Editor.insertBreak(w);if(ve.isDeleteBackward(t))return e.preventDefault(),void(r&&a.Range.isExpanded(r)?a.Editor.deleteFragment(w,{direction:"backward"}):a.Editor.deleteBackward(w));if(ve.isDeleteForward(t))return e.preventDefault(),void(r&&a.Range.isExpanded(r)?a.Editor.deleteFragment(w,{direction:"forward"}):a.Editor.deleteForward(w));if(ve.isDeleteLineBackward(t))return e.preventDefault(),void(r&&a.Range.isExpanded(r)?a.Editor.deleteFragment(w,{direction:"backward"}):a.Editor.deleteBackward(w,{unit:"line"}));if(ve.isDeleteLineForward(t))return e.preventDefault(),void(r&&a.Range.isExpanded(r)?a.Editor.deleteFragment(w,{direction:"forward"}):a.Editor.deleteForward(w,{unit:"line"}));if(ve.isDeleteWordBackward(t))return e.preventDefault(),void(r&&a.Range.isExpanded(r)?a.Editor.deleteFragment(w,{direction:"backward"}):a.Editor.deleteBackward(w,{unit:"word"}));if(ve.isDeleteWordForward(t))return e.preventDefault(),void(r&&a.Range.isExpanded(r)?a.Editor.deleteFragment(w,{direction:"forward"}):a.Editor.deleteForward(w,{unit:"word"}))}}}),[d,g.onKeyDown]),onPaste:(0,n.useCallback)((e=>{d||!Fe(w,e.target)||Le(e,g.onPaste)||X&&!(e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length)(e.nativeEvent)||(e.preventDefault(),Ie.insertData(w,e.clipboardData))}),[d,g.onPaste])}),n.createElement(Re,{decorations:T,node:w,renderElement:c,renderPlaceholder:f,renderLeaf:u,selection:w.selection}))))}}}]);