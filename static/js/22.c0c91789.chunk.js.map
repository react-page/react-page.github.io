{"version":3,"sources":["../../../src/editor/EditableEditor.tsx","../../../src/editor/StickyWrapper.tsx","../../node_modules/fast-deep-equal/index.js"],"names":["observer","module","exports","equal","a","b","constructor","length","i","keys","Array","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key"],"mappings":"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","file":"static/js/22.c0c91789.chunk.js","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { createEmptyState, Editable, Editor, Provider, } from '@react-page/core';\nimport EditorUI from '@react-page/ui';\nimport React, { useEffect, useRef, useCallback } from 'react';\nimport StickyWrapper from './StickyWrapper';\nimport equals from 'fast-deep-equal';\nvar EditableEditor = function (_a) {\n    var plugins = _a.plugins, defaultPlugin = _a.defaultPlugin, value = _a.value, onChange = _a.onChange, dndBackend = _a.dndBackend, defaultDisplayMode = _a.defaultDisplayMode, blurGateDisabled = _a.blurGateDisabled, lang = _a.lang, languages = _a.languages, onChangeLang = _a.onChangeLang, hideEditorSidebar = _a.hideEditorSidebar, rest = __rest(_a, [\"plugins\", \"defaultPlugin\", \"value\", \"onChange\", \"dndBackend\", \"defaultDisplayMode\", \"blurGateDisabled\", \"lang\", \"languages\", \"onChangeLang\", \"hideEditorSidebar\"]);\n    var theValue = value || createEmptyState();\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var lastValueRef = useRef();\n    var editorRef = useRef(new Editor({ defaultPlugin: defaultPlugin, plugins: plugins, languages: languages, lang: lang }));\n    var onChangeCallback = useCallback(function (newValue) {\n        lastValueRef.current = newValue;\n        onChange(newValue);\n    }, [onChange]);\n    var equal = equals(theValue, lastValueRef === null || lastValueRef === void 0 ? void 0 : lastValueRef.current);\n    useEffect(function () {\n        if (!equal) {\n            lastValueRef.current = theValue;\n            editorRef.current.trigger.editable.update(theValue);\n        }\n    }, [equal]);\n    var editor = editorRef.current;\n    return (React.createElement(Provider, { editor: editor, dndBackend: dndBackend, blurGateDisabled: blurGateDisabled, blurGateDefaultMode: defaultDisplayMode },\n        React.createElement(StickyWrapper, null, function (stickyNess) { return (React.createElement(React.Fragment, null,\n            React.createElement(Editable, __assign({ lang: lang, onChangeLang: onChangeLang, id: theValue === null || theValue === void 0 ? void 0 : theValue.id, onChange: onChangeCallback }, rest)),\n            React.createElement(EditorUI, { stickyNess: stickyNess, hideEditorSidebar: hideEditorSidebar }))); })));\n};\nexport default EditableEditor;\n//# sourceMappingURL=EditableEditor.js.map","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React, { useState } from 'react';\nexport default (function (_a) {\n    var children = _a.children;\n    var ref = React.createRef();\n    var stickyElRef = React.createRef();\n    var _b = __read(useState(false), 2), shouldStickToTop = _b[0], setShouldStickToTop = _b[1];\n    var _c = __read(useState(true), 2), shouldStickToBottom = _c[0], setShouldStickToBottom = _c[1];\n    var _d = __read(useState(0), 2), rightOffset = _d[0], setRightOffset = _d[1];\n    React.useEffect(function () {\n        var calc = function () {\n            if (ref.current) {\n                var _a = ref.current.getBoundingClientRect(), top_1 = _a.top, left = _a.left;\n                var bottom = top_1 + ref.current.clientHeight;\n                // document.documentElement.clientWidth is without scrollbars, so better for us\n                var right = document.documentElement.clientWidth - left - ref.current.clientWidth;\n                var uiHeight = stickyElRef.current\n                    ? stickyElRef.current.clientHeight\n                    : 400;\n                setRightOffset(right);\n                setShouldStickToTop(top_1 > window.innerHeight - uiHeight);\n                setShouldStickToBottom(bottom < window.innerHeight);\n            }\n        };\n        document.addEventListener('scroll', calc);\n        window.addEventListener('resize', calc);\n        var observer = null;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (global.IntersectionObserver) {\n            observer = new IntersectionObserver(calc);\n            if (ref.current) {\n                observer.observe(ref.current);\n            }\n        }\n        // do it once\n        calc();\n        return function () {\n            document.removeEventListener('scroll', calc);\n            window.removeEventListener('resize', calc);\n            observer === null || observer === void 0 ? void 0 : observer.disconnect();\n        };\n    }, [ref, stickyElRef]);\n    return (React.createElement(\"div\", { style: { position: 'relative' }, ref: ref }, children({\n        rightOffset: rightOffset,\n        stickyElRef: stickyElRef,\n        shouldStickToTop: shouldStickToTop,\n        shouldStickToBottom: shouldStickToBottom,\n    })));\n});\n//# sourceMappingURL=StickyWrapper.js.map","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n"],"sourceRoot":""}